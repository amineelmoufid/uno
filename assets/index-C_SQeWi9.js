(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function n0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ph={exports:{}},Lo={},mh={exports:{}},V={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Js=Symbol.for("react.element"),r0=Symbol.for("react.portal"),s0=Symbol.for("react.fragment"),i0=Symbol.for("react.strict_mode"),o0=Symbol.for("react.profiler"),l0=Symbol.for("react.provider"),a0=Symbol.for("react.context"),u0=Symbol.for("react.forward_ref"),c0=Symbol.for("react.suspense"),d0=Symbol.for("react.memo"),f0=Symbol.for("react.lazy"),Xc=Symbol.iterator;function h0(t){return t===null||typeof t!="object"?null:(t=Xc&&t[Xc]||t["@@iterator"],typeof t=="function"?t:null)}var gh={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},vh=Object.assign,yh={};function zr(t,e,n){this.props=t,this.context=e,this.refs=yh,this.updater=n||gh}zr.prototype.isReactComponent={};zr.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};zr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function _h(){}_h.prototype=zr.prototype;function wu(t,e,n){this.props=t,this.context=e,this.refs=yh,this.updater=n||gh}var Eu=wu.prototype=new _h;Eu.constructor=wu;vh(Eu,zr.prototype);Eu.isPureReactComponent=!0;var Jc=Array.isArray,xh=Object.prototype.hasOwnProperty,Su={current:null},wh={key:!0,ref:!0,__self:!0,__source:!0};function Eh(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)xh.call(e,r)&&!wh.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var a=Array(l),u=0;u<l;u++)a[u]=arguments[u+2];s.children=a}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Js,type:t,key:i,ref:o,props:s,_owner:Su.current}}function p0(t,e){return{$$typeof:Js,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Cu(t){return typeof t=="object"&&t!==null&&t.$$typeof===Js}function m0(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Zc=/\/+/g;function pl(t,e){return typeof t=="object"&&t!==null&&t.key!=null?m0(""+t.key):e.toString(36)}function Di(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Js:case r0:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+pl(o,0):r,Jc(s)?(n="",t!=null&&(n=t.replace(Zc,"$&/")+"/"),Di(s,e,n,"",function(u){return u})):s!=null&&(Cu(s)&&(s=p0(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Zc,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Jc(t))for(var l=0;l<t.length;l++){i=t[l];var a=r+pl(i,l);o+=Di(i,e,n,a,s)}else if(a=h0(t),typeof a=="function")for(t=a.call(t),l=0;!(i=t.next()).done;)i=i.value,a=r+pl(i,l++),o+=Di(i,e,n,a,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function pi(t,e,n){if(t==null)return t;var r=[],s=0;return Di(t,r,"","",function(i){return e.call(n,i,s++)}),r}function g0(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Be={current:null},Li={transition:null},v0={ReactCurrentDispatcher:Be,ReactCurrentBatchConfig:Li,ReactCurrentOwner:Su};function Sh(){throw Error("act(...) is not supported in production builds of React.")}V.Children={map:pi,forEach:function(t,e,n){pi(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return pi(t,function(){e++}),e},toArray:function(t){return pi(t,function(e){return e})||[]},only:function(t){if(!Cu(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};V.Component=zr;V.Fragment=s0;V.Profiler=o0;V.PureComponent=wu;V.StrictMode=i0;V.Suspense=c0;V.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=v0;V.act=Sh;V.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=vh({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Su.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(a in e)xh.call(e,a)&&!wh.hasOwnProperty(a)&&(r[a]=e[a]===void 0&&l!==void 0?l[a]:e[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){l=Array(a);for(var u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:Js,type:t.type,key:s,ref:i,props:r,_owner:o}};V.createContext=function(t){return t={$$typeof:a0,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:l0,_context:t},t.Consumer=t};V.createElement=Eh;V.createFactory=function(t){var e=Eh.bind(null,t);return e.type=t,e};V.createRef=function(){return{current:null}};V.forwardRef=function(t){return{$$typeof:u0,render:t}};V.isValidElement=Cu;V.lazy=function(t){return{$$typeof:f0,_payload:{_status:-1,_result:t},_init:g0}};V.memo=function(t,e){return{$$typeof:d0,type:t,compare:e===void 0?null:e}};V.startTransition=function(t){var e=Li.transition;Li.transition={};try{t()}finally{Li.transition=e}};V.unstable_act=Sh;V.useCallback=function(t,e){return Be.current.useCallback(t,e)};V.useContext=function(t){return Be.current.useContext(t)};V.useDebugValue=function(){};V.useDeferredValue=function(t){return Be.current.useDeferredValue(t)};V.useEffect=function(t,e){return Be.current.useEffect(t,e)};V.useId=function(){return Be.current.useId()};V.useImperativeHandle=function(t,e,n){return Be.current.useImperativeHandle(t,e,n)};V.useInsertionEffect=function(t,e){return Be.current.useInsertionEffect(t,e)};V.useLayoutEffect=function(t,e){return Be.current.useLayoutEffect(t,e)};V.useMemo=function(t,e){return Be.current.useMemo(t,e)};V.useReducer=function(t,e,n){return Be.current.useReducer(t,e,n)};V.useRef=function(t){return Be.current.useRef(t)};V.useState=function(t){return Be.current.useState(t)};V.useSyncExternalStore=function(t,e,n){return Be.current.useSyncExternalStore(t,e,n)};V.useTransition=function(){return Be.current.useTransition()};V.version="18.3.1";mh.exports=V;var O=mh.exports;const y0=n0(O);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _0=O,x0=Symbol.for("react.element"),w0=Symbol.for("react.fragment"),E0=Object.prototype.hasOwnProperty,S0=_0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,C0={key:!0,ref:!0,__self:!0,__source:!0};function Ch(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)E0.call(e,r)&&!C0.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:x0,type:t,key:i,ref:o,props:s,_owner:S0.current}}Lo.Fragment=w0;Lo.jsx=Ch;Lo.jsxs=Ch;ph.exports=Lo;var c=ph.exports,Nh={exports:{}},rt={},kh={exports:{}},Th={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(P,w){var b=P.length;P.push(w);e:for(;0<b;){var R=b-1>>>1,D=P[R];if(0<s(D,w))P[R]=w,P[b]=D,b=R;else break e}}function n(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var w=P[0],b=P.pop();if(b!==w){P[0]=b;e:for(var R=0,D=P.length,re=D>>>1;R<re;){var ue=2*(R+1)-1,it=P[ue],je=ue+1,kt=P[je];if(0>s(it,b))je<D&&0>s(kt,it)?(P[R]=kt,P[je]=b,R=je):(P[R]=it,P[ue]=b,R=ue);else if(je<D&&0>s(kt,b))P[R]=kt,P[je]=b,R=je;else break e}}return w}function s(P,w){var b=P.sortIndex-w.sortIndex;return b!==0?b:P.id-w.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var a=[],u=[],d=1,f=null,h=3,v=!1,_=!1,x=!1,N=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(P){for(var w=n(u);w!==null;){if(w.callback===null)r(u);else if(w.startTime<=P)r(u),w.sortIndex=w.expirationTime,e(a,w);else break;w=n(u)}}function g(P){if(x=!1,y(P),!_)if(n(a)!==null)_=!0,H(E);else{var w=n(u);w!==null&&Se(g,w.startTime-P)}}function E(P,w){_=!1,x&&(x=!1,m(T),T=-1),v=!0;var b=h;try{for(y(w),f=n(a);f!==null&&(!(f.expirationTime>w)||P&&!te());){var R=f.callback;if(typeof R=="function"){f.callback=null,h=f.priorityLevel;var D=R(f.expirationTime<=w);w=t.unstable_now(),typeof D=="function"?f.callback=D:f===n(a)&&r(a),y(w)}else r(a);f=n(a)}if(f!==null)var re=!0;else{var ue=n(u);ue!==null&&Se(g,ue.startTime-w),re=!1}return re}finally{f=null,h=b,v=!1}}var C=!1,S=null,T=-1,j=5,A=-1;function te(){return!(t.unstable_now()-A<j)}function Y(){if(S!==null){var P=t.unstable_now();A=P;var w=!0;try{w=S(!0,P)}finally{w?$():(C=!1,S=null)}}else C=!1}var $;if(typeof p=="function")$=function(){p(Y)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,Q=G.port2;G.port1.onmessage=Y,$=function(){Q.postMessage(null)}}else $=function(){N(Y,0)};function H(P){S=P,C||(C=!0,$())}function Se(P,w){T=N(function(){P(t.unstable_now())},w)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(P){P.callback=null},t.unstable_continueExecution=function(){_||v||(_=!0,H(E))},t.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<P?Math.floor(1e3/P):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(a)},t.unstable_next=function(P){switch(h){case 1:case 2:case 3:var w=3;break;default:w=h}var b=h;h=w;try{return P()}finally{h=b}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(P,w){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var b=h;h=P;try{return w()}finally{h=b}},t.unstable_scheduleCallback=function(P,w,b){var R=t.unstable_now();switch(typeof b=="object"&&b!==null?(b=b.delay,b=typeof b=="number"&&0<b?R+b:R):b=R,P){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=b+D,P={id:d++,callback:w,priorityLevel:P,startTime:b,expirationTime:D,sortIndex:-1},b>R?(P.sortIndex=b,e(u,P),n(a)===null&&P===n(u)&&(x?(m(T),T=-1):x=!0,Se(g,b-R))):(P.sortIndex=D,e(a,P),_||v||(_=!0,H(E))),P},t.unstable_shouldYield=te,t.unstable_wrapCallback=function(P){var w=h;return function(){var b=h;h=w;try{return P.apply(this,arguments)}finally{h=b}}}})(Th);kh.exports=Th;var N0=kh.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k0=O,nt=N0;function k(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ih=new Set,Ss={};function Kn(t,e){kr(t,e),kr(t+"Capture",e)}function kr(t,e){for(Ss[t]=e,t=0;t<e.length;t++)Ih.add(e[t])}var Ut=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ia=Object.prototype.hasOwnProperty,T0=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ed={},td={};function I0(t){return ia.call(td,t)?!0:ia.call(ed,t)?!1:T0.test(t)?td[t]=!0:(ed[t]=!0,!1)}function b0(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function R0(t,e,n,r){if(e===null||typeof e>"u"||b0(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ve(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Oe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Oe[t]=new Ve(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Oe[e]=new Ve(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Oe[t]=new Ve(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Oe[t]=new Ve(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Oe[t]=new Ve(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Oe[t]=new Ve(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Oe[t]=new Ve(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Oe[t]=new Ve(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Oe[t]=new Ve(t,5,!1,t.toLowerCase(),null,!1,!1)});var Nu=/[\-:]([a-z])/g;function ku(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Nu,ku);Oe[e]=new Ve(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Nu,ku);Oe[e]=new Ve(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Nu,ku);Oe[e]=new Ve(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Oe[t]=new Ve(t,1,!1,t.toLowerCase(),null,!1,!1)});Oe.xlinkHref=new Ve("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Oe[t]=new Ve(t,1,!1,t.toLowerCase(),null,!0,!0)});function Tu(t,e,n,r){var s=Oe.hasOwnProperty(e)?Oe[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(R0(e,n,s,r)&&(n=null),r||s===null?I0(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Kt=k0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,mi=Symbol.for("react.element"),rr=Symbol.for("react.portal"),sr=Symbol.for("react.fragment"),Iu=Symbol.for("react.strict_mode"),oa=Symbol.for("react.profiler"),bh=Symbol.for("react.provider"),Rh=Symbol.for("react.context"),bu=Symbol.for("react.forward_ref"),la=Symbol.for("react.suspense"),aa=Symbol.for("react.suspense_list"),Ru=Symbol.for("react.memo"),Jt=Symbol.for("react.lazy"),Ph=Symbol.for("react.offscreen"),nd=Symbol.iterator;function Gr(t){return t===null||typeof t!="object"?null:(t=nd&&t[nd]||t["@@iterator"],typeof t=="function"?t:null)}var ge=Object.assign,ml;function ss(t){if(ml===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ml=e&&e[1]||""}return`
`+ml+t}var gl=!1;function vl(t,e){if(!t||gl)return"";gl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var a=`
`+s[o].replace(" at new "," at ");return t.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",t.displayName)),a}while(1<=o&&0<=l);break}}}finally{gl=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ss(t):""}function P0(t){switch(t.tag){case 5:return ss(t.type);case 16:return ss("Lazy");case 13:return ss("Suspense");case 19:return ss("SuspenseList");case 0:case 2:case 15:return t=vl(t.type,!1),t;case 11:return t=vl(t.type.render,!1),t;case 1:return t=vl(t.type,!0),t;default:return""}}function ua(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case sr:return"Fragment";case rr:return"Portal";case oa:return"Profiler";case Iu:return"StrictMode";case la:return"Suspense";case aa:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Rh:return(t.displayName||"Context")+".Consumer";case bh:return(t._context.displayName||"Context")+".Provider";case bu:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Ru:return e=t.displayName||null,e!==null?e:ua(t.type)||"Memo";case Jt:e=t._payload,t=t._init;try{return ua(t(e))}catch{}}return null}function A0(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ua(e);case 8:return e===Iu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function vn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ah(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function M0(t){var e=Ah(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function gi(t){t._valueTracker||(t._valueTracker=M0(t))}function Mh(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Ah(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Ki(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ca(t,e){var n=e.checked;return ge({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function rd(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=vn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Oh(t,e){e=e.checked,e!=null&&Tu(t,"checked",e,!1)}function da(t,e){Oh(t,e);var n=vn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?fa(t,e.type,n):e.hasOwnProperty("defaultValue")&&fa(t,e.type,vn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function sd(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function fa(t,e,n){(e!=="number"||Ki(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var is=Array.isArray;function vr(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+vn(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function ha(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(k(91));return ge({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function id(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(k(92));if(is(n)){if(1<n.length)throw Error(k(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:vn(n)}}function jh(t,e){var n=vn(e.value),r=vn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function od(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Dh(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pa(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Dh(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var vi,Lh=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(vi=vi||document.createElement("div"),vi.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=vi.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Cs(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var us={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},O0=["Webkit","ms","Moz","O"];Object.keys(us).forEach(function(t){O0.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),us[e]=us[t]})});function Fh(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||us.hasOwnProperty(t)&&us[t]?(""+e).trim():e+"px"}function zh(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Fh(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var j0=ge({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ma(t,e){if(e){if(j0[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(k(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(k(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(k(61))}if(e.style!=null&&typeof e.style!="object")throw Error(k(62))}}function ga(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var va=null;function Pu(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ya=null,yr=null,_r=null;function ld(t){if(t=ti(t)){if(typeof ya!="function")throw Error(k(280));var e=t.stateNode;e&&(e=Ho(e),ya(t.stateNode,t.type,e))}}function $h(t){yr?_r?_r.push(t):_r=[t]:yr=t}function Wh(){if(yr){var t=yr,e=_r;if(_r=yr=null,ld(t),e)for(t=0;t<e.length;t++)ld(e[t])}}function Hh(t,e){return t(e)}function Uh(){}var yl=!1;function Bh(t,e,n){if(yl)return t(e,n);yl=!0;try{return Hh(t,e,n)}finally{yl=!1,(yr!==null||_r!==null)&&(Uh(),Wh())}}function Ns(t,e){var n=t.stateNode;if(n===null)return null;var r=Ho(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(k(231,e,typeof n));return n}var _a=!1;if(Ut)try{var Yr={};Object.defineProperty(Yr,"passive",{get:function(){_a=!0}}),window.addEventListener("test",Yr,Yr),window.removeEventListener("test",Yr,Yr)}catch{_a=!1}function D0(t,e,n,r,s,i,o,l,a){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var cs=!1,qi=null,Xi=!1,xa=null,L0={onError:function(t){cs=!0,qi=t}};function F0(t,e,n,r,s,i,o,l,a){cs=!1,qi=null,D0.apply(L0,arguments)}function z0(t,e,n,r,s,i,o,l,a){if(F0.apply(this,arguments),cs){if(cs){var u=qi;cs=!1,qi=null}else throw Error(k(198));Xi||(Xi=!0,xa=u)}}function qn(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Vh(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function ad(t){if(qn(t)!==t)throw Error(k(188))}function $0(t){var e=t.alternate;if(!e){if(e=qn(t),e===null)throw Error(k(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return ad(s),t;if(i===r)return ad(s),e;i=i.sibling}throw Error(k(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(k(189))}}if(n.alternate!==r)throw Error(k(190))}if(n.tag!==3)throw Error(k(188));return n.stateNode.current===n?t:e}function Gh(t){return t=$0(t),t!==null?Yh(t):null}function Yh(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Yh(t);if(e!==null)return e;t=t.sibling}return null}var Qh=nt.unstable_scheduleCallback,ud=nt.unstable_cancelCallback,W0=nt.unstable_shouldYield,H0=nt.unstable_requestPaint,_e=nt.unstable_now,U0=nt.unstable_getCurrentPriorityLevel,Au=nt.unstable_ImmediatePriority,Kh=nt.unstable_UserBlockingPriority,Ji=nt.unstable_NormalPriority,B0=nt.unstable_LowPriority,qh=nt.unstable_IdlePriority,Fo=null,Pt=null;function V0(t){if(Pt&&typeof Pt.onCommitFiberRoot=="function")try{Pt.onCommitFiberRoot(Fo,t,void 0,(t.current.flags&128)===128)}catch{}}var xt=Math.clz32?Math.clz32:Q0,G0=Math.log,Y0=Math.LN2;function Q0(t){return t>>>=0,t===0?32:31-(G0(t)/Y0|0)|0}var yi=64,_i=4194304;function os(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Zi(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=os(l):(i&=o,i!==0&&(r=os(i)))}else o=n&~s,o!==0?r=os(o):i!==0&&(r=os(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-xt(e),s=1<<n,r|=t[n],e&=~s;return r}function K0(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function q0(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-xt(i),l=1<<o,a=s[o];a===-1?(!(l&n)||l&r)&&(s[o]=K0(l,e)):a<=e&&(t.expiredLanes|=l),i&=~l}}function wa(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Xh(){var t=yi;return yi<<=1,!(yi&4194240)&&(yi=64),t}function _l(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Zs(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-xt(e),t[e]=n}function X0(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-xt(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Mu(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-xt(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Z=0;function Jh(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Zh,Ou,ep,tp,np,Ea=!1,xi=[],sn=null,on=null,ln=null,ks=new Map,Ts=new Map,en=[],J0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function cd(t,e){switch(t){case"focusin":case"focusout":sn=null;break;case"dragenter":case"dragleave":on=null;break;case"mouseover":case"mouseout":ln=null;break;case"pointerover":case"pointerout":ks.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ts.delete(e.pointerId)}}function Qr(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=ti(e),e!==null&&Ou(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Z0(t,e,n,r,s){switch(e){case"focusin":return sn=Qr(sn,t,e,n,r,s),!0;case"dragenter":return on=Qr(on,t,e,n,r,s),!0;case"mouseover":return ln=Qr(ln,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return ks.set(i,Qr(ks.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Ts.set(i,Qr(Ts.get(i)||null,t,e,n,r,s)),!0}return!1}function rp(t){var e=Rn(t.target);if(e!==null){var n=qn(e);if(n!==null){if(e=n.tag,e===13){if(e=Vh(n),e!==null){t.blockedOn=e,np(t.priority,function(){ep(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Fi(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Sa(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);va=r,n.target.dispatchEvent(r),va=null}else return e=ti(n),e!==null&&Ou(e),t.blockedOn=n,!1;e.shift()}return!0}function dd(t,e,n){Fi(t)&&n.delete(e)}function ev(){Ea=!1,sn!==null&&Fi(sn)&&(sn=null),on!==null&&Fi(on)&&(on=null),ln!==null&&Fi(ln)&&(ln=null),ks.forEach(dd),Ts.forEach(dd)}function Kr(t,e){t.blockedOn===e&&(t.blockedOn=null,Ea||(Ea=!0,nt.unstable_scheduleCallback(nt.unstable_NormalPriority,ev)))}function Is(t){function e(s){return Kr(s,t)}if(0<xi.length){Kr(xi[0],t);for(var n=1;n<xi.length;n++){var r=xi[n];r.blockedOn===t&&(r.blockedOn=null)}}for(sn!==null&&Kr(sn,t),on!==null&&Kr(on,t),ln!==null&&Kr(ln,t),ks.forEach(e),Ts.forEach(e),n=0;n<en.length;n++)r=en[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<en.length&&(n=en[0],n.blockedOn===null);)rp(n),n.blockedOn===null&&en.shift()}var xr=Kt.ReactCurrentBatchConfig,eo=!0;function tv(t,e,n,r){var s=Z,i=xr.transition;xr.transition=null;try{Z=1,ju(t,e,n,r)}finally{Z=s,xr.transition=i}}function nv(t,e,n,r){var s=Z,i=xr.transition;xr.transition=null;try{Z=4,ju(t,e,n,r)}finally{Z=s,xr.transition=i}}function ju(t,e,n,r){if(eo){var s=Sa(t,e,n,r);if(s===null)bl(t,e,r,to,n),cd(t,r);else if(Z0(s,t,e,n,r))r.stopPropagation();else if(cd(t,r),e&4&&-1<J0.indexOf(t)){for(;s!==null;){var i=ti(s);if(i!==null&&Zh(i),i=Sa(t,e,n,r),i===null&&bl(t,e,r,to,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else bl(t,e,r,null,n)}}var to=null;function Sa(t,e,n,r){if(to=null,t=Pu(r),t=Rn(t),t!==null)if(e=qn(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Vh(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return to=t,null}function sp(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(U0()){case Au:return 1;case Kh:return 4;case Ji:case B0:return 16;case qh:return 536870912;default:return 16}default:return 16}}var nn=null,Du=null,zi=null;function ip(){if(zi)return zi;var t,e=Du,n=e.length,r,s="value"in nn?nn.value:nn.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return zi=s.slice(t,1<r?1-r:void 0)}function $i(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function wi(){return!0}function fd(){return!1}function st(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?wi:fd,this.isPropagationStopped=fd,this}return ge(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=wi)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=wi)},persist:function(){},isPersistent:wi}),e}var $r={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Lu=st($r),ei=ge({},$r,{view:0,detail:0}),rv=st(ei),xl,wl,qr,zo=ge({},ei,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fu,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==qr&&(qr&&t.type==="mousemove"?(xl=t.screenX-qr.screenX,wl=t.screenY-qr.screenY):wl=xl=0,qr=t),xl)},movementY:function(t){return"movementY"in t?t.movementY:wl}}),hd=st(zo),sv=ge({},zo,{dataTransfer:0}),iv=st(sv),ov=ge({},ei,{relatedTarget:0}),El=st(ov),lv=ge({},$r,{animationName:0,elapsedTime:0,pseudoElement:0}),av=st(lv),uv=ge({},$r,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),cv=st(uv),dv=ge({},$r,{data:0}),pd=st(dv),fv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mv(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=pv[t])?!!e[t]:!1}function Fu(){return mv}var gv=ge({},ei,{key:function(t){if(t.key){var e=fv[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=$i(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?hv[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fu,charCode:function(t){return t.type==="keypress"?$i(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?$i(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),vv=st(gv),yv=ge({},zo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),md=st(yv),_v=ge({},ei,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fu}),xv=st(_v),wv=ge({},$r,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ev=st(wv),Sv=ge({},zo,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Cv=st(Sv),Nv=[9,13,27,32],zu=Ut&&"CompositionEvent"in window,ds=null;Ut&&"documentMode"in document&&(ds=document.documentMode);var kv=Ut&&"TextEvent"in window&&!ds,op=Ut&&(!zu||ds&&8<ds&&11>=ds),gd=" ",vd=!1;function lp(t,e){switch(t){case"keyup":return Nv.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ap(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ir=!1;function Tv(t,e){switch(t){case"compositionend":return ap(e);case"keypress":return e.which!==32?null:(vd=!0,gd);case"textInput":return t=e.data,t===gd&&vd?null:t;default:return null}}function Iv(t,e){if(ir)return t==="compositionend"||!zu&&lp(t,e)?(t=ip(),zi=Du=nn=null,ir=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return op&&e.locale!=="ko"?null:e.data;default:return null}}var bv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!bv[t.type]:e==="textarea"}function up(t,e,n,r){$h(r),e=no(e,"onChange"),0<e.length&&(n=new Lu("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var fs=null,bs=null;function Rv(t){xp(t,0)}function $o(t){var e=ar(t);if(Mh(e))return t}function Pv(t,e){if(t==="change")return e}var cp=!1;if(Ut){var Sl;if(Ut){var Cl="oninput"in document;if(!Cl){var _d=document.createElement("div");_d.setAttribute("oninput","return;"),Cl=typeof _d.oninput=="function"}Sl=Cl}else Sl=!1;cp=Sl&&(!document.documentMode||9<document.documentMode)}function xd(){fs&&(fs.detachEvent("onpropertychange",dp),bs=fs=null)}function dp(t){if(t.propertyName==="value"&&$o(bs)){var e=[];up(e,bs,t,Pu(t)),Bh(Rv,e)}}function Av(t,e,n){t==="focusin"?(xd(),fs=e,bs=n,fs.attachEvent("onpropertychange",dp)):t==="focusout"&&xd()}function Mv(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return $o(bs)}function Ov(t,e){if(t==="click")return $o(e)}function jv(t,e){if(t==="input"||t==="change")return $o(e)}function Dv(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var St=typeof Object.is=="function"?Object.is:Dv;function Rs(t,e){if(St(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!ia.call(e,s)||!St(t[s],e[s]))return!1}return!0}function wd(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ed(t,e){var n=wd(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=wd(n)}}function fp(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?fp(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function hp(){for(var t=window,e=Ki();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ki(t.document)}return e}function $u(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Lv(t){var e=hp(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&fp(n.ownerDocument.documentElement,n)){if(r!==null&&$u(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Ed(n,i);var o=Ed(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Fv=Ut&&"documentMode"in document&&11>=document.documentMode,or=null,Ca=null,hs=null,Na=!1;function Sd(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Na||or==null||or!==Ki(r)||(r=or,"selectionStart"in r&&$u(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),hs&&Rs(hs,r)||(hs=r,r=no(Ca,"onSelect"),0<r.length&&(e=new Lu("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=or)))}function Ei(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var lr={animationend:Ei("Animation","AnimationEnd"),animationiteration:Ei("Animation","AnimationIteration"),animationstart:Ei("Animation","AnimationStart"),transitionend:Ei("Transition","TransitionEnd")},Nl={},pp={};Ut&&(pp=document.createElement("div").style,"AnimationEvent"in window||(delete lr.animationend.animation,delete lr.animationiteration.animation,delete lr.animationstart.animation),"TransitionEvent"in window||delete lr.transitionend.transition);function Wo(t){if(Nl[t])return Nl[t];if(!lr[t])return t;var e=lr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in pp)return Nl[t]=e[n];return t}var mp=Wo("animationend"),gp=Wo("animationiteration"),vp=Wo("animationstart"),yp=Wo("transitionend"),_p=new Map,Cd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function En(t,e){_p.set(t,e),Kn(e,[t])}for(var kl=0;kl<Cd.length;kl++){var Tl=Cd[kl],zv=Tl.toLowerCase(),$v=Tl[0].toUpperCase()+Tl.slice(1);En(zv,"on"+$v)}En(mp,"onAnimationEnd");En(gp,"onAnimationIteration");En(vp,"onAnimationStart");En("dblclick","onDoubleClick");En("focusin","onFocus");En("focusout","onBlur");En(yp,"onTransitionEnd");kr("onMouseEnter",["mouseout","mouseover"]);kr("onMouseLeave",["mouseout","mouseover"]);kr("onPointerEnter",["pointerout","pointerover"]);kr("onPointerLeave",["pointerout","pointerover"]);Kn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Kn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Kn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Kn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Kn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Kn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ls="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Wv=new Set("cancel close invalid load scroll toggle".split(" ").concat(ls));function Nd(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,z0(r,e,void 0,t),t.currentTarget=null}function xp(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],a=l.instance,u=l.currentTarget;if(l=l.listener,a!==i&&s.isPropagationStopped())break e;Nd(s,l,u),i=a}else for(o=0;o<r.length;o++){if(l=r[o],a=l.instance,u=l.currentTarget,l=l.listener,a!==i&&s.isPropagationStopped())break e;Nd(s,l,u),i=a}}}if(Xi)throw t=xa,Xi=!1,xa=null,t}function oe(t,e){var n=e[Ra];n===void 0&&(n=e[Ra]=new Set);var r=t+"__bubble";n.has(r)||(wp(e,t,2,!1),n.add(r))}function Il(t,e,n){var r=0;e&&(r|=4),wp(n,t,r,e)}var Si="_reactListening"+Math.random().toString(36).slice(2);function Ps(t){if(!t[Si]){t[Si]=!0,Ih.forEach(function(n){n!=="selectionchange"&&(Wv.has(n)||Il(n,!1,t),Il(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Si]||(e[Si]=!0,Il("selectionchange",!1,e))}}function wp(t,e,n,r){switch(sp(e)){case 1:var s=tv;break;case 4:s=nv;break;default:s=ju}n=s.bind(null,e,n,t),s=void 0,!_a||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function bl(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var a=o.tag;if((a===3||a===4)&&(a=o.stateNode.containerInfo,a===s||a.nodeType===8&&a.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Rn(l),o===null)return;if(a=o.tag,a===5||a===6){r=i=o;continue e}l=l.parentNode}}r=r.return}Bh(function(){var u=i,d=Pu(n),f=[];e:{var h=_p.get(t);if(h!==void 0){var v=Lu,_=t;switch(t){case"keypress":if($i(n)===0)break e;case"keydown":case"keyup":v=vv;break;case"focusin":_="focus",v=El;break;case"focusout":_="blur",v=El;break;case"beforeblur":case"afterblur":v=El;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=hd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=iv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=xv;break;case mp:case gp:case vp:v=av;break;case yp:v=Ev;break;case"scroll":v=rv;break;case"wheel":v=Cv;break;case"copy":case"cut":case"paste":v=cv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=md}var x=(e&4)!==0,N=!x&&t==="scroll",m=x?h!==null?h+"Capture":null:h;x=[];for(var p=u,y;p!==null;){y=p;var g=y.stateNode;if(y.tag===5&&g!==null&&(y=g,m!==null&&(g=Ns(p,m),g!=null&&x.push(As(p,g,y)))),N)break;p=p.return}0<x.length&&(h=new v(h,_,null,n,d),f.push({event:h,listeners:x}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",h&&n!==va&&(_=n.relatedTarget||n.fromElement)&&(Rn(_)||_[Bt]))break e;if((v||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,v?(_=n.relatedTarget||n.toElement,v=u,_=_?Rn(_):null,_!==null&&(N=qn(_),_!==N||_.tag!==5&&_.tag!==6)&&(_=null)):(v=null,_=u),v!==_)){if(x=hd,g="onMouseLeave",m="onMouseEnter",p="mouse",(t==="pointerout"||t==="pointerover")&&(x=md,g="onPointerLeave",m="onPointerEnter",p="pointer"),N=v==null?h:ar(v),y=_==null?h:ar(_),h=new x(g,p+"leave",v,n,d),h.target=N,h.relatedTarget=y,g=null,Rn(d)===u&&(x=new x(m,p+"enter",_,n,d),x.target=y,x.relatedTarget=N,g=x),N=g,v&&_)t:{for(x=v,m=_,p=0,y=x;y;y=er(y))p++;for(y=0,g=m;g;g=er(g))y++;for(;0<p-y;)x=er(x),p--;for(;0<y-p;)m=er(m),y--;for(;p--;){if(x===m||m!==null&&x===m.alternate)break t;x=er(x),m=er(m)}x=null}else x=null;v!==null&&kd(f,h,v,x,!1),_!==null&&N!==null&&kd(f,N,_,x,!0)}}e:{if(h=u?ar(u):window,v=h.nodeName&&h.nodeName.toLowerCase(),v==="select"||v==="input"&&h.type==="file")var E=Pv;else if(yd(h))if(cp)E=jv;else{E=Mv;var C=Av}else(v=h.nodeName)&&v.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(E=Ov);if(E&&(E=E(t,u))){up(f,E,n,d);break e}C&&C(t,h,u),t==="focusout"&&(C=h._wrapperState)&&C.controlled&&h.type==="number"&&fa(h,"number",h.value)}switch(C=u?ar(u):window,t){case"focusin":(yd(C)||C.contentEditable==="true")&&(or=C,Ca=u,hs=null);break;case"focusout":hs=Ca=or=null;break;case"mousedown":Na=!0;break;case"contextmenu":case"mouseup":case"dragend":Na=!1,Sd(f,n,d);break;case"selectionchange":if(Fv)break;case"keydown":case"keyup":Sd(f,n,d)}var S;if(zu)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else ir?lp(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(op&&n.locale!=="ko"&&(ir||T!=="onCompositionStart"?T==="onCompositionEnd"&&ir&&(S=ip()):(nn=d,Du="value"in nn?nn.value:nn.textContent,ir=!0)),C=no(u,T),0<C.length&&(T=new pd(T,t,null,n,d),f.push({event:T,listeners:C}),S?T.data=S:(S=ap(n),S!==null&&(T.data=S)))),(S=kv?Tv(t,n):Iv(t,n))&&(u=no(u,"onBeforeInput"),0<u.length&&(d=new pd("onBeforeInput","beforeinput",null,n,d),f.push({event:d,listeners:u}),d.data=S))}xp(f,e)})}function As(t,e,n){return{instance:t,listener:e,currentTarget:n}}function no(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Ns(t,n),i!=null&&r.unshift(As(t,i,s)),i=Ns(t,e),i!=null&&r.push(As(t,i,s))),t=t.return}return r}function er(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function kd(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,a=l.alternate,u=l.stateNode;if(a!==null&&a===r)break;l.tag===5&&u!==null&&(l=u,s?(a=Ns(n,i),a!=null&&o.unshift(As(n,a,l))):s||(a=Ns(n,i),a!=null&&o.push(As(n,a,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Hv=/\r\n?/g,Uv=/\u0000|\uFFFD/g;function Td(t){return(typeof t=="string"?t:""+t).replace(Hv,`
`).replace(Uv,"")}function Ci(t,e,n){if(e=Td(e),Td(t)!==e&&n)throw Error(k(425))}function ro(){}var ka=null,Ta=null;function Ia(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ba=typeof setTimeout=="function"?setTimeout:void 0,Bv=typeof clearTimeout=="function"?clearTimeout:void 0,Id=typeof Promise=="function"?Promise:void 0,Vv=typeof queueMicrotask=="function"?queueMicrotask:typeof Id<"u"?function(t){return Id.resolve(null).then(t).catch(Gv)}:ba;function Gv(t){setTimeout(function(){throw t})}function Rl(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Is(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Is(e)}function an(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function bd(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Wr=Math.random().toString(36).slice(2),bt="__reactFiber$"+Wr,Ms="__reactProps$"+Wr,Bt="__reactContainer$"+Wr,Ra="__reactEvents$"+Wr,Yv="__reactListeners$"+Wr,Qv="__reactHandles$"+Wr;function Rn(t){var e=t[bt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Bt]||n[bt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=bd(t);t!==null;){if(n=t[bt])return n;t=bd(t)}return e}t=n,n=t.parentNode}return null}function ti(t){return t=t[bt]||t[Bt],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ar(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(k(33))}function Ho(t){return t[Ms]||null}var Pa=[],ur=-1;function Sn(t){return{current:t}}function ae(t){0>ur||(t.current=Pa[ur],Pa[ur]=null,ur--)}function ie(t,e){ur++,Pa[ur]=t.current,t.current=e}var yn={},ze=Sn(yn),Ke=Sn(!1),Ln=yn;function Tr(t,e){var n=t.type.contextTypes;if(!n)return yn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function qe(t){return t=t.childContextTypes,t!=null}function so(){ae(Ke),ae(ze)}function Rd(t,e,n){if(ze.current!==yn)throw Error(k(168));ie(ze,e),ie(Ke,n)}function Ep(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(k(108,A0(t)||"Unknown",s));return ge({},n,r)}function io(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||yn,Ln=ze.current,ie(ze,t),ie(Ke,Ke.current),!0}function Pd(t,e,n){var r=t.stateNode;if(!r)throw Error(k(169));n?(t=Ep(t,e,Ln),r.__reactInternalMemoizedMergedChildContext=t,ae(Ke),ae(ze),ie(ze,t)):ae(Ke),ie(Ke,n)}var Dt=null,Uo=!1,Pl=!1;function Sp(t){Dt===null?Dt=[t]:Dt.push(t)}function Kv(t){Uo=!0,Sp(t)}function Cn(){if(!Pl&&Dt!==null){Pl=!0;var t=0,e=Z;try{var n=Dt;for(Z=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Dt=null,Uo=!1}catch(s){throw Dt!==null&&(Dt=Dt.slice(t+1)),Qh(Au,Cn),s}finally{Z=e,Pl=!1}}return null}var cr=[],dr=0,oo=null,lo=0,ot=[],lt=0,Fn=null,Ft=1,zt="";function kn(t,e){cr[dr++]=lo,cr[dr++]=oo,oo=t,lo=e}function Cp(t,e,n){ot[lt++]=Ft,ot[lt++]=zt,ot[lt++]=Fn,Fn=t;var r=Ft;t=zt;var s=32-xt(r)-1;r&=~(1<<s),n+=1;var i=32-xt(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Ft=1<<32-xt(e)+s|n<<s|r,zt=i+t}else Ft=1<<i|n<<s|r,zt=t}function Wu(t){t.return!==null&&(kn(t,1),Cp(t,1,0))}function Hu(t){for(;t===oo;)oo=cr[--dr],cr[dr]=null,lo=cr[--dr],cr[dr]=null;for(;t===Fn;)Fn=ot[--lt],ot[lt]=null,zt=ot[--lt],ot[lt]=null,Ft=ot[--lt],ot[lt]=null}var tt=null,et=null,ce=!1,vt=null;function Np(t,e){var n=at(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Ad(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,tt=t,et=an(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,tt=t,et=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Fn!==null?{id:Ft,overflow:zt}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=at(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,tt=t,et=null,!0):!1;default:return!1}}function Aa(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ma(t){if(ce){var e=et;if(e){var n=e;if(!Ad(t,e)){if(Aa(t))throw Error(k(418));e=an(n.nextSibling);var r=tt;e&&Ad(t,e)?Np(r,n):(t.flags=t.flags&-4097|2,ce=!1,tt=t)}}else{if(Aa(t))throw Error(k(418));t.flags=t.flags&-4097|2,ce=!1,tt=t}}}function Md(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;tt=t}function Ni(t){if(t!==tt)return!1;if(!ce)return Md(t),ce=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ia(t.type,t.memoizedProps)),e&&(e=et)){if(Aa(t))throw kp(),Error(k(418));for(;e;)Np(t,e),e=an(e.nextSibling)}if(Md(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(k(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){et=an(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}et=null}}else et=tt?an(t.stateNode.nextSibling):null;return!0}function kp(){for(var t=et;t;)t=an(t.nextSibling)}function Ir(){et=tt=null,ce=!1}function Uu(t){vt===null?vt=[t]:vt.push(t)}var qv=Kt.ReactCurrentBatchConfig;function Xr(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(k(309));var r=n.stateNode}if(!r)throw Error(k(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(k(284));if(!n._owner)throw Error(k(290,t))}return t}function ki(t,e){throw t=Object.prototype.toString.call(e),Error(k(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Od(t){var e=t._init;return e(t._payload)}function Tp(t){function e(m,p){if(t){var y=m.deletions;y===null?(m.deletions=[p],m.flags|=16):y.push(p)}}function n(m,p){if(!t)return null;for(;p!==null;)e(m,p),p=p.sibling;return null}function r(m,p){for(m=new Map;p!==null;)p.key!==null?m.set(p.key,p):m.set(p.index,p),p=p.sibling;return m}function s(m,p){return m=fn(m,p),m.index=0,m.sibling=null,m}function i(m,p,y){return m.index=y,t?(y=m.alternate,y!==null?(y=y.index,y<p?(m.flags|=2,p):y):(m.flags|=2,p)):(m.flags|=1048576,p)}function o(m){return t&&m.alternate===null&&(m.flags|=2),m}function l(m,p,y,g){return p===null||p.tag!==6?(p=Fl(y,m.mode,g),p.return=m,p):(p=s(p,y),p.return=m,p)}function a(m,p,y,g){var E=y.type;return E===sr?d(m,p,y.props.children,g,y.key):p!==null&&(p.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Jt&&Od(E)===p.type)?(g=s(p,y.props),g.ref=Xr(m,p,y),g.return=m,g):(g=Yi(y.type,y.key,y.props,null,m.mode,g),g.ref=Xr(m,p,y),g.return=m,g)}function u(m,p,y,g){return p===null||p.tag!==4||p.stateNode.containerInfo!==y.containerInfo||p.stateNode.implementation!==y.implementation?(p=zl(y,m.mode,g),p.return=m,p):(p=s(p,y.children||[]),p.return=m,p)}function d(m,p,y,g,E){return p===null||p.tag!==7?(p=Dn(y,m.mode,g,E),p.return=m,p):(p=s(p,y),p.return=m,p)}function f(m,p,y){if(typeof p=="string"&&p!==""||typeof p=="number")return p=Fl(""+p,m.mode,y),p.return=m,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case mi:return y=Yi(p.type,p.key,p.props,null,m.mode,y),y.ref=Xr(m,null,p),y.return=m,y;case rr:return p=zl(p,m.mode,y),p.return=m,p;case Jt:var g=p._init;return f(m,g(p._payload),y)}if(is(p)||Gr(p))return p=Dn(p,m.mode,y,null),p.return=m,p;ki(m,p)}return null}function h(m,p,y,g){var E=p!==null?p.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return E!==null?null:l(m,p,""+y,g);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case mi:return y.key===E?a(m,p,y,g):null;case rr:return y.key===E?u(m,p,y,g):null;case Jt:return E=y._init,h(m,p,E(y._payload),g)}if(is(y)||Gr(y))return E!==null?null:d(m,p,y,g,null);ki(m,y)}return null}function v(m,p,y,g,E){if(typeof g=="string"&&g!==""||typeof g=="number")return m=m.get(y)||null,l(p,m,""+g,E);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case mi:return m=m.get(g.key===null?y:g.key)||null,a(p,m,g,E);case rr:return m=m.get(g.key===null?y:g.key)||null,u(p,m,g,E);case Jt:var C=g._init;return v(m,p,y,C(g._payload),E)}if(is(g)||Gr(g))return m=m.get(y)||null,d(p,m,g,E,null);ki(p,g)}return null}function _(m,p,y,g){for(var E=null,C=null,S=p,T=p=0,j=null;S!==null&&T<y.length;T++){S.index>T?(j=S,S=null):j=S.sibling;var A=h(m,S,y[T],g);if(A===null){S===null&&(S=j);break}t&&S&&A.alternate===null&&e(m,S),p=i(A,p,T),C===null?E=A:C.sibling=A,C=A,S=j}if(T===y.length)return n(m,S),ce&&kn(m,T),E;if(S===null){for(;T<y.length;T++)S=f(m,y[T],g),S!==null&&(p=i(S,p,T),C===null?E=S:C.sibling=S,C=S);return ce&&kn(m,T),E}for(S=r(m,S);T<y.length;T++)j=v(S,m,T,y[T],g),j!==null&&(t&&j.alternate!==null&&S.delete(j.key===null?T:j.key),p=i(j,p,T),C===null?E=j:C.sibling=j,C=j);return t&&S.forEach(function(te){return e(m,te)}),ce&&kn(m,T),E}function x(m,p,y,g){var E=Gr(y);if(typeof E!="function")throw Error(k(150));if(y=E.call(y),y==null)throw Error(k(151));for(var C=E=null,S=p,T=p=0,j=null,A=y.next();S!==null&&!A.done;T++,A=y.next()){S.index>T?(j=S,S=null):j=S.sibling;var te=h(m,S,A.value,g);if(te===null){S===null&&(S=j);break}t&&S&&te.alternate===null&&e(m,S),p=i(te,p,T),C===null?E=te:C.sibling=te,C=te,S=j}if(A.done)return n(m,S),ce&&kn(m,T),E;if(S===null){for(;!A.done;T++,A=y.next())A=f(m,A.value,g),A!==null&&(p=i(A,p,T),C===null?E=A:C.sibling=A,C=A);return ce&&kn(m,T),E}for(S=r(m,S);!A.done;T++,A=y.next())A=v(S,m,T,A.value,g),A!==null&&(t&&A.alternate!==null&&S.delete(A.key===null?T:A.key),p=i(A,p,T),C===null?E=A:C.sibling=A,C=A);return t&&S.forEach(function(Y){return e(m,Y)}),ce&&kn(m,T),E}function N(m,p,y,g){if(typeof y=="object"&&y!==null&&y.type===sr&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case mi:e:{for(var E=y.key,C=p;C!==null;){if(C.key===E){if(E=y.type,E===sr){if(C.tag===7){n(m,C.sibling),p=s(C,y.props.children),p.return=m,m=p;break e}}else if(C.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Jt&&Od(E)===C.type){n(m,C.sibling),p=s(C,y.props),p.ref=Xr(m,C,y),p.return=m,m=p;break e}n(m,C);break}else e(m,C);C=C.sibling}y.type===sr?(p=Dn(y.props.children,m.mode,g,y.key),p.return=m,m=p):(g=Yi(y.type,y.key,y.props,null,m.mode,g),g.ref=Xr(m,p,y),g.return=m,m=g)}return o(m);case rr:e:{for(C=y.key;p!==null;){if(p.key===C)if(p.tag===4&&p.stateNode.containerInfo===y.containerInfo&&p.stateNode.implementation===y.implementation){n(m,p.sibling),p=s(p,y.children||[]),p.return=m,m=p;break e}else{n(m,p);break}else e(m,p);p=p.sibling}p=zl(y,m.mode,g),p.return=m,m=p}return o(m);case Jt:return C=y._init,N(m,p,C(y._payload),g)}if(is(y))return _(m,p,y,g);if(Gr(y))return x(m,p,y,g);ki(m,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,p!==null&&p.tag===6?(n(m,p.sibling),p=s(p,y),p.return=m,m=p):(n(m,p),p=Fl(y,m.mode,g),p.return=m,m=p),o(m)):n(m,p)}return N}var br=Tp(!0),Ip=Tp(!1),ao=Sn(null),uo=null,fr=null,Bu=null;function Vu(){Bu=fr=uo=null}function Gu(t){var e=ao.current;ae(ao),t._currentValue=e}function Oa(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function wr(t,e){uo=t,Bu=fr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ye=!0),t.firstContext=null)}function dt(t){var e=t._currentValue;if(Bu!==t)if(t={context:t,memoizedValue:e,next:null},fr===null){if(uo===null)throw Error(k(308));fr=t,uo.dependencies={lanes:0,firstContext:t}}else fr=fr.next=t;return e}var Pn=null;function Yu(t){Pn===null?Pn=[t]:Pn.push(t)}function bp(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Yu(e)):(n.next=s.next,s.next=n),e.interleaved=n,Vt(t,r)}function Vt(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Zt=!1;function Qu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Rp(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Wt(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function un(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,X&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Vt(t,n)}return s=r.interleaved,s===null?(e.next=e,Yu(r)):(e.next=s.next,s.next=e),r.interleaved=e,Vt(t,n)}function Wi(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Mu(t,n)}}function jd(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function co(t,e,n,r){var s=t.updateQueue;Zt=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var a=l,u=a.next;a.next=null,o===null?i=u:o.next=u,o=a;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=a))}if(i!==null){var f=s.baseState;o=0,d=u=a=null,l=i;do{var h=l.lane,v=l.eventTime;if((r&h)===h){d!==null&&(d=d.next={eventTime:v,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var _=t,x=l;switch(h=e,v=n,x.tag){case 1:if(_=x.payload,typeof _=="function"){f=_.call(v,f,h);break e}f=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=x.payload,h=typeof _=="function"?_.call(v,f,h):_,h==null)break e;f=ge({},f,h);break e;case 2:Zt=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,h=s.effects,h===null?s.effects=[l]:h.push(l))}else v={eventTime:v,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=v,a=f):d=d.next=v,o|=h;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;h=l,l=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(d===null&&(a=f),s.baseState=a,s.firstBaseUpdate=u,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);$n|=o,t.lanes=o,t.memoizedState=f}}function Dd(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(k(191,s));s.call(r)}}}var ni={},At=Sn(ni),Os=Sn(ni),js=Sn(ni);function An(t){if(t===ni)throw Error(k(174));return t}function Ku(t,e){switch(ie(js,e),ie(Os,t),ie(At,ni),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:pa(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=pa(e,t)}ae(At),ie(At,e)}function Rr(){ae(At),ae(Os),ae(js)}function Pp(t){An(js.current);var e=An(At.current),n=pa(e,t.type);e!==n&&(ie(Os,t),ie(At,n))}function qu(t){Os.current===t&&(ae(At),ae(Os))}var pe=Sn(0);function fo(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Al=[];function Xu(){for(var t=0;t<Al.length;t++)Al[t]._workInProgressVersionPrimary=null;Al.length=0}var Hi=Kt.ReactCurrentDispatcher,Ml=Kt.ReactCurrentBatchConfig,zn=0,me=null,Ce=null,Ie=null,ho=!1,ps=!1,Ds=0,Xv=0;function De(){throw Error(k(321))}function Ju(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!St(t[n],e[n]))return!1;return!0}function Zu(t,e,n,r,s,i){if(zn=i,me=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Hi.current=t===null||t.memoizedState===null?ty:ny,t=n(r,s),ps){i=0;do{if(ps=!1,Ds=0,25<=i)throw Error(k(301));i+=1,Ie=Ce=null,e.updateQueue=null,Hi.current=ry,t=n(r,s)}while(ps)}if(Hi.current=po,e=Ce!==null&&Ce.next!==null,zn=0,Ie=Ce=me=null,ho=!1,e)throw Error(k(300));return t}function ec(){var t=Ds!==0;return Ds=0,t}function It(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ie===null?me.memoizedState=Ie=t:Ie=Ie.next=t,Ie}function ft(){if(Ce===null){var t=me.alternate;t=t!==null?t.memoizedState:null}else t=Ce.next;var e=Ie===null?me.memoizedState:Ie.next;if(e!==null)Ie=e,Ce=t;else{if(t===null)throw Error(k(310));Ce=t,t={memoizedState:Ce.memoizedState,baseState:Ce.baseState,baseQueue:Ce.baseQueue,queue:Ce.queue,next:null},Ie===null?me.memoizedState=Ie=t:Ie=Ie.next=t}return Ie}function Ls(t,e){return typeof e=="function"?e(t):e}function Ol(t){var e=ft(),n=e.queue;if(n===null)throw Error(k(311));n.lastRenderedReducer=t;var r=Ce,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,a=null,u=i;do{var d=u.lane;if((zn&d)===d)a!==null&&(a=a.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};a===null?(l=a=f,o=r):a=a.next=f,me.lanes|=d,$n|=d}u=u.next}while(u!==null&&u!==i);a===null?o=r:a.next=l,St(r,e.memoizedState)||(Ye=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=a,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,me.lanes|=i,$n|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function jl(t){var e=ft(),n=e.queue;if(n===null)throw Error(k(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);St(i,e.memoizedState)||(Ye=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Ap(){}function Mp(t,e){var n=me,r=ft(),s=e(),i=!St(r.memoizedState,s);if(i&&(r.memoizedState=s,Ye=!0),r=r.queue,tc(Dp.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Ie!==null&&Ie.memoizedState.tag&1){if(n.flags|=2048,Fs(9,jp.bind(null,n,r,s,e),void 0,null),Re===null)throw Error(k(349));zn&30||Op(n,e,s)}return s}function Op(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=me.updateQueue,e===null?(e={lastEffect:null,stores:null},me.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function jp(t,e,n,r){e.value=n,e.getSnapshot=r,Lp(e)&&Fp(t)}function Dp(t,e,n){return n(function(){Lp(e)&&Fp(t)})}function Lp(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!St(t,n)}catch{return!0}}function Fp(t){var e=Vt(t,1);e!==null&&wt(e,t,1,-1)}function Ld(t){var e=It();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ls,lastRenderedState:t},e.queue=t,t=t.dispatch=ey.bind(null,me,t),[e.memoizedState,t]}function Fs(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=me.updateQueue,e===null?(e={lastEffect:null,stores:null},me.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function zp(){return ft().memoizedState}function Ui(t,e,n,r){var s=It();me.flags|=t,s.memoizedState=Fs(1|e,n,void 0,r===void 0?null:r)}function Bo(t,e,n,r){var s=ft();r=r===void 0?null:r;var i=void 0;if(Ce!==null){var o=Ce.memoizedState;if(i=o.destroy,r!==null&&Ju(r,o.deps)){s.memoizedState=Fs(e,n,i,r);return}}me.flags|=t,s.memoizedState=Fs(1|e,n,i,r)}function Fd(t,e){return Ui(8390656,8,t,e)}function tc(t,e){return Bo(2048,8,t,e)}function $p(t,e){return Bo(4,2,t,e)}function Wp(t,e){return Bo(4,4,t,e)}function Hp(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Up(t,e,n){return n=n!=null?n.concat([t]):null,Bo(4,4,Hp.bind(null,e,t),n)}function nc(){}function Bp(t,e){var n=ft();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ju(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Vp(t,e){var n=ft();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ju(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Gp(t,e,n){return zn&21?(St(n,e)||(n=Xh(),me.lanes|=n,$n|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ye=!0),t.memoizedState=n)}function Jv(t,e){var n=Z;Z=n!==0&&4>n?n:4,t(!0);var r=Ml.transition;Ml.transition={};try{t(!1),e()}finally{Z=n,Ml.transition=r}}function Yp(){return ft().memoizedState}function Zv(t,e,n){var r=dn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Qp(t))Kp(e,n);else if(n=bp(t,e,n,r),n!==null){var s=Ue();wt(n,t,r,s),qp(n,e,r)}}function ey(t,e,n){var r=dn(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Qp(t))Kp(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,St(l,o)){var a=e.interleaved;a===null?(s.next=s,Yu(e)):(s.next=a.next,a.next=s),e.interleaved=s;return}}catch{}finally{}n=bp(t,e,s,r),n!==null&&(s=Ue(),wt(n,t,r,s),qp(n,e,r))}}function Qp(t){var e=t.alternate;return t===me||e!==null&&e===me}function Kp(t,e){ps=ho=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function qp(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Mu(t,n)}}var po={readContext:dt,useCallback:De,useContext:De,useEffect:De,useImperativeHandle:De,useInsertionEffect:De,useLayoutEffect:De,useMemo:De,useReducer:De,useRef:De,useState:De,useDebugValue:De,useDeferredValue:De,useTransition:De,useMutableSource:De,useSyncExternalStore:De,useId:De,unstable_isNewReconciler:!1},ty={readContext:dt,useCallback:function(t,e){return It().memoizedState=[t,e===void 0?null:e],t},useContext:dt,useEffect:Fd,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ui(4194308,4,Hp.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ui(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ui(4,2,t,e)},useMemo:function(t,e){var n=It();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=It();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Zv.bind(null,me,t),[r.memoizedState,t]},useRef:function(t){var e=It();return t={current:t},e.memoizedState=t},useState:Ld,useDebugValue:nc,useDeferredValue:function(t){return It().memoizedState=t},useTransition:function(){var t=Ld(!1),e=t[0];return t=Jv.bind(null,t[1]),It().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=me,s=It();if(ce){if(n===void 0)throw Error(k(407));n=n()}else{if(n=e(),Re===null)throw Error(k(349));zn&30||Op(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Fd(Dp.bind(null,r,i,t),[t]),r.flags|=2048,Fs(9,jp.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=It(),e=Re.identifierPrefix;if(ce){var n=zt,r=Ft;n=(r&~(1<<32-xt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ds++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Xv++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},ny={readContext:dt,useCallback:Bp,useContext:dt,useEffect:tc,useImperativeHandle:Up,useInsertionEffect:$p,useLayoutEffect:Wp,useMemo:Vp,useReducer:Ol,useRef:zp,useState:function(){return Ol(Ls)},useDebugValue:nc,useDeferredValue:function(t){var e=ft();return Gp(e,Ce.memoizedState,t)},useTransition:function(){var t=Ol(Ls)[0],e=ft().memoizedState;return[t,e]},useMutableSource:Ap,useSyncExternalStore:Mp,useId:Yp,unstable_isNewReconciler:!1},ry={readContext:dt,useCallback:Bp,useContext:dt,useEffect:tc,useImperativeHandle:Up,useInsertionEffect:$p,useLayoutEffect:Wp,useMemo:Vp,useReducer:jl,useRef:zp,useState:function(){return jl(Ls)},useDebugValue:nc,useDeferredValue:function(t){var e=ft();return Ce===null?e.memoizedState=t:Gp(e,Ce.memoizedState,t)},useTransition:function(){var t=jl(Ls)[0],e=ft().memoizedState;return[t,e]},useMutableSource:Ap,useSyncExternalStore:Mp,useId:Yp,unstable_isNewReconciler:!1};function mt(t,e){if(t&&t.defaultProps){e=ge({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function ja(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ge({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Vo={isMounted:function(t){return(t=t._reactInternals)?qn(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ue(),s=dn(t),i=Wt(r,s);i.payload=e,n!=null&&(i.callback=n),e=un(t,i,s),e!==null&&(wt(e,t,s,r),Wi(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ue(),s=dn(t),i=Wt(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=un(t,i,s),e!==null&&(wt(e,t,s,r),Wi(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ue(),r=dn(t),s=Wt(n,r);s.tag=2,e!=null&&(s.callback=e),e=un(t,s,r),e!==null&&(wt(e,t,r,n),Wi(e,t,r))}};function zd(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Rs(n,r)||!Rs(s,i):!0}function Xp(t,e,n){var r=!1,s=yn,i=e.contextType;return typeof i=="object"&&i!==null?i=dt(i):(s=qe(e)?Ln:ze.current,r=e.contextTypes,i=(r=r!=null)?Tr(t,s):yn),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Vo,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function $d(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Vo.enqueueReplaceState(e,e.state,null)}function Da(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Qu(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=dt(i):(i=qe(e)?Ln:ze.current,s.context=Tr(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(ja(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Vo.enqueueReplaceState(s,s.state,null),co(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Pr(t,e){try{var n="",r=e;do n+=P0(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Dl(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function La(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var sy=typeof WeakMap=="function"?WeakMap:Map;function Jp(t,e,n){n=Wt(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){go||(go=!0,Ya=r),La(t,e)},n}function Zp(t,e,n){n=Wt(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){La(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){La(t,e),typeof r!="function"&&(cn===null?cn=new Set([this]):cn.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Wd(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new sy;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=yy.bind(null,t,e,n),e.then(t,t))}function Hd(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Ud(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Wt(-1,1),e.tag=2,un(n,e,1))),n.lanes|=1),t)}var iy=Kt.ReactCurrentOwner,Ye=!1;function We(t,e,n,r){e.child=t===null?Ip(e,null,n,r):br(e,t.child,n,r)}function Bd(t,e,n,r,s){n=n.render;var i=e.ref;return wr(e,s),r=Zu(t,e,n,r,i,s),n=ec(),t!==null&&!Ye?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Gt(t,e,s)):(ce&&n&&Wu(e),e.flags|=1,We(t,e,r,s),e.child)}function Vd(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!cc(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,em(t,e,i,r,s)):(t=Yi(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Rs,n(o,r)&&t.ref===e.ref)return Gt(t,e,s)}return e.flags|=1,t=fn(i,r),t.ref=e.ref,t.return=e,e.child=t}function em(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Rs(i,r)&&t.ref===e.ref)if(Ye=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Ye=!0);else return e.lanes=t.lanes,Gt(t,e,s)}return Fa(t,e,n,r,s)}function tm(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ie(pr,Ze),Ze|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ie(pr,Ze),Ze|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,ie(pr,Ze),Ze|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,ie(pr,Ze),Ze|=r;return We(t,e,s,n),e.child}function nm(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Fa(t,e,n,r,s){var i=qe(n)?Ln:ze.current;return i=Tr(e,i),wr(e,s),n=Zu(t,e,n,r,i,s),r=ec(),t!==null&&!Ye?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Gt(t,e,s)):(ce&&r&&Wu(e),e.flags|=1,We(t,e,n,s),e.child)}function Gd(t,e,n,r,s){if(qe(n)){var i=!0;io(e)}else i=!1;if(wr(e,s),e.stateNode===null)Bi(t,e),Xp(e,n,r),Da(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var a=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=dt(u):(u=qe(n)?Ln:ze.current,u=Tr(e,u));var d=n.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||a!==u)&&$d(e,o,r,u),Zt=!1;var h=e.memoizedState;o.state=h,co(e,r,o,s),a=e.memoizedState,l!==r||h!==a||Ke.current||Zt?(typeof d=="function"&&(ja(e,n,d,r),a=e.memoizedState),(l=Zt||zd(e,n,l,r,h,a,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=a),o.props=r,o.state=a,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Rp(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:mt(e.type,l),o.props=u,f=e.pendingProps,h=o.context,a=n.contextType,typeof a=="object"&&a!==null?a=dt(a):(a=qe(n)?Ln:ze.current,a=Tr(e,a));var v=n.getDerivedStateFromProps;(d=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||h!==a)&&$d(e,o,r,a),Zt=!1,h=e.memoizedState,o.state=h,co(e,r,o,s);var _=e.memoizedState;l!==f||h!==_||Ke.current||Zt?(typeof v=="function"&&(ja(e,n,v,r),_=e.memoizedState),(u=Zt||zd(e,n,u,r,h,_,a)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,_,a),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,_,a)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=_),o.props=r,o.state=_,o.context=a,r=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return za(t,e,n,r,i,s)}function za(t,e,n,r,s,i){nm(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Pd(e,n,!1),Gt(t,e,i);r=e.stateNode,iy.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=br(e,t.child,null,i),e.child=br(e,null,l,i)):We(t,e,l,i),e.memoizedState=r.state,s&&Pd(e,n,!0),e.child}function rm(t){var e=t.stateNode;e.pendingContext?Rd(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Rd(t,e.context,!1),Ku(t,e.containerInfo)}function Yd(t,e,n,r,s){return Ir(),Uu(s),e.flags|=256,We(t,e,n,r),e.child}var $a={dehydrated:null,treeContext:null,retryLane:0};function Wa(t){return{baseLanes:t,cachePool:null,transitions:null}}function sm(t,e,n){var r=e.pendingProps,s=pe.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ie(pe,s&1),t===null)return Ma(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Qo(o,r,0,null),t=Dn(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Wa(n),e.memoizedState=$a,t):rc(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return oy(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var a={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=a,e.deletions=null):(r=fn(s,a),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=fn(l,i):(i=Dn(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Wa(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=$a,r}return i=t.child,t=i.sibling,r=fn(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function rc(t,e){return e=Qo({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ti(t,e,n,r){return r!==null&&Uu(r),br(e,t.child,null,n),t=rc(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function oy(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Dl(Error(k(422))),Ti(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Qo({mode:"visible",children:r.children},s,0,null),i=Dn(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&br(e,t.child,null,o),e.child.memoizedState=Wa(o),e.memoizedState=$a,i);if(!(e.mode&1))return Ti(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(k(419)),r=Dl(i,r,void 0),Ti(t,e,o,r)}if(l=(o&t.childLanes)!==0,Ye||l){if(r=Re,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Vt(t,s),wt(r,t,s,-1))}return uc(),r=Dl(Error(k(421))),Ti(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=_y.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,et=an(s.nextSibling),tt=e,ce=!0,vt=null,t!==null&&(ot[lt++]=Ft,ot[lt++]=zt,ot[lt++]=Fn,Ft=t.id,zt=t.overflow,Fn=e),e=rc(e,r.children),e.flags|=4096,e)}function Qd(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Oa(t.return,e,n)}function Ll(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function im(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(We(t,e,r.children,n),r=pe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Qd(t,n,e);else if(t.tag===19)Qd(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ie(pe,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&fo(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Ll(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&fo(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Ll(e,!0,n,null,i);break;case"together":Ll(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Bi(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Gt(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),$n|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(k(153));if(e.child!==null){for(t=e.child,n=fn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=fn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function ly(t,e,n){switch(e.tag){case 3:rm(e),Ir();break;case 5:Pp(e);break;case 1:qe(e.type)&&io(e);break;case 4:Ku(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;ie(ao,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ie(pe,pe.current&1),e.flags|=128,null):n&e.child.childLanes?sm(t,e,n):(ie(pe,pe.current&1),t=Gt(t,e,n),t!==null?t.sibling:null);ie(pe,pe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return im(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ie(pe,pe.current),r)break;return null;case 22:case 23:return e.lanes=0,tm(t,e,n)}return Gt(t,e,n)}var om,Ha,lm,am;om=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ha=function(){};lm=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,An(At.current);var i=null;switch(n){case"input":s=ca(t,s),r=ca(t,r),i=[];break;case"select":s=ge({},s,{value:void 0}),r=ge({},r,{value:void 0}),i=[];break;case"textarea":s=ha(t,s),r=ha(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ro)}ma(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ss.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var a=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&a!==l&&(a!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||a&&a.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in a)a.hasOwnProperty(o)&&l[o]!==a[o]&&(n||(n={}),n[o]=a[o])}else n||(i||(i=[]),i.push(u,n)),n=a;else u==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(i=i||[]).push(u,a)):u==="children"?typeof a!="string"&&typeof a!="number"||(i=i||[]).push(u,""+a):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ss.hasOwnProperty(u)?(a!=null&&u==="onScroll"&&oe("scroll",t),i||l===a||(i=[])):(i=i||[]).push(u,a))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};am=function(t,e,n,r){n!==r&&(e.flags|=4)};function Jr(t,e){if(!ce)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Le(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function ay(t,e,n){var r=e.pendingProps;switch(Hu(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Le(e),null;case 1:return qe(e.type)&&so(),Le(e),null;case 3:return r=e.stateNode,Rr(),ae(Ke),ae(ze),Xu(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ni(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,vt!==null&&(qa(vt),vt=null))),Ha(t,e),Le(e),null;case 5:qu(e);var s=An(js.current);if(n=e.type,t!==null&&e.stateNode!=null)lm(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(k(166));return Le(e),null}if(t=An(At.current),Ni(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[bt]=e,r[Ms]=i,t=(e.mode&1)!==0,n){case"dialog":oe("cancel",r),oe("close",r);break;case"iframe":case"object":case"embed":oe("load",r);break;case"video":case"audio":for(s=0;s<ls.length;s++)oe(ls[s],r);break;case"source":oe("error",r);break;case"img":case"image":case"link":oe("error",r),oe("load",r);break;case"details":oe("toggle",r);break;case"input":rd(r,i),oe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},oe("invalid",r);break;case"textarea":id(r,i),oe("invalid",r)}ma(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Ci(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Ci(r.textContent,l,t),s=["children",""+l]):Ss.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&oe("scroll",r)}switch(n){case"input":gi(r),sd(r,i,!0);break;case"textarea":gi(r),od(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=ro)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Dh(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[bt]=e,t[Ms]=r,om(t,e,!1,!1),e.stateNode=t;e:{switch(o=ga(n,r),n){case"dialog":oe("cancel",t),oe("close",t),s=r;break;case"iframe":case"object":case"embed":oe("load",t),s=r;break;case"video":case"audio":for(s=0;s<ls.length;s++)oe(ls[s],t);s=r;break;case"source":oe("error",t),s=r;break;case"img":case"image":case"link":oe("error",t),oe("load",t),s=r;break;case"details":oe("toggle",t),s=r;break;case"input":rd(t,r),s=ca(t,r),oe("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=ge({},r,{value:void 0}),oe("invalid",t);break;case"textarea":id(t,r),s=ha(t,r),oe("invalid",t);break;default:s=r}ma(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var a=l[i];i==="style"?zh(t,a):i==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&Lh(t,a)):i==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&Cs(t,a):typeof a=="number"&&Cs(t,""+a):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ss.hasOwnProperty(i)?a!=null&&i==="onScroll"&&oe("scroll",t):a!=null&&Tu(t,i,a,o))}switch(n){case"input":gi(t),sd(t,r,!1);break;case"textarea":gi(t),od(t);break;case"option":r.value!=null&&t.setAttribute("value",""+vn(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?vr(t,!!r.multiple,i,!1):r.defaultValue!=null&&vr(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=ro)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Le(e),null;case 6:if(t&&e.stateNode!=null)am(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(k(166));if(n=An(js.current),An(At.current),Ni(e)){if(r=e.stateNode,n=e.memoizedProps,r[bt]=e,(i=r.nodeValue!==n)&&(t=tt,t!==null))switch(t.tag){case 3:Ci(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ci(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[bt]=e,e.stateNode=r}return Le(e),null;case 13:if(ae(pe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ce&&et!==null&&e.mode&1&&!(e.flags&128))kp(),Ir(),e.flags|=98560,i=!1;else if(i=Ni(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(k(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(k(317));i[bt]=e}else Ir(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Le(e),i=!1}else vt!==null&&(qa(vt),vt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||pe.current&1?ke===0&&(ke=3):uc())),e.updateQueue!==null&&(e.flags|=4),Le(e),null);case 4:return Rr(),Ha(t,e),t===null&&Ps(e.stateNode.containerInfo),Le(e),null;case 10:return Gu(e.type._context),Le(e),null;case 17:return qe(e.type)&&so(),Le(e),null;case 19:if(ae(pe),i=e.memoizedState,i===null)return Le(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Jr(i,!1);else{if(ke!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=fo(t),o!==null){for(e.flags|=128,Jr(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ie(pe,pe.current&1|2),e.child}t=t.sibling}i.tail!==null&&_e()>Ar&&(e.flags|=128,r=!0,Jr(i,!1),e.lanes=4194304)}else{if(!r)if(t=fo(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Jr(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ce)return Le(e),null}else 2*_e()-i.renderingStartTime>Ar&&n!==1073741824&&(e.flags|=128,r=!0,Jr(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=_e(),e.sibling=null,n=pe.current,ie(pe,r?n&1|2:n&1),e):(Le(e),null);case 22:case 23:return ac(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ze&1073741824&&(Le(e),e.subtreeFlags&6&&(e.flags|=8192)):Le(e),null;case 24:return null;case 25:return null}throw Error(k(156,e.tag))}function uy(t,e){switch(Hu(e),e.tag){case 1:return qe(e.type)&&so(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Rr(),ae(Ke),ae(ze),Xu(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return qu(e),null;case 13:if(ae(pe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(k(340));Ir()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ae(pe),null;case 4:return Rr(),null;case 10:return Gu(e.type._context),null;case 22:case 23:return ac(),null;case 24:return null;default:return null}}var Ii=!1,Fe=!1,cy=typeof WeakSet=="function"?WeakSet:Set,M=null;function hr(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ve(t,e,r)}else n.current=null}function Ua(t,e,n){try{n()}catch(r){ve(t,e,r)}}var Kd=!1;function dy(t,e){if(ka=eo,t=hp(),$u(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,a=-1,u=0,d=0,f=t,h=null;t:for(;;){for(var v;f!==n||s!==0&&f.nodeType!==3||(l=o+s),f!==i||r!==0&&f.nodeType!==3||(a=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(v=f.firstChild)!==null;)h=f,f=v;for(;;){if(f===t)break t;if(h===n&&++u===s&&(l=o),h===i&&++d===r&&(a=o),(v=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=v}n=l===-1||a===-1?null:{start:l,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ta={focusedElem:t,selectionRange:n},eo=!1,M=e;M!==null;)if(e=M,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,M=t;else for(;M!==null;){e=M;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var x=_.memoizedProps,N=_.memoizedState,m=e.stateNode,p=m.getSnapshotBeforeUpdate(e.elementType===e.type?x:mt(e.type,x),N);m.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(k(163))}}catch(g){ve(e,e.return,g)}if(t=e.sibling,t!==null){t.return=e.return,M=t;break}M=e.return}return _=Kd,Kd=!1,_}function ms(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Ua(e,n,i)}s=s.next}while(s!==r)}}function Go(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Ba(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function um(t){var e=t.alternate;e!==null&&(t.alternate=null,um(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[bt],delete e[Ms],delete e[Ra],delete e[Yv],delete e[Qv])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function cm(t){return t.tag===5||t.tag===3||t.tag===4}function qd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||cm(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Va(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ro));else if(r!==4&&(t=t.child,t!==null))for(Va(t,e,n),t=t.sibling;t!==null;)Va(t,e,n),t=t.sibling}function Ga(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Ga(t,e,n),t=t.sibling;t!==null;)Ga(t,e,n),t=t.sibling}var Pe=null,gt=!1;function qt(t,e,n){for(n=n.child;n!==null;)dm(t,e,n),n=n.sibling}function dm(t,e,n){if(Pt&&typeof Pt.onCommitFiberUnmount=="function")try{Pt.onCommitFiberUnmount(Fo,n)}catch{}switch(n.tag){case 5:Fe||hr(n,e);case 6:var r=Pe,s=gt;Pe=null,qt(t,e,n),Pe=r,gt=s,Pe!==null&&(gt?(t=Pe,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Pe.removeChild(n.stateNode));break;case 18:Pe!==null&&(gt?(t=Pe,n=n.stateNode,t.nodeType===8?Rl(t.parentNode,n):t.nodeType===1&&Rl(t,n),Is(t)):Rl(Pe,n.stateNode));break;case 4:r=Pe,s=gt,Pe=n.stateNode.containerInfo,gt=!0,qt(t,e,n),Pe=r,gt=s;break;case 0:case 11:case 14:case 15:if(!Fe&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Ua(n,e,o),s=s.next}while(s!==r)}qt(t,e,n);break;case 1:if(!Fe&&(hr(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){ve(n,e,l)}qt(t,e,n);break;case 21:qt(t,e,n);break;case 22:n.mode&1?(Fe=(r=Fe)||n.memoizedState!==null,qt(t,e,n),Fe=r):qt(t,e,n);break;default:qt(t,e,n)}}function Xd(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new cy),e.forEach(function(r){var s=xy.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function pt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Pe=l.stateNode,gt=!1;break e;case 3:Pe=l.stateNode.containerInfo,gt=!0;break e;case 4:Pe=l.stateNode.containerInfo,gt=!0;break e}l=l.return}if(Pe===null)throw Error(k(160));dm(i,o,s),Pe=null,gt=!1;var a=s.alternate;a!==null&&(a.return=null),s.return=null}catch(u){ve(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)fm(e,t),e=e.sibling}function fm(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(pt(e,t),Tt(t),r&4){try{ms(3,t,t.return),Go(3,t)}catch(x){ve(t,t.return,x)}try{ms(5,t,t.return)}catch(x){ve(t,t.return,x)}}break;case 1:pt(e,t),Tt(t),r&512&&n!==null&&hr(n,n.return);break;case 5:if(pt(e,t),Tt(t),r&512&&n!==null&&hr(n,n.return),t.flags&32){var s=t.stateNode;try{Cs(s,"")}catch(x){ve(t,t.return,x)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,a=t.updateQueue;if(t.updateQueue=null,a!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Oh(s,i),ga(l,o);var u=ga(l,i);for(o=0;o<a.length;o+=2){var d=a[o],f=a[o+1];d==="style"?zh(s,f):d==="dangerouslySetInnerHTML"?Lh(s,f):d==="children"?Cs(s,f):Tu(s,d,f,u)}switch(l){case"input":da(s,i);break;case"textarea":jh(s,i);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var v=i.value;v!=null?vr(s,!!i.multiple,v,!1):h!==!!i.multiple&&(i.defaultValue!=null?vr(s,!!i.multiple,i.defaultValue,!0):vr(s,!!i.multiple,i.multiple?[]:"",!1))}s[Ms]=i}catch(x){ve(t,t.return,x)}}break;case 6:if(pt(e,t),Tt(t),r&4){if(t.stateNode===null)throw Error(k(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(x){ve(t,t.return,x)}}break;case 3:if(pt(e,t),Tt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Is(e.containerInfo)}catch(x){ve(t,t.return,x)}break;case 4:pt(e,t),Tt(t);break;case 13:pt(e,t),Tt(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(oc=_e())),r&4&&Xd(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Fe=(u=Fe)||d,pt(e,t),Fe=u):pt(e,t),Tt(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(M=t,d=t.child;d!==null;){for(f=M=d;M!==null;){switch(h=M,v=h.child,h.tag){case 0:case 11:case 14:case 15:ms(4,h,h.return);break;case 1:hr(h,h.return);var _=h.stateNode;if(typeof _.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(x){ve(r,n,x)}}break;case 5:hr(h,h.return);break;case 22:if(h.memoizedState!==null){Zd(f);continue}}v!==null?(v.return=h,M=v):Zd(f)}d=d.sibling}e:for(d=null,f=t;;){if(f.tag===5){if(d===null){d=f;try{s=f.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,a=f.memoizedProps.style,o=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=Fh("display",o))}catch(x){ve(t,t.return,x)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(x){ve(t,t.return,x)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:pt(e,t),Tt(t),r&4&&Xd(t);break;case 21:break;default:pt(e,t),Tt(t)}}function Tt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(cm(n)){var r=n;break e}n=n.return}throw Error(k(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Cs(s,""),r.flags&=-33);var i=qd(t);Ga(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=qd(t);Va(t,l,o);break;default:throw Error(k(161))}}catch(a){ve(t,t.return,a)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function fy(t,e,n){M=t,hm(t)}function hm(t,e,n){for(var r=(t.mode&1)!==0;M!==null;){var s=M,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Ii;if(!o){var l=s.alternate,a=l!==null&&l.memoizedState!==null||Fe;l=Ii;var u=Fe;if(Ii=o,(Fe=a)&&!u)for(M=s;M!==null;)o=M,a=o.child,o.tag===22&&o.memoizedState!==null?ef(s):a!==null?(a.return=o,M=a):ef(s);for(;i!==null;)M=i,hm(i),i=i.sibling;M=s,Ii=l,Fe=u}Jd(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,M=i):Jd(t)}}function Jd(t){for(;M!==null;){var e=M;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Fe||Go(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Fe)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:mt(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Dd(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Dd(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Is(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(k(163))}Fe||e.flags&512&&Ba(e)}catch(h){ve(e,e.return,h)}}if(e===t){M=null;break}if(n=e.sibling,n!==null){n.return=e.return,M=n;break}M=e.return}}function Zd(t){for(;M!==null;){var e=M;if(e===t){M=null;break}var n=e.sibling;if(n!==null){n.return=e.return,M=n;break}M=e.return}}function ef(t){for(;M!==null;){var e=M;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Go(4,e)}catch(a){ve(e,n,a)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(a){ve(e,s,a)}}var i=e.return;try{Ba(e)}catch(a){ve(e,i,a)}break;case 5:var o=e.return;try{Ba(e)}catch(a){ve(e,o,a)}}}catch(a){ve(e,e.return,a)}if(e===t){M=null;break}var l=e.sibling;if(l!==null){l.return=e.return,M=l;break}M=e.return}}var hy=Math.ceil,mo=Kt.ReactCurrentDispatcher,sc=Kt.ReactCurrentOwner,ct=Kt.ReactCurrentBatchConfig,X=0,Re=null,Ee=null,Me=0,Ze=0,pr=Sn(0),ke=0,zs=null,$n=0,Yo=0,ic=0,gs=null,Ge=null,oc=0,Ar=1/0,jt=null,go=!1,Ya=null,cn=null,bi=!1,rn=null,vo=0,vs=0,Qa=null,Vi=-1,Gi=0;function Ue(){return X&6?_e():Vi!==-1?Vi:Vi=_e()}function dn(t){return t.mode&1?X&2&&Me!==0?Me&-Me:qv.transition!==null?(Gi===0&&(Gi=Xh()),Gi):(t=Z,t!==0||(t=window.event,t=t===void 0?16:sp(t.type)),t):1}function wt(t,e,n,r){if(50<vs)throw vs=0,Qa=null,Error(k(185));Zs(t,n,r),(!(X&2)||t!==Re)&&(t===Re&&(!(X&2)&&(Yo|=n),ke===4&&tn(t,Me)),Xe(t,r),n===1&&X===0&&!(e.mode&1)&&(Ar=_e()+500,Uo&&Cn()))}function Xe(t,e){var n=t.callbackNode;q0(t,e);var r=Zi(t,t===Re?Me:0);if(r===0)n!==null&&ud(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&ud(n),e===1)t.tag===0?Kv(tf.bind(null,t)):Sp(tf.bind(null,t)),Vv(function(){!(X&6)&&Cn()}),n=null;else{switch(Jh(r)){case 1:n=Au;break;case 4:n=Kh;break;case 16:n=Ji;break;case 536870912:n=qh;break;default:n=Ji}n=wm(n,pm.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function pm(t,e){if(Vi=-1,Gi=0,X&6)throw Error(k(327));var n=t.callbackNode;if(Er()&&t.callbackNode!==n)return null;var r=Zi(t,t===Re?Me:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=yo(t,r);else{e=r;var s=X;X|=2;var i=gm();(Re!==t||Me!==e)&&(jt=null,Ar=_e()+500,jn(t,e));do try{gy();break}catch(l){mm(t,l)}while(!0);Vu(),mo.current=i,X=s,Ee!==null?e=0:(Re=null,Me=0,e=ke)}if(e!==0){if(e===2&&(s=wa(t),s!==0&&(r=s,e=Ka(t,s))),e===1)throw n=zs,jn(t,0),tn(t,r),Xe(t,_e()),n;if(e===6)tn(t,r);else{if(s=t.current.alternate,!(r&30)&&!py(s)&&(e=yo(t,r),e===2&&(i=wa(t),i!==0&&(r=i,e=Ka(t,i))),e===1))throw n=zs,jn(t,0),tn(t,r),Xe(t,_e()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(k(345));case 2:Tn(t,Ge,jt);break;case 3:if(tn(t,r),(r&130023424)===r&&(e=oc+500-_e(),10<e)){if(Zi(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Ue(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=ba(Tn.bind(null,t,Ge,jt),e);break}Tn(t,Ge,jt);break;case 4:if(tn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-xt(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=_e()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*hy(r/1960))-r,10<r){t.timeoutHandle=ba(Tn.bind(null,t,Ge,jt),r);break}Tn(t,Ge,jt);break;case 5:Tn(t,Ge,jt);break;default:throw Error(k(329))}}}return Xe(t,_e()),t.callbackNode===n?pm.bind(null,t):null}function Ka(t,e){var n=gs;return t.current.memoizedState.isDehydrated&&(jn(t,e).flags|=256),t=yo(t,e),t!==2&&(e=Ge,Ge=n,e!==null&&qa(e)),t}function qa(t){Ge===null?Ge=t:Ge.push.apply(Ge,t)}function py(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!St(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function tn(t,e){for(e&=~ic,e&=~Yo,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-xt(e),r=1<<n;t[n]=-1,e&=~r}}function tf(t){if(X&6)throw Error(k(327));Er();var e=Zi(t,0);if(!(e&1))return Xe(t,_e()),null;var n=yo(t,e);if(t.tag!==0&&n===2){var r=wa(t);r!==0&&(e=r,n=Ka(t,r))}if(n===1)throw n=zs,jn(t,0),tn(t,e),Xe(t,_e()),n;if(n===6)throw Error(k(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Tn(t,Ge,jt),Xe(t,_e()),null}function lc(t,e){var n=X;X|=1;try{return t(e)}finally{X=n,X===0&&(Ar=_e()+500,Uo&&Cn())}}function Wn(t){rn!==null&&rn.tag===0&&!(X&6)&&Er();var e=X;X|=1;var n=ct.transition,r=Z;try{if(ct.transition=null,Z=1,t)return t()}finally{Z=r,ct.transition=n,X=e,!(X&6)&&Cn()}}function ac(){Ze=pr.current,ae(pr)}function jn(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Bv(n)),Ee!==null)for(n=Ee.return;n!==null;){var r=n;switch(Hu(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&so();break;case 3:Rr(),ae(Ke),ae(ze),Xu();break;case 5:qu(r);break;case 4:Rr();break;case 13:ae(pe);break;case 19:ae(pe);break;case 10:Gu(r.type._context);break;case 22:case 23:ac()}n=n.return}if(Re=t,Ee=t=fn(t.current,null),Me=Ze=e,ke=0,zs=null,ic=Yo=$n=0,Ge=gs=null,Pn!==null){for(e=0;e<Pn.length;e++)if(n=Pn[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Pn=null}return t}function mm(t,e){do{var n=Ee;try{if(Vu(),Hi.current=po,ho){for(var r=me.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}ho=!1}if(zn=0,Ie=Ce=me=null,ps=!1,Ds=0,sc.current=null,n===null||n.return===null){ke=1,zs=e,Ee=null;break}e:{var i=t,o=n.return,l=n,a=e;if(e=Me,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var u=a,d=l,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var v=Hd(o);if(v!==null){v.flags&=-257,Ud(v,o,l,i,e),v.mode&1&&Wd(i,u,e),e=v,a=u;var _=e.updateQueue;if(_===null){var x=new Set;x.add(a),e.updateQueue=x}else _.add(a);break e}else{if(!(e&1)){Wd(i,u,e),uc();break e}a=Error(k(426))}}else if(ce&&l.mode&1){var N=Hd(o);if(N!==null){!(N.flags&65536)&&(N.flags|=256),Ud(N,o,l,i,e),Uu(Pr(a,l));break e}}i=a=Pr(a,l),ke!==4&&(ke=2),gs===null?gs=[i]:gs.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var m=Jp(i,a,e);jd(i,m);break e;case 1:l=a;var p=i.type,y=i.stateNode;if(!(i.flags&128)&&(typeof p.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(cn===null||!cn.has(y)))){i.flags|=65536,e&=-e,i.lanes|=e;var g=Zp(i,l,e);jd(i,g);break e}}i=i.return}while(i!==null)}ym(n)}catch(E){e=E,Ee===n&&n!==null&&(Ee=n=n.return);continue}break}while(!0)}function gm(){var t=mo.current;return mo.current=po,t===null?po:t}function uc(){(ke===0||ke===3||ke===2)&&(ke=4),Re===null||!($n&268435455)&&!(Yo&268435455)||tn(Re,Me)}function yo(t,e){var n=X;X|=2;var r=gm();(Re!==t||Me!==e)&&(jt=null,jn(t,e));do try{my();break}catch(s){mm(t,s)}while(!0);if(Vu(),X=n,mo.current=r,Ee!==null)throw Error(k(261));return Re=null,Me=0,ke}function my(){for(;Ee!==null;)vm(Ee)}function gy(){for(;Ee!==null&&!W0();)vm(Ee)}function vm(t){var e=xm(t.alternate,t,Ze);t.memoizedProps=t.pendingProps,e===null?ym(t):Ee=e,sc.current=null}function ym(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=uy(n,e),n!==null){n.flags&=32767,Ee=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ke=6,Ee=null;return}}else if(n=ay(n,e,Ze),n!==null){Ee=n;return}if(e=e.sibling,e!==null){Ee=e;return}Ee=e=t}while(e!==null);ke===0&&(ke=5)}function Tn(t,e,n){var r=Z,s=ct.transition;try{ct.transition=null,Z=1,vy(t,e,n,r)}finally{ct.transition=s,Z=r}return null}function vy(t,e,n,r){do Er();while(rn!==null);if(X&6)throw Error(k(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(k(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(X0(t,i),t===Re&&(Ee=Re=null,Me=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||bi||(bi=!0,wm(Ji,function(){return Er(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=ct.transition,ct.transition=null;var o=Z;Z=1;var l=X;X|=4,sc.current=null,dy(t,n),fm(n,t),Lv(Ta),eo=!!ka,Ta=ka=null,t.current=n,fy(n),H0(),X=l,Z=o,ct.transition=i}else t.current=n;if(bi&&(bi=!1,rn=t,vo=s),i=t.pendingLanes,i===0&&(cn=null),V0(n.stateNode),Xe(t,_e()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(go)throw go=!1,t=Ya,Ya=null,t;return vo&1&&t.tag!==0&&Er(),i=t.pendingLanes,i&1?t===Qa?vs++:(vs=0,Qa=t):vs=0,Cn(),null}function Er(){if(rn!==null){var t=Jh(vo),e=ct.transition,n=Z;try{if(ct.transition=null,Z=16>t?16:t,rn===null)var r=!1;else{if(t=rn,rn=null,vo=0,X&6)throw Error(k(331));var s=X;for(X|=4,M=t.current;M!==null;){var i=M,o=i.child;if(M.flags&16){var l=i.deletions;if(l!==null){for(var a=0;a<l.length;a++){var u=l[a];for(M=u;M!==null;){var d=M;switch(d.tag){case 0:case 11:case 15:ms(8,d,i)}var f=d.child;if(f!==null)f.return=d,M=f;else for(;M!==null;){d=M;var h=d.sibling,v=d.return;if(um(d),d===u){M=null;break}if(h!==null){h.return=v,M=h;break}M=v}}}var _=i.alternate;if(_!==null){var x=_.child;if(x!==null){_.child=null;do{var N=x.sibling;x.sibling=null,x=N}while(x!==null)}}M=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,M=o;else e:for(;M!==null;){if(i=M,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ms(9,i,i.return)}var m=i.sibling;if(m!==null){m.return=i.return,M=m;break e}M=i.return}}var p=t.current;for(M=p;M!==null;){o=M;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,M=y;else e:for(o=p;M!==null;){if(l=M,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Go(9,l)}}catch(E){ve(l,l.return,E)}if(l===o){M=null;break e}var g=l.sibling;if(g!==null){g.return=l.return,M=g;break e}M=l.return}}if(X=s,Cn(),Pt&&typeof Pt.onPostCommitFiberRoot=="function")try{Pt.onPostCommitFiberRoot(Fo,t)}catch{}r=!0}return r}finally{Z=n,ct.transition=e}}return!1}function nf(t,e,n){e=Pr(n,e),e=Jp(t,e,1),t=un(t,e,1),e=Ue(),t!==null&&(Zs(t,1,e),Xe(t,e))}function ve(t,e,n){if(t.tag===3)nf(t,t,n);else for(;e!==null;){if(e.tag===3){nf(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(cn===null||!cn.has(r))){t=Pr(n,t),t=Zp(e,t,1),e=un(e,t,1),t=Ue(),e!==null&&(Zs(e,1,t),Xe(e,t));break}}e=e.return}}function yy(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ue(),t.pingedLanes|=t.suspendedLanes&n,Re===t&&(Me&n)===n&&(ke===4||ke===3&&(Me&130023424)===Me&&500>_e()-oc?jn(t,0):ic|=n),Xe(t,e)}function _m(t,e){e===0&&(t.mode&1?(e=_i,_i<<=1,!(_i&130023424)&&(_i=4194304)):e=1);var n=Ue();t=Vt(t,e),t!==null&&(Zs(t,e,n),Xe(t,n))}function _y(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),_m(t,n)}function xy(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(k(314))}r!==null&&r.delete(e),_m(t,n)}var xm;xm=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ke.current)Ye=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ye=!1,ly(t,e,n);Ye=!!(t.flags&131072)}else Ye=!1,ce&&e.flags&1048576&&Cp(e,lo,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Bi(t,e),t=e.pendingProps;var s=Tr(e,ze.current);wr(e,n),s=Zu(null,e,r,t,s,n);var i=ec();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,qe(r)?(i=!0,io(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Qu(e),s.updater=Vo,e.stateNode=s,s._reactInternals=e,Da(e,r,t,n),e=za(null,e,r,!0,i,n)):(e.tag=0,ce&&i&&Wu(e),We(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Bi(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=Ey(r),t=mt(r,t),s){case 0:e=Fa(null,e,r,t,n);break e;case 1:e=Gd(null,e,r,t,n);break e;case 11:e=Bd(null,e,r,t,n);break e;case 14:e=Vd(null,e,r,mt(r.type,t),n);break e}throw Error(k(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:mt(r,s),Fa(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:mt(r,s),Gd(t,e,r,s,n);case 3:e:{if(rm(e),t===null)throw Error(k(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Rp(t,e),co(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Pr(Error(k(423)),e),e=Yd(t,e,r,n,s);break e}else if(r!==s){s=Pr(Error(k(424)),e),e=Yd(t,e,r,n,s);break e}else for(et=an(e.stateNode.containerInfo.firstChild),tt=e,ce=!0,vt=null,n=Ip(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ir(),r===s){e=Gt(t,e,n);break e}We(t,e,r,n)}e=e.child}return e;case 5:return Pp(e),t===null&&Ma(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Ia(r,s)?o=null:i!==null&&Ia(r,i)&&(e.flags|=32),nm(t,e),We(t,e,o,n),e.child;case 6:return t===null&&Ma(e),null;case 13:return sm(t,e,n);case 4:return Ku(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=br(e,null,r,n):We(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:mt(r,s),Bd(t,e,r,s,n);case 7:return We(t,e,e.pendingProps,n),e.child;case 8:return We(t,e,e.pendingProps.children,n),e.child;case 12:return We(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,ie(ao,r._currentValue),r._currentValue=o,i!==null)if(St(i.value,o)){if(i.children===s.children&&!Ke.current){e=Gt(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var a=l.firstContext;a!==null;){if(a.context===r){if(i.tag===1){a=Wt(-1,n&-n),a.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?a.next=a:(a.next=d.next,d.next=a),u.pending=a}}i.lanes|=n,a=i.alternate,a!==null&&(a.lanes|=n),Oa(i.return,n,e),l.lanes|=n;break}a=a.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(k(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Oa(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}We(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,wr(e,n),s=dt(s),r=r(s),e.flags|=1,We(t,e,r,n),e.child;case 14:return r=e.type,s=mt(r,e.pendingProps),s=mt(r.type,s),Vd(t,e,r,s,n);case 15:return em(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:mt(r,s),Bi(t,e),e.tag=1,qe(r)?(t=!0,io(e)):t=!1,wr(e,n),Xp(e,r,s),Da(e,r,s,n),za(null,e,r,!0,t,n);case 19:return im(t,e,n);case 22:return tm(t,e,n)}throw Error(k(156,e.tag))};function wm(t,e){return Qh(t,e)}function wy(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function at(t,e,n,r){return new wy(t,e,n,r)}function cc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ey(t){if(typeof t=="function")return cc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===bu)return 11;if(t===Ru)return 14}return 2}function fn(t,e){var n=t.alternate;return n===null?(n=at(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Yi(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")cc(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case sr:return Dn(n.children,s,i,e);case Iu:o=8,s|=8;break;case oa:return t=at(12,n,e,s|2),t.elementType=oa,t.lanes=i,t;case la:return t=at(13,n,e,s),t.elementType=la,t.lanes=i,t;case aa:return t=at(19,n,e,s),t.elementType=aa,t.lanes=i,t;case Ph:return Qo(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case bh:o=10;break e;case Rh:o=9;break e;case bu:o=11;break e;case Ru:o=14;break e;case Jt:o=16,r=null;break e}throw Error(k(130,t==null?t:typeof t,""))}return e=at(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Dn(t,e,n,r){return t=at(7,t,r,e),t.lanes=n,t}function Qo(t,e,n,r){return t=at(22,t,r,e),t.elementType=Ph,t.lanes=n,t.stateNode={isHidden:!1},t}function Fl(t,e,n){return t=at(6,t,null,e),t.lanes=n,t}function zl(t,e,n){return e=at(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Sy(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=_l(0),this.expirationTimes=_l(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_l(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function dc(t,e,n,r,s,i,o,l,a){return t=new Sy(t,e,n,l,a),e===1?(e=1,i===!0&&(e|=8)):e=0,i=at(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Qu(i),t}function Cy(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:rr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Em(t){if(!t)return yn;t=t._reactInternals;e:{if(qn(t)!==t||t.tag!==1)throw Error(k(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(qe(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(k(171))}if(t.tag===1){var n=t.type;if(qe(n))return Ep(t,n,e)}return e}function Sm(t,e,n,r,s,i,o,l,a){return t=dc(n,r,!0,t,s,i,o,l,a),t.context=Em(null),n=t.current,r=Ue(),s=dn(n),i=Wt(r,s),i.callback=e??null,un(n,i,s),t.current.lanes=s,Zs(t,s,r),Xe(t,r),t}function Ko(t,e,n,r){var s=e.current,i=Ue(),o=dn(s);return n=Em(n),e.context===null?e.context=n:e.pendingContext=n,e=Wt(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=un(s,e,o),t!==null&&(wt(t,s,o,i),Wi(t,s,o)),o}function _o(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function rf(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function fc(t,e){rf(t,e),(t=t.alternate)&&rf(t,e)}function Ny(){return null}var Cm=typeof reportError=="function"?reportError:function(t){console.error(t)};function hc(t){this._internalRoot=t}qo.prototype.render=hc.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(k(409));Ko(t,e,null,null)};qo.prototype.unmount=hc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Wn(function(){Ko(null,t,null,null)}),e[Bt]=null}};function qo(t){this._internalRoot=t}qo.prototype.unstable_scheduleHydration=function(t){if(t){var e=tp();t={blockedOn:null,target:t,priority:e};for(var n=0;n<en.length&&e!==0&&e<en[n].priority;n++);en.splice(n,0,t),n===0&&rp(t)}};function pc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Xo(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function sf(){}function ky(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=_o(o);i.call(u)}}var o=Sm(e,r,t,0,null,!1,!1,"",sf);return t._reactRootContainer=o,t[Bt]=o.current,Ps(t.nodeType===8?t.parentNode:t),Wn(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=_o(a);l.call(u)}}var a=dc(t,0,!1,null,null,!1,!1,"",sf);return t._reactRootContainer=a,t[Bt]=a.current,Ps(t.nodeType===8?t.parentNode:t),Wn(function(){Ko(e,a,n,r)}),a}function Jo(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var a=_o(o);l.call(a)}}Ko(e,o,t,s)}else o=ky(n,e,t,s,r);return _o(o)}Zh=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=os(e.pendingLanes);n!==0&&(Mu(e,n|1),Xe(e,_e()),!(X&6)&&(Ar=_e()+500,Cn()))}break;case 13:Wn(function(){var r=Vt(t,1);if(r!==null){var s=Ue();wt(r,t,1,s)}}),fc(t,1)}};Ou=function(t){if(t.tag===13){var e=Vt(t,134217728);if(e!==null){var n=Ue();wt(e,t,134217728,n)}fc(t,134217728)}};ep=function(t){if(t.tag===13){var e=dn(t),n=Vt(t,e);if(n!==null){var r=Ue();wt(n,t,e,r)}fc(t,e)}};tp=function(){return Z};np=function(t,e){var n=Z;try{return Z=t,e()}finally{Z=n}};ya=function(t,e,n){switch(e){case"input":if(da(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Ho(r);if(!s)throw Error(k(90));Mh(r),da(r,s)}}}break;case"textarea":jh(t,n);break;case"select":e=n.value,e!=null&&vr(t,!!n.multiple,e,!1)}};Hh=lc;Uh=Wn;var Ty={usingClientEntryPoint:!1,Events:[ti,ar,Ho,$h,Wh,lc]},Zr={findFiberByHostInstance:Rn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Iy={bundleType:Zr.bundleType,version:Zr.version,rendererPackageName:Zr.rendererPackageName,rendererConfig:Zr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Kt.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Gh(t),t===null?null:t.stateNode},findFiberByHostInstance:Zr.findFiberByHostInstance||Ny,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ri=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ri.isDisabled&&Ri.supportsFiber)try{Fo=Ri.inject(Iy),Pt=Ri}catch{}}rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ty;rt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!pc(e))throw Error(k(200));return Cy(t,e,null,n)};rt.createRoot=function(t,e){if(!pc(t))throw Error(k(299));var n=!1,r="",s=Cm;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=dc(t,1,!1,null,null,n,!1,r,s),t[Bt]=e.current,Ps(t.nodeType===8?t.parentNode:t),new hc(e)};rt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(k(188)):(t=Object.keys(t).join(","),Error(k(268,t)));return t=Gh(e),t=t===null?null:t.stateNode,t};rt.flushSync=function(t){return Wn(t)};rt.hydrate=function(t,e,n){if(!Xo(e))throw Error(k(200));return Jo(null,t,e,!0,n)};rt.hydrateRoot=function(t,e,n){if(!pc(t))throw Error(k(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Cm;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Sm(e,null,t,1,n??null,s,!1,i,o),t[Bt]=e.current,Ps(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new qo(e)};rt.render=function(t,e,n){if(!Xo(e))throw Error(k(200));return Jo(null,t,e,!1,n)};rt.unmountComponentAtNode=function(t){if(!Xo(t))throw Error(k(40));return t._reactRootContainer?(Wn(function(){Jo(null,null,t,!1,function(){t._reactRootContainer=null,t[Bt]=null})}),!0):!1};rt.unstable_batchedUpdates=lc;rt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Xo(n))throw Error(k(200));if(t==null||t._reactInternals===void 0)throw Error(k(38));return Jo(t,e,n,!1,r)};rt.version="18.3.1-next-f1338f8080-20240426";function Nm(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Nm)}catch(t){console.error(t)}}Nm(),Nh.exports=rt;var by=Nh.exports,km,of=by;km=of.createRoot,of.hydrateRoot;var lf={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tm={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I=function(t,e){if(!t)throw Hr(e)},Hr=function(t){return new Error("Firebase Database ("+Tm.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Im=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Ry=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],a=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(a&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},mc={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,a=s+2<t.length,u=a?t[s+2]:0,d=i>>2,f=(i&3)<<4|l>>4;let h=(l&15)<<2|u>>6,v=u&63;a||(v=64,o||(h=64)),r.push(n[d],n[f],n[h],n[v])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Im(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Ry(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||u==null||f==null)throw new Py;const h=i<<2|l>>4;if(r.push(h),u!==64){const v=l<<4&240|u>>2;if(r.push(v),f!==64){const _=u<<6&192|f;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Py extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const bm=function(t){const e=Im(t);return mc.encodeByteArray(e,!0)},xo=function(t){return bm(t).replace(/\./g,"")},Xa=function(t){try{return mc.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ay(t){return Rm(void 0,t)}function Rm(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!My(n)||(t[n]=Rm(t[n],e[n]));return t}function My(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oy(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jy=()=>Oy().__FIREBASE_DEFAULTS__,Dy=()=>{if(typeof process>"u"||typeof lf>"u")return;const t=lf.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Ly=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Xa(t[1]);return e&&JSON.parse(e)},Pm=()=>{try{return jy()||Dy()||Ly()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Fy=t=>{var e,n;return(n=(e=Pm())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},zy=t=>{const e=Fy(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Am=()=>{var t;return(t=Pm())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $y(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[xo(JSON.stringify(n)),xo(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wy(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Mm(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Wy())}function Hy(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Uy(){return Tm.NODE_ADMIN===!0}function By(){try{return typeof indexedDB=="object"}catch{return!1}}function Vy(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gy="FirebaseError";class ri extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Gy,Object.setPrototypeOf(this,ri.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Om.prototype.create)}}class Om{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?Yy(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new ri(s,l,r)}}function Yy(t,e){return t.replace(Qy,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const Qy=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $s(t){return JSON.parse(t)}function Ne(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jm=function(t){let e={},n={},r={},s="";try{const i=t.split(".");e=$s(Xa(i[0])||""),n=$s(Xa(i[1])||""),s=i[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:s}},Ky=function(t){const e=jm(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},qy=function(t){const e=jm(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nt(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Hn(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Ja(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function wo(t,e,n){const r={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=e.call(n,t[s],s,t));return r}function Za(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(af(i)&&af(o)){if(!Za(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function af(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xy(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jy{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let f=0;f<16;f++)r[f]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let f=0;f<16;f++)r[f]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let f=16;f<80;f++){const h=r[f-3]^r[f-8]^r[f-14]^r[f-16];r[f]=(h<<1|h>>>31)&4294967295}let s=this.chain_[0],i=this.chain_[1],o=this.chain_[2],l=this.chain_[3],a=this.chain_[4],u,d;for(let f=0;f<80;f++){f<40?f<20?(u=l^i&(o^l),d=1518500249):(u=i^o^l,d=1859775393):f<60?(u=i&o|l&(i|o),d=2400959708):(u=i^o^l,d=3395469782);const h=(s<<5|s>>>27)+u+a+d+r[f]&4294967295;a=l,l=o,o=(i<<30|i>>>2)&4294967295,i=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+a&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let s=0;const i=this.buf_;let o=this.inbuf_;for(;s<n;){if(o===0)for(;s<=r;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<n;)if(i[o]=e.charCodeAt(s),++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}else for(;s<n;)if(i[o]=e[s],++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let s=0;s<5;s++)for(let i=24;i>=0;i-=8)e[r]=this.chain_[s]>>i&255,++r;return e}}function Mr(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zy=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);if(s>=55296&&s<=56319){const i=s-55296;r++,I(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;s=65536+(i<<10)+o}s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):s<65536?(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Zo=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nn(t){return t&&t._delegate?t._delegate:t}class Ws{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const In="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e_{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Rt;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(n_(e))try{this.getOrInitializeService({instanceIdentifier:In})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=In){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=In){return this.instances.has(e)}getOptions(e=In){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:t_(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=In){return this.component?this.component.multipleInstances?e:In:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function t_(t){return t===In?void 0:t}function n_(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r_{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new e_(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var se;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(se||(se={}));const s_={debug:se.DEBUG,verbose:se.VERBOSE,info:se.INFO,warn:se.WARN,error:se.ERROR,silent:se.SILENT},i_=se.INFO,o_={[se.DEBUG]:"log",[se.VERBOSE]:"log",[se.INFO]:"info",[se.WARN]:"warn",[se.ERROR]:"error"},l_=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=o_[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Dm{constructor(e){this.name=e,this._logLevel=i_,this._logHandler=l_,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in se))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?s_[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,se.DEBUG,...e),this._logHandler(this,se.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,se.VERBOSE,...e),this._logHandler(this,se.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,se.INFO,...e),this._logHandler(this,se.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,se.WARN,...e),this._logHandler(this,se.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,se.ERROR,...e),this._logHandler(this,se.ERROR,...e)}}const a_=(t,e)=>e.some(n=>t instanceof n);let uf,cf;function u_(){return uf||(uf=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function c_(){return cf||(cf=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Lm=new WeakMap,eu=new WeakMap,Fm=new WeakMap,$l=new WeakMap,gc=new WeakMap;function d_(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(hn(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Lm.set(n,t)}).catch(()=>{}),gc.set(e,t),e}function f_(t){if(eu.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});eu.set(t,e)}let tu={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return eu.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Fm.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return hn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function h_(t){tu=t(tu)}function p_(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Wl(this),e,...n);return Fm.set(r,e.sort?e.sort():[e]),hn(r)}:c_().includes(t)?function(...e){return t.apply(Wl(this),e),hn(Lm.get(this))}:function(...e){return hn(t.apply(Wl(this),e))}}function m_(t){return typeof t=="function"?p_(t):(t instanceof IDBTransaction&&f_(t),a_(t,u_())?new Proxy(t,tu):t)}function hn(t){if(t instanceof IDBRequest)return d_(t);if($l.has(t))return $l.get(t);const e=m_(t);return e!==t&&($l.set(t,e),gc.set(e,t)),e}const Wl=t=>gc.get(t);function g_(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=hn(o);return r&&o.addEventListener("upgradeneeded",a=>{r(hn(o.result),a.oldVersion,a.newVersion,hn(o.transaction),a)}),n&&o.addEventListener("blocked",a=>n(a.oldVersion,a.newVersion,a)),l.then(a=>{i&&a.addEventListener("close",()=>i()),s&&a.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const v_=["get","getKey","getAll","getAllKeys","count"],y_=["put","add","delete","clear"],Hl=new Map;function df(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Hl.get(e))return Hl.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=y_.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||v_.includes(n)))return;const i=async function(o,...l){const a=this.transaction(o,s?"readwrite":"readonly");let u=a.store;return r&&(u=u.index(l.shift())),(await Promise.all([u[n](...l),s&&a.done]))[0]};return Hl.set(e,i),i}h_(t=>({...t,get:(e,n,r)=>df(e,n)||t.get(e,n,r),has:(e,n)=>!!df(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(x_(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function x_(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const nu="@firebase/app",ff="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yt=new Dm("@firebase/app"),w_="@firebase/app-compat",E_="@firebase/analytics-compat",S_="@firebase/analytics",C_="@firebase/app-check-compat",N_="@firebase/app-check",k_="@firebase/auth",T_="@firebase/auth-compat",I_="@firebase/database",b_="@firebase/data-connect",R_="@firebase/database-compat",P_="@firebase/functions",A_="@firebase/functions-compat",M_="@firebase/installations",O_="@firebase/installations-compat",j_="@firebase/messaging",D_="@firebase/messaging-compat",L_="@firebase/performance",F_="@firebase/performance-compat",z_="@firebase/remote-config",$_="@firebase/remote-config-compat",W_="@firebase/storage",H_="@firebase/storage-compat",U_="@firebase/firestore",B_="@firebase/vertexai-preview",V_="@firebase/firestore-compat",G_="firebase",Y_="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ru="[DEFAULT]",Q_={[nu]:"fire-core",[w_]:"fire-core-compat",[S_]:"fire-analytics",[E_]:"fire-analytics-compat",[N_]:"fire-app-check",[C_]:"fire-app-check-compat",[k_]:"fire-auth",[T_]:"fire-auth-compat",[I_]:"fire-rtdb",[b_]:"fire-data-connect",[R_]:"fire-rtdb-compat",[P_]:"fire-fn",[A_]:"fire-fn-compat",[M_]:"fire-iid",[O_]:"fire-iid-compat",[j_]:"fire-fcm",[D_]:"fire-fcm-compat",[L_]:"fire-perf",[F_]:"fire-perf-compat",[z_]:"fire-rc",[$_]:"fire-rc-compat",[W_]:"fire-gcs",[H_]:"fire-gcs-compat",[U_]:"fire-fst",[V_]:"fire-fst-compat",[B_]:"fire-vertex","fire-js":"fire-js",[G_]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eo=new Map,K_=new Map,su=new Map;function hf(t,e){try{t.container.addComponent(e)}catch(n){Yt.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function So(t){const e=t.name;if(su.has(e))return Yt.debug(`There were multiple attempts to register component ${e}.`),!1;su.set(e,t);for(const n of Eo.values())hf(n,t);for(const n of K_.values())hf(n,t);return!0}function q_(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X_={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},pn=new Om("app","Firebase",X_);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J_{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ws("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw pn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z_=Y_;function zm(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:ru,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw pn.create("bad-app-name",{appName:String(s)});if(n||(n=Am()),!n)throw pn.create("no-options");const i=Eo.get(s);if(i){if(Za(n,i.options)&&Za(r,i.config))return i;throw pn.create("duplicate-app",{appName:s})}const o=new r_(s);for(const a of su.values())o.addComponent(a);const l=new J_(n,r,o);return Eo.set(s,l),l}function ex(t=ru){const e=Eo.get(t);if(!e&&t===ru&&Am())return zm();if(!e)throw pn.create("no-app",{appName:t});return e}function Sr(t,e,n){var r;let s=(r=Q_[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Yt.warn(l.join(" "));return}So(new Ws(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tx="firebase-heartbeat-database",nx=1,Hs="firebase-heartbeat-store";let Ul=null;function $m(){return Ul||(Ul=g_(tx,nx,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Hs)}catch(n){console.warn(n)}}}}).catch(t=>{throw pn.create("idb-open",{originalErrorMessage:t.message})})),Ul}async function rx(t){try{const n=(await $m()).transaction(Hs),r=await n.objectStore(Hs).get(Wm(t));return await n.done,r}catch(e){if(e instanceof ri)Yt.warn(e.message);else{const n=pn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Yt.warn(n.message)}}}async function pf(t,e){try{const r=(await $m()).transaction(Hs,"readwrite");await r.objectStore(Hs).put(e,Wm(t)),await r.done}catch(n){if(n instanceof ri)Yt.warn(n.message);else{const r=pn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Yt.warn(r.message)}}}function Wm(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sx=1024,ix=30*24*60*60*1e3;class ox{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new ax(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=mf();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=ix}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Yt.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=mf(),{heartbeatsToSend:r,unsentEntries:s}=lx(this._heartbeatsCache.heartbeats),i=xo(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Yt.warn(n),""}}}function mf(){return new Date().toISOString().substring(0,10)}function lx(t,e=sx){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),gf(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),gf(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class ax{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return By()?Vy().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await rx(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return pf(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return pf(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function gf(t){return xo(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ux(t){So(new Ws("platform-logger",e=>new __(e),"PRIVATE")),So(new Ws("heartbeat",e=>new ox(e),"PRIVATE")),Sr(nu,ff,t),Sr(nu,ff,"esm2017"),Sr("fire-js","")}ux("");var cx="firebase",dx="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Sr(cx,dx,"app");var vf={};const yf="@firebase/database",_f="1.0.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hm="";function fx(t){Hm=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Ne(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:$s(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Nt(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Um=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new hx(e)}}catch{}return new px},Mn=Um("localStorage"),mx=Um("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cr=new Dm("@firebase/database"),Bm=function(){let t=1;return function(){return t++}}(),Vm=function(t){const e=Zy(t),n=new Jy;n.update(e);const r=n.digest();return mc.encodeByteArray(r)},si=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=si.apply(null,r):typeof r=="object"?e+=Ne(r):e+=r,e+=" "}return e};let ys=null,xf=!0;const gx=function(t,e){I(!0,"Can't turn on custom loggers persistently."),Cr.logLevel=se.VERBOSE,ys=Cr.log.bind(Cr)},Ae=function(...t){if(xf===!0&&(xf=!1,ys===null&&mx.get("logging_enabled")===!0&&gx()),ys){const e=si.apply(null,t);ys(e)}},ii=function(t){return function(...e){Ae(t,...e)}},iu=function(...t){const e="FIREBASE INTERNAL ERROR: "+si(...t);Cr.error(e)},Qt=function(...t){const e=`FIREBASE FATAL ERROR: ${si(...t)}`;throw Cr.error(e),new Error(e)},Je=function(...t){const e="FIREBASE WARNING: "+si(...t);Cr.warn(e)},vx=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Je("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},el=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},yx=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Or="[MIN_NAME]",Un="[MAX_NAME]",Xn=function(t,e){if(t===e)return 0;if(t===Or||e===Un)return-1;if(e===Or||t===Un)return 1;{const n=wf(t),r=wf(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},_x=function(t,e){return t===e?0:t<e?-1:1},es=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Ne(e))},vc=function(t){if(typeof t!="object"||t===null)return Ne(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=Ne(e[r]),n+=":",n+=vc(t[e[r]]);return n+="}",n},Gm=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let s=0;s<n;s+=e)s+e>n?r.push(t.substring(s,n)):r.push(t.substring(s,s+e));return r};function $e(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const Ym=function(t){I(!el(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let s,i,o,l,a;t===0?(i=0,o=0,s=1/t===-1/0?1:0):(s=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(l=Math.min(Math.floor(Math.log(t)/Math.LN2),r),i=l+r,o=Math.round(t*Math.pow(2,n-l)-Math.pow(2,n))):(i=0,o=Math.round(t/Math.pow(2,1-r-n))));const u=[];for(a=n;a;a-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(a=e;a;a-=1)u.push(i%2?1:0),i=Math.floor(i/2);u.push(s?1:0),u.reverse();const d=u.join("");let f="";for(a=0;a<64;a+=8){let h=parseInt(d.substr(a,8),2).toString(16);h.length===1&&(h="0"+h),f=f+h}return f.toLowerCase()},xx=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},wx=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function Ex(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const Sx=new RegExp("^-?(0*)\\d{1,10}$"),Cx=-2147483648,Nx=2147483647,wf=function(t){if(Sx.test(t)){const e=Number(t);if(e>=Cx&&e<=Nx)return e}return null},Ur=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw Je("Exception was thrown by user callback.",n),e},Math.floor(0))}},kx=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},_s=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Je(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ix{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Ae("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Je(e)}}class Qi{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Qi.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yc="5",Qm="v",Km="s",qm="r",Xm="f",Jm=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Zm="ls",eg="p",ou="ac",tg="websocket",ng="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(e,n,r,s,i=!1,o="",l=!1,a=!1){this.secure=n,this.namespace=r,this.webSocketOnly=s,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=l,this.isUsingEmulator=a,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Mn.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Mn.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function bx(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function sg(t,e,n){I(typeof e=="string","typeof type must == string"),I(typeof n=="object","typeof params must == object");let r;if(e===tg)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===ng)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);bx(t)&&(n.ns=t.namespace);const s=[];return $e(n,(i,o)=>{s.push(i+"="+o)}),r+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{constructor(){this.counters_={}}incrementCounter(e,n=1){Nt(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return Ay(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bl={},Vl={};function _c(t){const e=t.toString();return Bl[e]||(Bl[e]=new Rx),Bl[e]}function Px(t,e){const n=t.toString();return Vl[n]||(Vl[n]=e()),Vl[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<r.length;++s)r[s]&&Ur(()=>{this.onMessage_(r[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ef="start",Mx="close",Ox="pLPCommand",jx="pRTLPCB",ig="id",og="pw",lg="ser",Dx="cb",Lx="seg",Fx="ts",zx="d",$x="dframe",ag=1870,ug=30,Wx=ag-ug,Hx=25e3,Ux=3e4;class mr{constructor(e,n,r,s,i,o,l){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.transportSessionId=o,this.lastSessionId=l,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ii(e),this.stats_=_c(n),this.urlFn=a=>(this.appCheckToken&&(a[ou]=this.appCheckToken),sg(n,ng,a))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new Ax(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Ux)),yx(()=>{if(this.isClosed_)return;this.scriptTagHolder=new xc((...i)=>{const[o,l,a,u,d]=i;if(this.incrementIncomingBytes_(i),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===Ef)this.id=l,this.password=a;else if(o===Mx)l?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(l,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...i)=>{const[o,l]=i;this.incrementIncomingBytes_(i),this.myPacketOrderer.handleResponse(o,l)},()=>{this.onClosed_()},this.urlFn);const r={};r[Ef]="t",r[lg]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[Dx]=this.scriptTagHolder.uniqueCallbackIdentifier),r[Qm]=yc,this.transportSessionId&&(r[Km]=this.transportSessionId),this.lastSessionId&&(r[Zm]=this.lastSessionId),this.applicationId&&(r[eg]=this.applicationId),this.appCheckToken&&(r[ou]=this.appCheckToken),typeof location<"u"&&location.hostname&&Jm.test(location.hostname)&&(r[qm]=Xm);const s=this.urlFn(r);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){mr.forceAllow_=!0}static forceDisallow(){mr.forceDisallow_=!0}static isAvailable(){return mr.forceAllow_?!0:!mr.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!xx()&&!wx()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Ne(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=bm(n),s=Gm(r,Wx);for(let i=0;i<s.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[i]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[$x]="t",r[ig]=e,r[og]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Ne(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class xc{constructor(e,n,r,s){this.onDisconnect=r,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=Bm(),window[Ox+this.uniqueCallbackIdentifier]=e,window[jx+this.uniqueCallbackIdentifier]=n,this.myIFrame=xc.createIFrame_();let i="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(i='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(l){Ae("frame writing exception"),l.stack&&Ae(l.stack),Ae(l)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Ae("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[ig]=this.myID,e[og]=this.myPW,e[lg]=this.currentSerial;let n=this.urlFn(e),r="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+ug+r.length<=ag;){const o=this.pendingSegs.shift();r=r+"&"+Lx+s+"="+o.seg+"&"+Fx+s+"="+o.ts+"&"+zx+s+"="+o.d,s++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},s=setTimeout(r,Math.floor(Hx)),i=()=>{clearTimeout(s),r()};this.addTag(e,i)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const s=r.readyState;(!s||s==="loaded"||s==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Ae("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bx=16384,Vx=45e3;let Co=null;typeof MozWebSocket<"u"?Co=MozWebSocket:typeof WebSocket<"u"&&(Co=WebSocket);class yt{constructor(e,n,r,s,i,o,l){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ii(this.connId),this.stats_=_c(n),this.connURL=yt.connectionURL_(n,o,l,s,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,s,i){const o={};return o[Qm]=yc,typeof location<"u"&&location.hostname&&Jm.test(location.hostname)&&(o[qm]=Xm),n&&(o[Km]=n),r&&(o[Zm]=r),s&&(o[ou]=s),i&&(o[eg]=i),sg(e,tg,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Mn.set("previous_websocket_failure",!0);try{let r;Uy(),this.mySock=new Co(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){yt.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&Co!==null&&!yt.forceDisallow_}static previouslyFailed(){return Mn.isInMemoryStorage||Mn.get("previous_websocket_failure")===!0}markConnectionHealthy(){Mn.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=$s(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(I(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=Ne(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=Gm(n,Bx);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Vx))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}yt.responsesRequiredToBeHealthy=2;yt.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[mr,yt]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=yt&&yt.isAvailable();let r=n&&!yt.previouslyFailed();if(e.webSocketOnly&&(n||Je("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[yt];else{const s=this.transports_=[];for(const i of Us.ALL_TRANSPORTS)i&&i.isAvailable()&&s.push(i);Us.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Us.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gx=6e4,Yx=5e3,Qx=10*1024,Kx=100*1024,Gl="t",Sf="d",qx="s",Cf="r",Xx="e",Nf="o",kf="a",Tf="n",If="p",Jx="h";class Zx{constructor(e,n,r,s,i,o,l,a,u,d){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=s,this.authToken_=i,this.onMessage_=o,this.onReady_=l,this.onDisconnect_=a,this.onKill_=u,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ii("c:"+this.id+":"),this.transportManager_=new Us(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=_s(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>Kx?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Qx?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Gl in e){const n=e[Gl];n===kf?this.upgradeIfSecondaryHealthy_():n===Cf?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===Nf&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=es("t",e),r=es("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:If,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:kf,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Tf,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=es("t",e),r=es("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=es(Gl,e);if(Sf in e){const r=e[Sf];if(n===Jx){const s=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(n===Tf){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===qx?this.onConnectionShutdown_(r):n===Cf?this.onReset_(r):n===Xx?iu("Server Error: "+r):n===Nf?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):iu("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),yc!==r&&Je("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),_s(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(Gx))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):_s(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Yx))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:If,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Mn.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{put(e,n,r,s){}merge(e,n,r,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{constructor(e){this.allowedEvents_=e,this.listeners_={},I(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let s=0;s<r.length;s++)r[s].callback.apply(r[s].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const s=this.getInitialEvent(e);s&&n.apply(r,s)}off(e,n,r){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let i=0;i<s.length;i++)if(s[i].callback===n&&(!r||r===s[i].context)){s.splice(i,1);return}}validateEventType_(e){I(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No extends dg{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Mm()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new No}getInitialEvent(e){return I(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bf=32,Rf=768;class ee{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[r]=this.pieces_[s],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function J(){return new ee("")}function W(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function _n(t){return t.pieces_.length-t.pieceNum_}function ne(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new ee(t.pieces_,e)}function wc(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function ew(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function Bs(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function fg(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new ee(e,0)}function xe(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof ee)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let s=0;s<r.length;s++)r[s].length>0&&n.push(r[s])}return new ee(n,0)}function U(t){return t.pieceNum_>=t.pieces_.length}function He(t,e){const n=W(t),r=W(e);if(n===null)return e;if(n===r)return He(ne(t),ne(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function tw(t,e){const n=Bs(t,0),r=Bs(e,0);for(let s=0;s<n.length&&s<r.length;s++){const i=Xn(n[s],r[s]);if(i!==0)return i}return n.length===r.length?0:n.length<r.length?-1:1}function Ec(t,e){if(_n(t)!==_n(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function ut(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(_n(t)>_n(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class nw{constructor(e,n){this.errorPrefix_=n,this.parts_=Bs(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Zo(this.parts_[r]);hg(this)}}function rw(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Zo(e),hg(t)}function sw(t){const e=t.parts_.pop();t.byteLength_-=Zo(e),t.parts_.length>0&&(t.byteLength_-=1)}function hg(t){if(t.byteLength_>Rf)throw new Error(t.errorPrefix_+"has a key path longer than "+Rf+" bytes ("+t.byteLength_+").");if(t.parts_.length>bf)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+bf+") or object contains a cycle "+bn(t))}function bn(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc extends dg{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new Sc}getInitialEvent(e){return I(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ts=1e3,iw=60*5*1e3,Pf=30*1e3,ow=1.3,lw=3e4,aw="server_kill",Af=3;class Ht extends cg{constructor(e,n,r,s,i,o,l,a){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=l,this.authOverride_=a,this.id=Ht.nextPersistentConnectionId_++,this.log_=ii("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ts,this.maxReconnectDelay_=iw,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,a)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Sc.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&No.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const s=++this.requestNumber_,i={r:s,a:e,b:n};this.log_(Ne(i)),I(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const n=new Rt,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const l=o.d;o.s==="ok"?n.resolve(l):n.reject(l)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),n.promise}listen(e,n,r,s){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),I(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),I(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const l={onComplete:s,hashFn:n,query:e,tag:r};this.listens.get(o).set(i,l),this.connected_&&this.sendListen_(l)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),s=n._queryIdentifier;this.log_("Listen on "+r+" for "+s);const i={p:r},o="q";e.tag&&(i.q=n._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest(o,i,l=>{const a=l.d,u=l.s;Ht.warnOnListenWarnings_(a,n),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",l),u!=="ok"&&this.removeListen_(r,s),e.onComplete&&e.onComplete(u,a))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Nt(e,"w")){const r=Hn(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+n._queryParams.getIndex().toString()+'"',i=n._path.toString();Je(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${i} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||qy(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Pf)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=Ky(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,s=>{const i=s.s,o=s.d||"error";this.authToken_===e&&(i==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(i,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),I(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,n)}sendUnlisten_(e,n,r,s){this.log_("Unlisten on "+e+" for "+n);const i={p:e},o="n";s&&(i.q=r,i.t=s),this.sendRequest(o,i)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,s){const i={p:n,d:r};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,o=>{s&&setTimeout(()=>{s(o.s,o.d)},Math.floor(0))})}put(e,n,r,s){this.putInternal("p",e,n,r,s)}merge(e,n,r,s){this.putInternal("m",e,n,r,s)}putInternal(e,n,r,s,i){this.initConnection_();const o={p:n,d:r};i!==void 0&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:s}),this.outstandingPutCount_++;const l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,i=>{this.log_(n+" response",i),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(i.s,i.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const i=r.d;this.log_("reportStats","Error sending stats: "+i)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Ne(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):iu("Unrecognized action received from server: "+Ne(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){I(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ts,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=ts,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>lw&&(this.reconnectDelay_=ts),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*ow)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+Ht.nextConnectionId_++,i=this.lastSessionId;let o=!1,l=null;const a=function(){l?l.close():(o=!0,r())},u=function(f){I(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(f)};this.realtime_={close:a,sendRequest:u};const d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[f,h]=await Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);o?Ae("getToken() completed but was canceled"):(Ae("getToken() completed. Creating connection."),this.authToken_=f&&f.accessToken,this.appCheckToken_=h&&h.token,l=new Zx(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,v=>{Je(v+" ("+this.repoInfo_.toString()+")"),this.interrupt(aw)},i))}catch(f){this.log_("Failed to get token: "+f),o||(this.repoInfo_.nodeAdmin&&Je(f),a())}}}interrupt(e){Ae("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Ae("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Ja(this.interruptReasons_)&&(this.reconnectDelay_=ts,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(i=>vc(i)).join("$"):r="default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,n){const r=new ee(e).toString();let s;if(this.listens.has(r)){const i=this.listens.get(r);s=i.get(n),i.delete(n),i.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,n){Ae("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Af&&(this.reconnectDelay_=Pf,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Ae("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Af&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+Hm.replace(/\./g,"-")]=1,Mm()?e["framework.cordova"]=1:Hy()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=No.getInstance().currentlyOnline();return Ja(this.interruptReasons_)&&e}}Ht.nextPersistentConnectionId_=0;Ht.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new B(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new B(Or,e),s=new B(Or,n);return this.compare(r,s)!==0}minPost(){return B.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pi;class pg extends tl{static get __EMPTY_NODE(){return Pi}static set __EMPTY_NODE(e){Pi=e}compare(e,n){return Xn(e.name,n.name)}isDefinedOn(e){throw Hr("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return B.MIN}maxPost(){return new B(Un,Pi)}makePost(e,n){return I(typeof e=="string","KeyIndex indexValue must always be a string."),new B(e,Pi)}toString(){return".key"}}const Nr=new pg;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(e,n,r,s,i=null){this.isReverse_=s,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,s&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class be{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??be.RED,this.left=s??Qe.EMPTY_NODE,this.right=i??Qe.EMPTY_NODE}copy(e,n,r,s,i){return new be(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return i<0?s=s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s=s.copy(null,n,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Qe.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,s;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return Qe.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,be.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,be.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}be.RED=!0;be.BLACK=!1;class uw{copy(e,n,r,s,i){return this}insert(e,n,r){return new be(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Qe{constructor(e,n=Qe.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Qe(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,be.BLACK,null,null))}remove(e){return new Qe(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,be.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,s=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return s?s.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(s=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Ai(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Ai(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Ai(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Ai(this.root_,null,this.comparator_,!0,e)}}Qe.EMPTY_NODE=new uw;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cw(t,e){return Xn(t.name,e.name)}function Cc(t,e){return Xn(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lu;function dw(t){lu=t}const mg=function(t){return typeof t=="number"?"number:"+Ym(t):"string:"+t},gg=function(t){if(t.isLeafNode()){const e=t.val();I(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Nt(e,".sv"),"Priority must be a string or number.")}else I(t===lu||t.isEmpty(),"priority of unexpected type.");I(t===lu||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mf;class Te{constructor(e,n=Te.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,I(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),gg(this.priorityNode_)}static set __childrenNodeConstructor(e){Mf=e}static get __childrenNodeConstructor(){return Mf}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Te(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Te.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return U(e)?this:W(e)===".priority"?this.priorityNode_:Te.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Te.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=W(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(I(r!==".priority"||_n(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,Te.__childrenNodeConstructor.EMPTY_NODE.updateChild(ne(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+mg(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=Ym(this.value_):e+=this.value_,this.lazyHash_=Vm(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Te.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Te.__childrenNodeConstructor?-1:(I(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,s=Te.VALUE_TYPE_ORDER.indexOf(n),i=Te.VALUE_TYPE_ORDER.indexOf(r);return I(s>=0,"Unknown leaf type: "+n),I(i>=0,"Unknown leaf type: "+r),s===i?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Te.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vg,yg;function fw(t){vg=t}function hw(t){yg=t}class pw extends tl{compare(e,n){const r=e.node.getPriority(),s=n.node.getPriority(),i=r.compareTo(s);return i===0?Xn(e.name,n.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return B.MIN}maxPost(){return new B(Un,new Te("[PRIORITY-POST]",yg))}makePost(e,n){const r=vg(e);return new B(n,new Te("[PRIORITY-POST]",r))}toString(){return".priority"}}const de=new pw;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mw=Math.log(2);class gw{constructor(e){const n=i=>parseInt(Math.log(i)/mw,10),r=i=>parseInt(Array(i+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const s=r(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const ko=function(t,e,n,r){t.sort(e);const s=function(a,u){const d=u-a;let f,h;if(d===0)return null;if(d===1)return f=t[a],h=n?n(f):f,new be(h,f.node,be.BLACK,null,null);{const v=parseInt(d/2,10)+a,_=s(a,v),x=s(v+1,u);return f=t[v],h=n?n(f):f,new be(h,f.node,be.BLACK,_,x)}},i=function(a){let u=null,d=null,f=t.length;const h=function(_,x){const N=f-_,m=f;f-=_;const p=s(N+1,m),y=t[N],g=n?n(y):y;v(new be(g,y.node,x,null,p))},v=function(_){u?(u.left=_,u=_):(d=_,u=_)};for(let _=0;_<a.count;++_){const x=a.nextBitIsOne(),N=Math.pow(2,a.count-(_+1));x?h(N,be.BLACK):(h(N,be.BLACK),h(N,be.RED))}return d},o=new gw(t.length),l=i(o);return new Qe(r||e,l)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yl;const tr={};class $t{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return I(tr&&de,"ChildrenNode.ts has not been loaded"),Yl=Yl||new $t({".priority":tr},{".priority":de}),Yl}get(e){const n=Hn(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Qe?n:null}hasIndex(e){return Nt(this.indexSet_,e.toString())}addIndex(e,n){I(e!==Nr,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let s=!1;const i=n.getIterator(B.Wrap);let o=i.getNext();for(;o;)s=s||e.isDefinedOn(o.node),r.push(o),o=i.getNext();let l;s?l=ko(r,e.getCompare()):l=tr;const a=e.toString(),u=Object.assign({},this.indexSet_);u[a]=e;const d=Object.assign({},this.indexes_);return d[a]=l,new $t(d,u)}addToIndexes(e,n){const r=wo(this.indexes_,(s,i)=>{const o=Hn(this.indexSet_,i);if(I(o,"Missing index implementation for "+i),s===tr)if(o.isDefinedOn(e.node)){const l=[],a=n.getIterator(B.Wrap);let u=a.getNext();for(;u;)u.name!==e.name&&l.push(u),u=a.getNext();return l.push(e),ko(l,o.getCompare())}else return tr;else{const l=n.get(e.name);let a=s;return l&&(a=a.remove(new B(e.name,l))),a.insert(e,e.node)}});return new $t(r,this.indexSet_)}removeFromIndexes(e,n){const r=wo(this.indexes_,s=>{if(s===tr)return s;{const i=n.get(e.name);return i?s.remove(new B(e.name,i)):s}});return new $t(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ns;class L{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&gg(this.priorityNode_),this.children_.isEmpty()&&I(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return ns||(ns=new L(new Qe(Cc),null,$t.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||ns}updatePriority(e){return this.children_.isEmpty()?this:new L(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?ns:n}}getChild(e){const n=W(e);return n===null?this:this.getImmediateChild(n).getChild(ne(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(I(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new B(e,n);let s,i;n.isEmpty()?(s=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,n),i=this.indexMap_.addToIndexes(r,this.children_));const o=s.isEmpty()?ns:this.priorityNode_;return new L(s,o,i)}}updateChild(e,n){const r=W(e);if(r===null)return n;{I(W(e)!==".priority"||_n(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(ne(e),n);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,s=0,i=!0;if(this.forEachChild(de,(o,l)=>{n[o]=l.val(e),r++,i&&L.INTEGER_REGEXP_.test(o)?s=Math.max(s,Number(o)):i=!1}),!e&&i&&s<2*r){const o=[];for(const l in n)o[l]=n[l];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+mg(this.getPriority().val())+":"),this.forEachChild(de,(n,r)=>{const s=r.hash();s!==""&&(e+=":"+n+":"+s)}),this.lazyHash_=e===""?"":Vm(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const s=this.resolveIndex_(r);if(s){const i=s.getPredecessorKey(new B(e,n));return i?i.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new B(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new B(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>n(s.name,s.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,B.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)<0;)s.getNext(),i=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,B.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)>0;)s.getNext(),i=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===oi?-1:0}withIndex(e){if(e===Nr||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new L(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Nr||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(de),s=n.getIterator(de);let i=r.getNext(),o=s.getNext();for(;i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=r.getNext(),o=s.getNext()}return i===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===Nr?null:this.indexMap_.get(e.toString())}}L.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class vw extends L{constructor(){super(new Qe(Cc),L.EMPTY_NODE,$t.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return L.EMPTY_NODE}isEmpty(){return!1}}const oi=new vw;Object.defineProperties(B,{MIN:{value:new B(Or,L.EMPTY_NODE)},MAX:{value:new B(Un,oi)}});pg.__EMPTY_NODE=L.EMPTY_NODE;Te.__childrenNodeConstructor=L;dw(oi);hw(oi);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yw=!0;function ye(t,e=null){if(t===null)return L.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),I(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Te(n,ye(e))}if(!(t instanceof Array)&&yw){const n=[];let r=!1;if($e(t,(o,l)=>{if(o.substring(0,1)!=="."){const a=ye(l);a.isEmpty()||(r=r||!a.getPriority().isEmpty(),n.push(new B(o,a)))}}),n.length===0)return L.EMPTY_NODE;const i=ko(n,cw,o=>o.name,Cc);if(r){const o=ko(n,de.getCompare());return new L(i,ye(e),new $t({".priority":o},{".priority":de}))}else return new L(i,ye(e),$t.Default)}else{let n=L.EMPTY_NODE;return $e(t,(r,s)=>{if(Nt(t,r)&&r.substring(0,1)!=="."){const i=ye(s);(i.isLeafNode()||!i.isEmpty())&&(n=n.updateImmediateChild(r,i))}}),n.updatePriority(ye(e))}}fw(ye);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _w extends tl{constructor(e){super(),this.indexPath_=e,I(!U(e)&&W(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),s=this.extractChild(n.node),i=r.compareTo(s);return i===0?Xn(e.name,n.name):i}makePost(e,n){const r=ye(e),s=L.EMPTY_NODE.updateChild(this.indexPath_,r);return new B(n,s)}maxPost(){const e=L.EMPTY_NODE.updateChild(this.indexPath_,oi);return new B(Un,e)}toString(){return Bs(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw extends tl{compare(e,n){const r=e.node.compareTo(n.node);return r===0?Xn(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return B.MIN}maxPost(){return B.MAX}makePost(e,n){const r=ye(e);return new B(n,r)}toString(){return".value"}}const ww=new xw;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _g(t){return{type:"value",snapshotNode:t}}function jr(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Vs(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Gs(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function Ew(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(e){this.index_=e}updateChild(e,n,r,s,i,o){I(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const l=e.getImmediateChild(n);return l.getChild(s).equals(r.getChild(s))&&l.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(Vs(n,l)):I(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):l.isEmpty()?o.trackChildChange(jr(n,r)):o.trackChildChange(Gs(n,r,l))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(de,(s,i)=>{n.hasChild(s)||r.trackChildChange(Vs(s,i))}),n.isLeafNode()||n.forEachChild(de,(s,i)=>{if(e.hasChild(s)){const o=e.getImmediateChild(s);o.equals(i)||r.trackChildChange(Gs(s,i,o))}else r.trackChildChange(jr(s,i))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?L.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(e){this.indexedFilter_=new Nc(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Ys.getStartPost_(e),this.endPost_=Ys.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,s,i,o){return this.matches(new B(n,r))||(r=L.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,s,i,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=L.EMPTY_NODE);let s=n.withIndex(this.index_);s=s.updatePriority(L.EMPTY_NODE);const i=this;return n.forEachChild(de,(o,l)=>{i.matches(new B(o,l))||(s=s.updateImmediateChild(o,L.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sw{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Ys(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,s,i,o){return this.rangedFilter_.matches(new B(n,r))||(r=L.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,s,i,o):this.fullLimitUpdateChild_(e,n,r,i,o)}updateFullNode(e,n,r){let s;if(n.isLeafNode()||n.isEmpty())s=L.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){s=L.EMPTY_NODE.withIndex(this.index_);let i;this.reverse_?i=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):i=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;i.hasNext()&&o<this.limit_;){const l=i.getNext();if(this.withinDirectionalStart(l))if(this.withinDirectionalEnd(l))s=s.updateImmediateChild(l.name,l.node),o++;else break;else continue}}else{s=n.withIndex(this.index_),s=s.updatePriority(L.EMPTY_NODE);let i;this.reverse_?i=s.getReverseIterator(this.index_):i=s.getIterator(this.index_);let o=0;for(;i.hasNext();){const l=i.getNext();o<this.limit_&&this.withinDirectionalStart(l)&&this.withinDirectionalEnd(l)?o++:s=s.updateImmediateChild(l.name,L.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,s,i){let o;if(this.reverse_){const f=this.index_.getCompare();o=(h,v)=>f(v,h)}else o=this.index_.getCompare();const l=e;I(l.numChildren()===this.limit_,"");const a=new B(n,r),u=this.reverse_?l.getFirstChild(this.index_):l.getLastChild(this.index_),d=this.rangedFilter_.matches(a);if(l.hasChild(n)){const f=l.getImmediateChild(n);let h=s.getChildAfterChild(this.index_,u,this.reverse_);for(;h!=null&&(h.name===n||l.hasChild(h.name));)h=s.getChildAfterChild(this.index_,h,this.reverse_);const v=h==null?1:o(h,a);if(d&&!r.isEmpty()&&v>=0)return i!=null&&i.trackChildChange(Gs(n,r,f)),l.updateImmediateChild(n,r);{i!=null&&i.trackChildChange(Vs(n,f));const x=l.updateImmediateChild(n,L.EMPTY_NODE);return h!=null&&this.rangedFilter_.matches(h)?(i!=null&&i.trackChildChange(jr(h.name,h.node)),x.updateImmediateChild(h.name,h.node)):x}}else return r.isEmpty()?e:d&&o(u,a)>=0?(i!=null&&(i.trackChildChange(Vs(u.name,u.node)),i.trackChildChange(jr(n,r))),l.updateImmediateChild(n,r).updateImmediateChild(u.name,L.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=de}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return I(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return I(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Or}hasEnd(){return this.endSet_}getIndexEndValue(){return I(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return I(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Un}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return I(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===de}copy(){const e=new kc;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Cw(t){return t.loadsAllData()?new Nc(t.getIndex()):t.hasLimit()?new Sw(t):new Ys(t)}function Of(t){const e={};if(t.isDefault())return e;let n;if(t.index_===de?n="$priority":t.index_===ww?n="$value":t.index_===Nr?n="$key":(I(t.index_ instanceof _w,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Ne(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=Ne(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+Ne(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=Ne(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+Ne(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function jf(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==de&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To extends cg{constructor(e,n,r,s){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=s,this.log_=ii("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(I(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,s){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=To.getListenId_(e,r),l={};this.listens_[o]=l;const a=Of(e._queryParams);this.restRequest_(i+".json",a,(u,d)=>{let f=d;if(u===404&&(f=null,u=null),u===null&&this.onDataUpdate_(i,f,!1,r),Hn(this.listens_,o)===l){let h;u?u===401?h="permission_denied":h="rest_error:"+u:h="ok",s(h,null)}})}unlisten(e,n){const r=To.getListenId_(e,n);delete this.listens_[r]}get(e){const n=Of(e._queryParams),r=e._path.toString(),s=new Rt;return this.restRequest_(r+".json",n,(i,o)=>{let l=o;i===404&&(l=null,i=null),i===null?(this.onDataUpdate_(r,l,!1,null),s.resolve(l)):s.reject(new Error(l))}),s.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,i])=>{s&&s.accessToken&&(n.auth=s.accessToken),i&&i.token&&(n.ac=i.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Xy(n);this.log_("Sending REST request for "+o);const l=new XMLHttpRequest;l.onreadystatechange=()=>{if(r&&l.readyState===4){this.log_("REST Response for "+o+" received. status:",l.status,"response:",l.responseText);let a=null;if(l.status>=200&&l.status<300){try{a=$s(l.responseText)}catch{Je("Failed to parse JSON response for "+o+": "+l.responseText)}r(null,a)}else l.status!==401&&l.status!==404&&Je("Got unsuccessful REST response for "+o+" Status: "+l.status),r(l.status);r=null}},l.open("GET",o,!0),l.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw{constructor(){this.rootNode_=L.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Io(){return{value:null,children:new Map}}function Br(t,e,n){if(U(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=W(e);t.children.has(r)||t.children.set(r,Io());const s=t.children.get(r);e=ne(e),Br(s,e,n)}}function au(t,e){if(U(e))return t.value=null,t.children.clear(),!0;if(t.value!==null){if(t.value.isLeafNode())return!1;{const n=t.value;return t.value=null,n.forEachChild(de,(r,s)=>{Br(t,new ee(r),s)}),au(t,e)}}else if(t.children.size>0){const n=W(e);return e=ne(e),t.children.has(n)&&au(t.children.get(n),e)&&t.children.delete(n),t.children.size===0}else return!0}function uu(t,e,n){t.value!==null?n(e,t.value):kw(t,(r,s)=>{const i=new ee(e.toString()+"/"+r);uu(s,i,n)})}function kw(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&$e(this.last_,(r,s)=>{n[r]=n[r]-s}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Df=10*1e3,Iw=30*1e3,bw=5*60*1e3;class Rw{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new Tw(e);const r=Df+(Iw-Df)*Math.random();_s(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;$e(e,(s,i)=>{i>0&&Nt(this.statsToReport_,s)&&(n[s]=i,r=!0)}),r&&this.server_.reportStats(n),_s(this.reportStats_.bind(this),Math.floor(Math.random()*2*bw))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _t;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(_t||(_t={}));function xg(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Tc(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Ic(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=_t.ACK_USER_WRITE,this.source=xg()}operationForChild(e){if(U(this.path)){if(this.affectedTree.value!=null)return I(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new ee(e));return new bo(J(),n,this.revert)}}else return I(W(this.path)===e,"operationForChild called for unrelated child."),new bo(ne(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(e,n){this.source=e,this.path=n,this.type=_t.LISTEN_COMPLETE}operationForChild(e){return U(this.path)?new Qs(this.source,J()):new Qs(this.source,ne(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=_t.OVERWRITE}operationForChild(e){return U(this.path)?new Bn(this.source,J(),this.snap.getImmediateChild(e)):new Bn(this.source,ne(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=_t.MERGE}operationForChild(e){if(U(this.path)){const n=this.children.subtree(new ee(e));return n.isEmpty()?null:n.value?new Bn(this.source,J(),n.value):new Ks(this.source,J(),n)}else return I(W(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Ks(this.source,ne(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(U(e))return this.isFullyInitialized()&&!this.filtered_;const n=W(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pw{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Aw(t,e,n,r){const s=[],i=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&i.push(Ew(o.childName,o.snapshotNode))}),rs(t,s,"child_removed",e,r,n),rs(t,s,"child_added",e,r,n),rs(t,s,"child_moved",i,r,n),rs(t,s,"child_changed",e,r,n),rs(t,s,"value",e,r,n),s}function rs(t,e,n,r,s,i){const o=r.filter(l=>l.type===n);o.sort((l,a)=>Ow(t,l,a)),o.forEach(l=>{const a=Mw(t,l,i);s.forEach(u=>{u.respondsTo(l.type)&&e.push(u.createEvent(a,t.query_))})})}function Mw(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function Ow(t,e,n){if(e.childName==null||n.childName==null)throw Hr("Should only compare child_ events.");const r=new B(e.childName,e.snapshotNode),s=new B(n.childName,n.snapshotNode);return t.index_.compare(r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nl(t,e){return{eventCache:t,serverCache:e}}function xs(t,e,n,r){return nl(new xn(e,n,r),t.serverCache)}function wg(t,e,n,r){return nl(t.eventCache,new xn(e,n,r))}function Ro(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Vn(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ql;const jw=()=>(Ql||(Ql=new Qe(_x)),Ql);class le{constructor(e,n=jw()){this.value=e,this.children=n}static fromObject(e){let n=new le(null);return $e(e,(r,s)=>{n=n.set(new ee(r),s)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:J(),value:this.value};if(U(e))return null;{const r=W(e),s=this.children.get(r);if(s!==null){const i=s.findRootMostMatchingPathAndValue(ne(e),n);return i!=null?{path:xe(new ee(r),i.path),value:i.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(U(e))return this;{const n=W(e),r=this.children.get(n);return r!==null?r.subtree(ne(e)):new le(null)}}set(e,n){if(U(e))return new le(n,this.children);{const r=W(e),i=(this.children.get(r)||new le(null)).set(ne(e),n),o=this.children.insert(r,i);return new le(this.value,o)}}remove(e){if(U(e))return this.children.isEmpty()?new le(null):new le(null,this.children);{const n=W(e),r=this.children.get(n);if(r){const s=r.remove(ne(e));let i;return s.isEmpty()?i=this.children.remove(n):i=this.children.insert(n,s),this.value===null&&i.isEmpty()?new le(null):new le(this.value,i)}else return this}}get(e){if(U(e))return this.value;{const n=W(e),r=this.children.get(n);return r?r.get(ne(e)):null}}setTree(e,n){if(U(e))return n;{const r=W(e),i=(this.children.get(r)||new le(null)).setTree(ne(e),n);let o;return i.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,i),new le(this.value,o)}}fold(e){return this.fold_(J(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((s,i)=>{r[s]=i.fold_(xe(e,s),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,J(),n)}findOnPath_(e,n,r){const s=this.value?r(n,this.value):!1;if(s)return s;if(U(e))return null;{const i=W(e),o=this.children.get(i);return o?o.findOnPath_(ne(e),xe(n,i),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,J(),n)}foreachOnPath_(e,n,r){if(U(e))return this;{this.value&&r(n,this.value);const s=W(e),i=this.children.get(s);return i?i.foreachOnPath_(ne(e),xe(n,s),r):new le(null)}}foreach(e){this.foreach_(J(),e)}foreach_(e,n){this.children.inorderTraversal((r,s)=>{s.foreach_(xe(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e){this.writeTree_=e}static empty(){return new Et(new le(null))}}function ws(t,e,n){if(U(e))return new Et(new le(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const s=r.path;let i=r.value;const o=He(s,e);return i=i.updateChild(o,n),new Et(t.writeTree_.set(s,i))}else{const s=new le(n),i=t.writeTree_.setTree(e,s);return new Et(i)}}}function Lf(t,e,n){let r=t;return $e(n,(s,i)=>{r=ws(r,xe(e,s),i)}),r}function Ff(t,e){if(U(e))return Et.empty();{const n=t.writeTree_.setTree(e,new le(null));return new Et(n)}}function cu(t,e){return Jn(t,e)!=null}function Jn(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(He(n.path,e)):null}function zf(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(de,(r,s)=>{e.push(new B(r,s))}):t.writeTree_.children.inorderTraversal((r,s)=>{s.value!=null&&e.push(new B(r,s.value))}),e}function mn(t,e){if(U(e))return t;{const n=Jn(t,e);return n!=null?new Et(new le(n)):new Et(t.writeTree_.subtree(e))}}function du(t){return t.writeTree_.isEmpty()}function Dr(t,e){return Eg(J(),t.writeTree_,e)}function Eg(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((s,i)=>{s===".priority"?(I(i.value!==null,"Priority writes must always be leaf nodes"),r=i.value):n=Eg(xe(t,s),i,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(xe(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rl(t,e){return kg(e,t)}function Dw(t,e,n,r,s){I(r>t.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:s}),s&&(t.visibleWrites=ws(t.visibleWrites,e,n)),t.lastWriteId=r}function Lw(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function Fw(t,e){const n=t.allWrites.findIndex(l=>l.writeId===e);I(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let s=r.visible,i=!1,o=t.allWrites.length-1;for(;s&&o>=0;){const l=t.allWrites[o];l.visible&&(o>=n&&zw(l,r.path)?s=!1:ut(r.path,l.path)&&(i=!0)),o--}if(s){if(i)return $w(t),!0;if(r.snap)t.visibleWrites=Ff(t.visibleWrites,r.path);else{const l=r.children;$e(l,a=>{t.visibleWrites=Ff(t.visibleWrites,xe(r.path,a))})}return!0}else return!1}function zw(t,e){if(t.snap)return ut(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&ut(xe(t.path,n),e))return!0;return!1}function $w(t){t.visibleWrites=Sg(t.allWrites,Ww,J()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function Ww(t){return t.visible}function Sg(t,e,n){let r=Et.empty();for(let s=0;s<t.length;++s){const i=t[s];if(e(i)){const o=i.path;let l;if(i.snap)ut(n,o)?(l=He(n,o),r=ws(r,l,i.snap)):ut(o,n)&&(l=He(o,n),r=ws(r,J(),i.snap.getChild(l)));else if(i.children){if(ut(n,o))l=He(n,o),r=Lf(r,l,i.children);else if(ut(o,n))if(l=He(o,n),U(l))r=Lf(r,J(),i.children);else{const a=Hn(i.children,W(l));if(a){const u=a.getChild(ne(l));r=ws(r,J(),u)}}}else throw Hr("WriteRecord should have .snap or .children")}}return r}function Cg(t,e,n,r,s){if(!r&&!s){const i=Jn(t.visibleWrites,e);if(i!=null)return i;{const o=mn(t.visibleWrites,e);if(du(o))return n;if(n==null&&!cu(o,J()))return null;{const l=n||L.EMPTY_NODE;return Dr(o,l)}}}else{const i=mn(t.visibleWrites,e);if(!s&&du(i))return n;if(!s&&n==null&&!cu(i,J()))return null;{const o=function(u){return(u.visible||s)&&(!r||!~r.indexOf(u.writeId))&&(ut(u.path,e)||ut(e,u.path))},l=Sg(t.allWrites,o,e),a=n||L.EMPTY_NODE;return Dr(l,a)}}}function Hw(t,e,n){let r=L.EMPTY_NODE;const s=Jn(t.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(de,(i,o)=>{r=r.updateImmediateChild(i,o)}),r;if(n){const i=mn(t.visibleWrites,e);return n.forEachChild(de,(o,l)=>{const a=Dr(mn(i,new ee(o)),l);r=r.updateImmediateChild(o,a)}),zf(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const i=mn(t.visibleWrites,e);return zf(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function Uw(t,e,n,r,s){I(r||s,"Either existingEventSnap or existingServerSnap must exist");const i=xe(e,n);if(cu(t.visibleWrites,i))return null;{const o=mn(t.visibleWrites,i);return du(o)?s.getChild(n):Dr(o,s.getChild(n))}}function Bw(t,e,n,r){const s=xe(e,n),i=Jn(t.visibleWrites,s);if(i!=null)return i;if(r.isCompleteForChild(n)){const o=mn(t.visibleWrites,s);return Dr(o,r.getNode().getImmediateChild(n))}else return null}function Vw(t,e){return Jn(t.visibleWrites,e)}function Gw(t,e,n,r,s,i,o){let l;const a=mn(t.visibleWrites,e),u=Jn(a,J());if(u!=null)l=u;else if(n!=null)l=Dr(a,n);else return[];if(l=l.withIndex(o),!l.isEmpty()&&!l.isLeafNode()){const d=[],f=o.getCompare(),h=i?l.getReverseIteratorFrom(r,o):l.getIteratorFrom(r,o);let v=h.getNext();for(;v&&d.length<s;)f(v,r)!==0&&d.push(v),v=h.getNext();return d}else return[]}function Yw(){return{visibleWrites:Et.empty(),allWrites:[],lastWriteId:-1}}function Po(t,e,n,r){return Cg(t.writeTree,t.treePath,e,n,r)}function bc(t,e){return Hw(t.writeTree,t.treePath,e)}function $f(t,e,n,r){return Uw(t.writeTree,t.treePath,e,n,r)}function Ao(t,e){return Vw(t.writeTree,xe(t.treePath,e))}function Qw(t,e,n,r,s,i){return Gw(t.writeTree,t.treePath,e,n,r,s,i)}function Rc(t,e,n){return Bw(t.writeTree,t.treePath,e,n)}function Ng(t,e){return kg(xe(t.treePath,e),t.writeTree)}function kg(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;I(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),I(r!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(r);if(s){const i=s.type;if(n==="child_added"&&i==="child_removed")this.changeMap.set(r,Gs(r,e.snapshotNode,s.snapshotNode));else if(n==="child_removed"&&i==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&i==="child_changed")this.changeMap.set(r,Vs(r,s.oldSnap));else if(n==="child_changed"&&i==="child_added")this.changeMap.set(r,jr(r,e.snapshotNode));else if(n==="child_changed"&&i==="child_changed")this.changeMap.set(r,Gs(r,e.snapshotNode,s.oldSnap));else throw Hr("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const Tg=new qw;class Pc{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new xn(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Rc(this.writes_,e,r)}}getChildAfterChild(e,n,r){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Vn(this.viewCache_),i=Qw(this.writes_,s,n,1,r,e);return i.length===0?null:i[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xw(t){return{filter:t}}function Jw(t,e){I(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),I(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function Zw(t,e,n,r,s){const i=new Kw;let o,l;if(n.type===_t.OVERWRITE){const u=n;u.source.fromUser?o=fu(t,e,u.path,u.snap,r,s,i):(I(u.source.fromServer,"Unknown source."),l=u.source.tagged||e.serverCache.isFiltered()&&!U(u.path),o=Mo(t,e,u.path,u.snap,r,s,l,i))}else if(n.type===_t.MERGE){const u=n;u.source.fromUser?o=t1(t,e,u.path,u.children,r,s,i):(I(u.source.fromServer,"Unknown source."),l=u.source.tagged||e.serverCache.isFiltered(),o=hu(t,e,u.path,u.children,r,s,l,i))}else if(n.type===_t.ACK_USER_WRITE){const u=n;u.revert?o=s1(t,e,u.path,r,s,i):o=n1(t,e,u.path,u.affectedTree,r,s,i)}else if(n.type===_t.LISTEN_COMPLETE)o=r1(t,e,n.path,r,i);else throw Hr("Unknown operation type: "+n.type);const a=i.getChanges();return e1(e,o,a),{viewCache:o,changes:a}}function e1(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const s=r.getNode().isLeafNode()||r.getNode().isEmpty(),i=Ro(t);(n.length>0||!t.eventCache.isFullyInitialized()||s&&!r.getNode().equals(i)||!r.getNode().getPriority().equals(i.getPriority()))&&n.push(_g(Ro(e)))}}function Ig(t,e,n,r,s,i){const o=e.eventCache;if(Ao(r,n)!=null)return e;{let l,a;if(U(n))if(I(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const u=Vn(e),d=u instanceof L?u:L.EMPTY_NODE,f=bc(r,d);l=t.filter.updateFullNode(e.eventCache.getNode(),f,i)}else{const u=Po(r,Vn(e));l=t.filter.updateFullNode(e.eventCache.getNode(),u,i)}else{const u=W(n);if(u===".priority"){I(_n(n)===1,"Can't have a priority with additional path components");const d=o.getNode();a=e.serverCache.getNode();const f=$f(r,n,d,a);f!=null?l=t.filter.updatePriority(d,f):l=o.getNode()}else{const d=ne(n);let f;if(o.isCompleteForChild(u)){a=e.serverCache.getNode();const h=$f(r,n,o.getNode(),a);h!=null?f=o.getNode().getImmediateChild(u).updateChild(d,h):f=o.getNode().getImmediateChild(u)}else f=Rc(r,u,e.serverCache);f!=null?l=t.filter.updateChild(o.getNode(),u,f,d,s,i):l=o.getNode()}}return xs(e,l,o.isFullyInitialized()||U(n),t.filter.filtersNodes())}}function Mo(t,e,n,r,s,i,o,l){const a=e.serverCache;let u;const d=o?t.filter:t.filter.getIndexedFilter();if(U(n))u=d.updateFullNode(a.getNode(),r,null);else if(d.filtersNodes()&&!a.isFiltered()){const v=a.getNode().updateChild(n,r);u=d.updateFullNode(a.getNode(),v,null)}else{const v=W(n);if(!a.isCompleteForPath(n)&&_n(n)>1)return e;const _=ne(n),N=a.getNode().getImmediateChild(v).updateChild(_,r);v===".priority"?u=d.updatePriority(a.getNode(),N):u=d.updateChild(a.getNode(),v,N,_,Tg,null)}const f=wg(e,u,a.isFullyInitialized()||U(n),d.filtersNodes()),h=new Pc(s,f,i);return Ig(t,f,n,s,h,l)}function fu(t,e,n,r,s,i,o){const l=e.eventCache;let a,u;const d=new Pc(s,e,i);if(U(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,o),a=xs(e,u,!0,t.filter.filtersNodes());else{const f=W(n);if(f===".priority")u=t.filter.updatePriority(e.eventCache.getNode(),r),a=xs(e,u,l.isFullyInitialized(),l.isFiltered());else{const h=ne(n),v=l.getNode().getImmediateChild(f);let _;if(U(h))_=r;else{const x=d.getCompleteChild(f);x!=null?wc(h)===".priority"&&x.getChild(fg(h)).isEmpty()?_=x:_=x.updateChild(h,r):_=L.EMPTY_NODE}if(v.equals(_))a=e;else{const x=t.filter.updateChild(l.getNode(),f,_,h,d,o);a=xs(e,x,l.isFullyInitialized(),t.filter.filtersNodes())}}}return a}function Wf(t,e){return t.eventCache.isCompleteForChild(e)}function t1(t,e,n,r,s,i,o){let l=e;return r.foreach((a,u)=>{const d=xe(n,a);Wf(e,W(d))&&(l=fu(t,l,d,u,s,i,o))}),r.foreach((a,u)=>{const d=xe(n,a);Wf(e,W(d))||(l=fu(t,l,d,u,s,i,o))}),l}function Hf(t,e,n){return n.foreach((r,s)=>{e=e.updateChild(r,s)}),e}function hu(t,e,n,r,s,i,o,l){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let a=e,u;U(n)?u=r:u=new le(null).setTree(n,r);const d=e.serverCache.getNode();return u.children.inorderTraversal((f,h)=>{if(d.hasChild(f)){const v=e.serverCache.getNode().getImmediateChild(f),_=Hf(t,v,h);a=Mo(t,a,new ee(f),_,s,i,o,l)}}),u.children.inorderTraversal((f,h)=>{const v=!e.serverCache.isCompleteForChild(f)&&h.value===null;if(!d.hasChild(f)&&!v){const _=e.serverCache.getNode().getImmediateChild(f),x=Hf(t,_,h);a=Mo(t,a,new ee(f),x,s,i,o,l)}}),a}function n1(t,e,n,r,s,i,o){if(Ao(s,n)!=null)return e;const l=e.serverCache.isFiltered(),a=e.serverCache;if(r.value!=null){if(U(n)&&a.isFullyInitialized()||a.isCompleteForPath(n))return Mo(t,e,n,a.getNode().getChild(n),s,i,l,o);if(U(n)){let u=new le(null);return a.getNode().forEachChild(Nr,(d,f)=>{u=u.set(new ee(d),f)}),hu(t,e,n,u,s,i,l,o)}else return e}else{let u=new le(null);return r.foreach((d,f)=>{const h=xe(n,d);a.isCompleteForPath(h)&&(u=u.set(d,a.getNode().getChild(h)))}),hu(t,e,n,u,s,i,l,o)}}function r1(t,e,n,r,s){const i=e.serverCache,o=wg(e,i.getNode(),i.isFullyInitialized()||U(n),i.isFiltered());return Ig(t,o,n,r,Tg,s)}function s1(t,e,n,r,s,i){let o;if(Ao(r,n)!=null)return e;{const l=new Pc(r,e,s),a=e.eventCache.getNode();let u;if(U(n)||W(n)===".priority"){let d;if(e.serverCache.isFullyInitialized())d=Po(r,Vn(e));else{const f=e.serverCache.getNode();I(f instanceof L,"serverChildren would be complete if leaf node"),d=bc(r,f)}d=d,u=t.filter.updateFullNode(a,d,i)}else{const d=W(n);let f=Rc(r,d,e.serverCache);f==null&&e.serverCache.isCompleteForChild(d)&&(f=a.getImmediateChild(d)),f!=null?u=t.filter.updateChild(a,d,f,ne(n),l,i):e.eventCache.getNode().hasChild(d)?u=t.filter.updateChild(a,d,L.EMPTY_NODE,ne(n),l,i):u=a,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Po(r,Vn(e)),o.isLeafNode()&&(u=t.filter.updateFullNode(u,o,i)))}return o=e.serverCache.isFullyInitialized()||Ao(r,J())!=null,xs(e,u,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,s=new Nc(r.getIndex()),i=Cw(r);this.processor_=Xw(i);const o=n.serverCache,l=n.eventCache,a=s.updateFullNode(L.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(L.EMPTY_NODE,l.getNode(),null),d=new xn(a,o.isFullyInitialized(),s.filtersNodes()),f=new xn(u,l.isFullyInitialized(),i.filtersNodes());this.viewCache_=nl(f,d),this.eventGenerator_=new Pw(this.query_)}get query(){return this.query_}}function o1(t){return t.viewCache_.serverCache.getNode()}function l1(t){return Ro(t.viewCache_)}function a1(t,e){const n=Vn(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!U(e)&&!n.getImmediateChild(W(e)).isEmpty())?n.getChild(e):null}function Uf(t){return t.eventRegistrations_.length===0}function u1(t,e){t.eventRegistrations_.push(e)}function Bf(t,e,n){const r=[];if(n){I(e==null,"A cancel should cancel all event registrations.");const s=t.query._path;t.eventRegistrations_.forEach(i=>{const o=i.createCancelEvent(n,s);o&&r.push(o)})}if(e){let s=[];for(let i=0;i<t.eventRegistrations_.length;++i){const o=t.eventRegistrations_[i];if(!o.matches(e))s.push(o);else if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(i+1));break}}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function Vf(t,e,n,r){e.type===_t.MERGE&&e.source.queryId!==null&&(I(Vn(t.viewCache_),"We should always have a full cache before handling merges"),I(Ro(t.viewCache_),"Missing event cache, even though we have a server cache"));const s=t.viewCache_,i=Zw(t.processor_,s,e,n,r);return Jw(t.processor_,i.viewCache),I(i.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=i.viewCache,bg(t,i.changes,i.viewCache.eventCache.getNode(),null)}function c1(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(de,(i,o)=>{r.push(jr(i,o))}),n.isFullyInitialized()&&r.push(_g(n.getNode())),bg(t,r,n.getNode(),e)}function bg(t,e,n,r){const s=r?[r]:t.eventRegistrations_;return Aw(t.eventGenerator_,e,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Oo;class Rg{constructor(){this.views=new Map}}function d1(t){I(!Oo,"__referenceConstructor has already been defined"),Oo=t}function f1(){return I(Oo,"Reference.ts has not been loaded"),Oo}function h1(t){return t.views.size===0}function Ac(t,e,n,r){const s=e.source.queryId;if(s!==null){const i=t.views.get(s);return I(i!=null,"SyncTree gave us an op for an invalid query."),Vf(i,e,n,r)}else{let i=[];for(const o of t.views.values())i=i.concat(Vf(o,e,n,r));return i}}function Pg(t,e,n,r,s){const i=e._queryIdentifier,o=t.views.get(i);if(!o){let l=Po(n,s?r:null),a=!1;l?a=!0:r instanceof L?(l=bc(n,r),a=!1):(l=L.EMPTY_NODE,a=!1);const u=nl(new xn(l,a,!1),new xn(r,s,!1));return new i1(e,u)}return o}function p1(t,e,n,r,s,i){const o=Pg(t,e,r,s,i);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),u1(o,n),c1(o,n)}function m1(t,e,n,r){const s=e._queryIdentifier,i=[];let o=[];const l=wn(t);if(s==="default")for(const[a,u]of t.views.entries())o=o.concat(Bf(u,n,r)),Uf(u)&&(t.views.delete(a),u.query._queryParams.loadsAllData()||i.push(u.query));else{const a=t.views.get(s);a&&(o=o.concat(Bf(a,n,r)),Uf(a)&&(t.views.delete(s),a.query._queryParams.loadsAllData()||i.push(a.query)))}return l&&!wn(t)&&i.push(new(f1())(e._repo,e._path)),{removed:i,events:o}}function Ag(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function gn(t,e){let n=null;for(const r of t.views.values())n=n||a1(r,e);return n}function Mg(t,e){if(e._queryParams.loadsAllData())return sl(t);{const r=e._queryIdentifier;return t.views.get(r)}}function Og(t,e){return Mg(t,e)!=null}function wn(t){return sl(t)!=null}function sl(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jo;function g1(t){I(!jo,"__referenceConstructor has already been defined"),jo=t}function v1(){return I(jo,"Reference.ts has not been loaded"),jo}let y1=1;class Gf{constructor(e){this.listenProvider_=e,this.syncPointTree_=new le(null),this.pendingWriteTree_=Yw(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Mc(t,e,n,r,s){return Dw(t.pendingWriteTree_,e,n,r,s),s?ai(t,new Bn(xg(),e,n)):[]}function On(t,e,n=!1){const r=Lw(t.pendingWriteTree_,e);if(Fw(t.pendingWriteTree_,e)){let i=new le(null);return r.snap!=null?i=i.set(J(),!0):$e(r.children,o=>{i=i.set(new ee(o),!0)}),ai(t,new bo(r.path,i,n))}else return[]}function li(t,e,n){return ai(t,new Bn(Tc(),e,n))}function _1(t,e,n){const r=le.fromObject(n);return ai(t,new Ks(Tc(),e,r))}function x1(t,e){return ai(t,new Qs(Tc(),e))}function w1(t,e,n){const r=Oc(t,n);if(r){const s=jc(r),i=s.path,o=s.queryId,l=He(i,e),a=new Qs(Ic(o),l);return Dc(t,i,a)}else return[]}function Do(t,e,n,r,s=!1){const i=e._path,o=t.syncPointTree_.get(i);let l=[];if(o&&(e._queryIdentifier==="default"||Og(o,e))){const a=m1(o,e,n,r);h1(o)&&(t.syncPointTree_=t.syncPointTree_.remove(i));const u=a.removed;if(l=a.events,!s){const d=u.findIndex(h=>h._queryParams.loadsAllData())!==-1,f=t.syncPointTree_.findOnPath(i,(h,v)=>wn(v));if(d&&!f){const h=t.syncPointTree_.subtree(i);if(!h.isEmpty()){const v=C1(h);for(let _=0;_<v.length;++_){const x=v[_],N=x.query,m=Fg(t,x);t.listenProvider_.startListening(Es(N),qs(t,N),m.hashFn,m.onComplete)}}}!f&&u.length>0&&!r&&(d?t.listenProvider_.stopListening(Es(e),null):u.forEach(h=>{const v=t.queryToTagMap.get(ol(h));t.listenProvider_.stopListening(Es(h),v)}))}N1(t,u)}return l}function jg(t,e,n,r){const s=Oc(t,r);if(s!=null){const i=jc(s),o=i.path,l=i.queryId,a=He(o,e),u=new Bn(Ic(l),a,n);return Dc(t,o,u)}else return[]}function E1(t,e,n,r){const s=Oc(t,r);if(s){const i=jc(s),o=i.path,l=i.queryId,a=He(o,e),u=le.fromObject(n),d=new Ks(Ic(l),a,u);return Dc(t,o,d)}else return[]}function pu(t,e,n,r=!1){const s=e._path;let i=null,o=!1;t.syncPointTree_.foreachOnPath(s,(h,v)=>{const _=He(h,s);i=i||gn(v,_),o=o||wn(v)});let l=t.syncPointTree_.get(s);l?(o=o||wn(l),i=i||gn(l,J())):(l=new Rg,t.syncPointTree_=t.syncPointTree_.set(s,l));let a;i!=null?a=!0:(a=!1,i=L.EMPTY_NODE,t.syncPointTree_.subtree(s).foreachChild((v,_)=>{const x=gn(_,J());x&&(i=i.updateImmediateChild(v,x))}));const u=Og(l,e);if(!u&&!e._queryParams.loadsAllData()){const h=ol(e);I(!t.queryToTagMap.has(h),"View does not exist, but we have a tag");const v=k1();t.queryToTagMap.set(h,v),t.tagToQueryMap.set(v,h)}const d=rl(t.pendingWriteTree_,s);let f=p1(l,e,n,d,i,a);if(!u&&!o&&!r){const h=Mg(l,e);f=f.concat(T1(t,e,h))}return f}function il(t,e,n){const s=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(o,l)=>{const a=He(o,e),u=gn(l,a);if(u)return u});return Cg(s,e,i,n,!0)}function S1(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(u,d)=>{const f=He(u,n);r=r||gn(d,f)});let s=t.syncPointTree_.get(n);s?r=r||gn(s,J()):(s=new Rg,t.syncPointTree_=t.syncPointTree_.set(n,s));const i=r!=null,o=i?new xn(r,!0,!1):null,l=rl(t.pendingWriteTree_,e._path),a=Pg(s,e,l,i?o.getNode():L.EMPTY_NODE,i);return l1(a)}function ai(t,e){return Dg(e,t.syncPointTree_,null,rl(t.pendingWriteTree_,J()))}function Dg(t,e,n,r){if(U(t.path))return Lg(t,e,n,r);{const s=e.get(J());n==null&&s!=null&&(n=gn(s,J()));let i=[];const o=W(t.path),l=t.operationForChild(o),a=e.children.get(o);if(a&&l){const u=n?n.getImmediateChild(o):null,d=Ng(r,o);i=i.concat(Dg(l,a,u,d))}return s&&(i=i.concat(Ac(s,t,r,n))),i}}function Lg(t,e,n,r){const s=e.get(J());n==null&&s!=null&&(n=gn(s,J()));let i=[];return e.children.inorderTraversal((o,l)=>{const a=n?n.getImmediateChild(o):null,u=Ng(r,o),d=t.operationForChild(o);d&&(i=i.concat(Lg(d,l,a,u)))}),s&&(i=i.concat(Ac(s,t,r,n))),i}function Fg(t,e){const n=e.query,r=qs(t,n);return{hashFn:()=>(o1(e)||L.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return r?w1(t,n._path,r):x1(t,n._path);{const i=Ex(s,n);return Do(t,n,null,i)}}}}function qs(t,e){const n=ol(e);return t.queryToTagMap.get(n)}function ol(t){return t._path.toString()+"$"+t._queryIdentifier}function Oc(t,e){return t.tagToQueryMap.get(e)}function jc(t){const e=t.indexOf("$");return I(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new ee(t.substr(0,e))}}function Dc(t,e,n){const r=t.syncPointTree_.get(e);I(r,"Missing sync point for query tag that we're tracking");const s=rl(t.pendingWriteTree_,e);return Ac(r,n,s,null)}function C1(t){return t.fold((e,n,r)=>{if(n&&wn(n))return[sl(n)];{let s=[];return n&&(s=Ag(n)),$e(r,(i,o)=>{s=s.concat(o)}),s}})}function Es(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(v1())(t._repo,t._path):t}function N1(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const s=ol(r),i=t.queryToTagMap.get(s);t.queryToTagMap.delete(s),t.tagToQueryMap.delete(i)}}}function k1(){return y1++}function T1(t,e,n){const r=e._path,s=qs(t,e),i=Fg(t,n),o=t.listenProvider_.startListening(Es(e),s,i.hashFn,i.onComplete),l=t.syncPointTree_.subtree(r);if(s)I(!wn(l.value),"If we're adding a query, it shouldn't be shadowed");else{const a=l.fold((u,d,f)=>{if(!U(u)&&d&&wn(d))return[sl(d).query];{let h=[];return d&&(h=h.concat(Ag(d).map(v=>v.query))),$e(f,(v,_)=>{h=h.concat(_)}),h}});for(let u=0;u<a.length;++u){const d=a[u];t.listenProvider_.stopListening(Es(d),qs(t,d))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new Lc(n)}node(){return this.node_}}class Fc{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=xe(this.path_,e);return new Fc(this.syncTree_,n)}node(){return il(this.syncTree_,this.path_)}}const I1=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},Yf=function(t,e,n){if(!t||typeof t!="object")return t;if(I(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return b1(t[".sv"],e,n);if(typeof t[".sv"]=="object")return R1(t[".sv"],e);I(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},b1=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:I(!1,"Unexpected server value: "+t)}},R1=function(t,e,n){t.hasOwnProperty("increment")||I(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&I(!1,"Unexpected increment value: "+r);const s=e.node();if(I(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return r;const o=s.getValue();return typeof o!="number"?r:o+r},P1=function(t,e,n,r){return $c(e,new Fc(n,t),r)},zc=function(t,e,n){return $c(t,new Lc(e),n)};function $c(t,e,n){const r=t.getPriority().val(),s=Yf(r,e.getImmediateChild(".priority"),n);let i;if(t.isLeafNode()){const o=t,l=Yf(o.getValue(),e,n);return l!==o.getValue()||s!==o.getPriority().val()?new Te(l,ye(s)):t}else{const o=t;return i=o,s!==o.getPriority().val()&&(i=i.updatePriority(new Te(s))),o.forEachChild(de,(l,a)=>{const u=$c(a,e.getImmediateChild(l),n);u!==a&&(i=i.updateImmediateChild(l,u))}),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function ll(t,e){let n=e instanceof ee?e:new ee(e),r=t,s=W(n);for(;s!==null;){const i=Hn(r.node.children,s)||{children:{},childCount:0};r=new Wc(s,r,i),n=ne(n),s=W(n)}return r}function Zn(t){return t.node.value}function Hc(t,e){t.node.value=e,mu(t)}function zg(t){return t.node.childCount>0}function A1(t){return Zn(t)===void 0&&!zg(t)}function al(t,e){$e(t.node.children,(n,r)=>{e(new Wc(n,t,r))})}function $g(t,e,n,r){n&&e(t),al(t,s=>{$g(s,e,!0)})}function M1(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function ui(t){return new ee(t.parent===null?t.name:ui(t.parent)+"/"+t.name)}function mu(t){t.parent!==null&&O1(t.parent,t.name,t)}function O1(t,e,n){const r=A1(n),s=Nt(t.node.children,e);r&&s?(delete t.node.children[e],t.node.childCount--,mu(t)):!r&&!s&&(t.node.children[e]=n.node,t.node.childCount++,mu(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j1=/[\[\].#$\/\u0000-\u001F\u007F]/,D1=/[\[\].#$\u0000-\u001F\u007F]/,Kl=10*1024*1024,Uc=function(t){return typeof t=="string"&&t.length!==0&&!j1.test(t)},Wg=function(t){return typeof t=="string"&&t.length!==0&&!D1.test(t)},L1=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Wg(t)},Bc=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!el(t)||t&&typeof t=="object"&&Nt(t,".sv")},gu=function(t,e,n,r){ci(Mr(t,"value"),e,n)},ci=function(t,e,n){const r=n instanceof ee?new nw(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+bn(r));if(typeof e=="function")throw new Error(t+"contains a function "+bn(r)+" with contents = "+e.toString());if(el(e))throw new Error(t+"contains "+e.toString()+" "+bn(r));if(typeof e=="string"&&e.length>Kl/3&&Zo(e)>Kl)throw new Error(t+"contains a string greater than "+Kl+" utf8 bytes "+bn(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,i=!1;if($e(e,(o,l)=>{if(o===".value")s=!0;else if(o!==".priority"&&o!==".sv"&&(i=!0,!Uc(o)))throw new Error(t+" contains an invalid key ("+o+") "+bn(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);rw(r,o),ci(t,l,r),sw(r)}),s&&i)throw new Error(t+' contains ".value" child '+bn(r)+" in addition to actual children.")}},F1=function(t,e){let n,r;for(n=0;n<e.length;n++){r=e[n];const i=Bs(r);for(let o=0;o<i.length;o++)if(!(i[o]===".priority"&&o===i.length-1)){if(!Uc(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(tw);let s=null;for(n=0;n<e.length;n++){if(r=e[n],s!==null&&ut(s,r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}},z1=function(t,e,n,r){const s=Mr(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(s+" must be an object containing the children to replace.");const i=[];$e(e,(o,l)=>{const a=new ee(o);if(ci(s,l,xe(n,a)),wc(a)===".priority"&&!Bc(l))throw new Error(s+"contains an invalid value for '"+a.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");i.push(a)}),F1(s,i)},$1=function(t,e,n){if(el(e))throw new Error(Mr(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Bc(e))throw new Error(Mr(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")},Hg=function(t,e,n,r){if(!Wg(n))throw new Error(Mr(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},W1=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Hg(t,e,n)},gr=function(t,e){if(W(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},H1=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Uc(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!L1(n))throw new Error(Mr(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Vc(t,e){let n=null;for(let r=0;r<e.length;r++){const s=e[r],i=s.getPath();n!==null&&!Ec(i,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:i}),n.events.push(s)}n&&t.eventLists_.push(n)}function Ug(t,e,n){Vc(t,n),Bg(t,r=>Ec(r,e))}function Ct(t,e,n){Vc(t,n),Bg(t,r=>ut(r,e)||ut(e,r))}function Bg(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const s=t.eventLists_[r];if(s){const i=s.path;e(i)?(B1(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function B1(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();ys&&Ae("event: "+n.toString()),Ur(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V1="repo_interrupt",G1=25;class Y1{constructor(e,n,r,s){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new U1,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Io(),this.transactionQueueTree_=new Wc,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Q1(t,e,n){if(t.stats_=_c(t.repoInfo_),t.forceRestClient_||kx())t.server_=new To(t.repoInfo_,(r,s,i,o)=>{Qf(t,r,s,i,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>Kf(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Ne(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Ht(t.repoInfo_,e,(r,s,i,o)=>{Qf(t,r,s,i,o)},r=>{Kf(t,r)},r=>{q1(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=Px(t.repoInfo_,()=>new Rw(t.stats_,t.server_)),t.infoData_=new Nw,t.infoSyncTree_=new Gf({startListening:(r,s,i,o)=>{let l=[];const a=t.infoData_.getNode(r._path);return a.isEmpty()||(l=li(t.infoSyncTree_,r._path,a),setTimeout(()=>{o("ok")},0)),l},stopListening:()=>{}}),Gc(t,"connected",!1),t.serverSyncTree_=new Gf({startListening:(r,s,i,o)=>(t.server_.listen(r,i,s,(l,a)=>{const u=o(l,a);Ct(t.eventQueue_,r._path,u)}),[]),stopListening:(r,s)=>{t.server_.unlisten(r,s)}})}function K1(t){const n=t.infoData_.getNode(new ee(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function ul(t){return I1({timestamp:K1(t)})}function Qf(t,e,n,r,s){t.dataUpdateCount++;const i=new ee(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(s)if(r){const a=wo(n,u=>ye(u));o=E1(t.serverSyncTree_,i,a,s)}else{const a=ye(n);o=jg(t.serverSyncTree_,i,a,s)}else if(r){const a=wo(n,u=>ye(u));o=_1(t.serverSyncTree_,i,a)}else{const a=ye(n);o=li(t.serverSyncTree_,i,a)}let l=i;o.length>0&&(l=dl(t,i)),Ct(t.eventQueue_,l,o)}function Kf(t,e){Gc(t,"connected",e),e===!1&&Z1(t)}function q1(t,e){$e(e,(n,r)=>{Gc(t,n,r)})}function Gc(t,e,n){const r=new ee("/.info/"+e),s=ye(n);t.infoData_.updateSnapshot(r,s);const i=li(t.infoSyncTree_,r,s);Ct(t.eventQueue_,r,i)}function Yc(t){return t.nextWriteId_++}function X1(t,e,n){const r=S1(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(s=>{const i=ye(s).withIndex(e._queryParams.getIndex());pu(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=li(t.serverSyncTree_,e._path,i);else{const l=qs(t.serverSyncTree_,e);o=jg(t.serverSyncTree_,e._path,i,l)}return Ct(t.eventQueue_,e._path,o),Do(t.serverSyncTree_,e,n,null,!0),i},s=>(di(t,"get for query "+Ne(e)+" failed: "+s),Promise.reject(new Error(s))))}function J1(t,e,n,r,s){di(t,"set",{path:e.toString(),value:n,priority:r});const i=ul(t),o=ye(n,r),l=il(t.serverSyncTree_,e),a=zc(o,l,i),u=Yc(t),d=Mc(t.serverSyncTree_,e,a,u,!0);Vc(t.eventQueue_,d),t.server_.put(e.toString(),o.val(!0),(h,v)=>{const _=h==="ok";_||Je("set at "+e+" failed: "+h);const x=On(t.serverSyncTree_,u,!_);Ct(t.eventQueue_,e,x),Lr(t,s,h,v)});const f=Qg(t,e);dl(t,f),Ct(t.eventQueue_,f,[])}function Z1(t){di(t,"onDisconnectEvents");const e=ul(t),n=Io();uu(t.onDisconnect_,J(),(s,i)=>{const o=P1(s,i,t.serverSyncTree_,e);Br(n,s,o)});let r=[];uu(n,J(),(s,i)=>{r=r.concat(li(t.serverSyncTree_,s,i));const o=Qg(t,s);dl(t,o)}),t.onDisconnect_=Io(),Ct(t.eventQueue_,J(),r)}function eE(t,e,n){t.server_.onDisconnectCancel(e.toString(),(r,s)=>{r==="ok"&&au(t.onDisconnect_,e),Lr(t,n,r,s)})}function qf(t,e,n,r){const s=ye(n);t.server_.onDisconnectPut(e.toString(),s.val(!0),(i,o)=>{i==="ok"&&Br(t.onDisconnect_,e,s),Lr(t,r,i,o)})}function tE(t,e,n,r,s){const i=ye(n,r);t.server_.onDisconnectPut(e.toString(),i.val(!0),(o,l)=>{o==="ok"&&Br(t.onDisconnect_,e,i),Lr(t,s,o,l)})}function nE(t,e,n,r){if(Ja(n)){Ae("onDisconnect().update() called with empty data.  Don't do anything."),Lr(t,r,"ok",void 0);return}t.server_.onDisconnectMerge(e.toString(),n,(s,i)=>{s==="ok"&&$e(n,(o,l)=>{const a=ye(l);Br(t.onDisconnect_,xe(e,o),a)}),Lr(t,r,s,i)})}function rE(t,e,n){let r;W(e._path)===".info"?r=pu(t.infoSyncTree_,e,n):r=pu(t.serverSyncTree_,e,n),Ug(t.eventQueue_,e._path,r)}function sE(t,e,n){let r;W(e._path)===".info"?r=Do(t.infoSyncTree_,e,n):r=Do(t.serverSyncTree_,e,n),Ug(t.eventQueue_,e._path,r)}function iE(t){t.persistentConnection_&&t.persistentConnection_.interrupt(V1)}function di(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Ae(n,...e)}function Lr(t,e,n,r){e&&Ur(()=>{if(n==="ok")e(null);else{const s=(n||"error").toUpperCase();let i=s;r&&(i+=": "+r);const o=new Error(i);o.code=s,e(o)}})}function oE(t,e,n,r,s,i){di(t,"transaction on "+e);const o={path:e,update:n,onComplete:r,status:null,order:Bm(),applyLocally:i,retryCount:0,unwatcher:s,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},l=Qc(t,e,void 0);o.currentInputSnapshot=l;const a=o.update(l.val());if(a===void 0)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{ci("transaction failed: Data returned ",a,o.path),o.status=0;const u=ll(t.transactionQueueTree_,e),d=Zn(u)||[];d.push(o),Hc(u,d);let f;typeof a=="object"&&a!==null&&Nt(a,".priority")?(f=Hn(a,".priority"),I(Bc(f),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):f=(il(t.serverSyncTree_,e)||L.EMPTY_NODE).getPriority().val();const h=ul(t),v=ye(a,f),_=zc(v,l,h);o.currentOutputSnapshotRaw=v,o.currentOutputSnapshotResolved=_,o.currentWriteId=Yc(t);const x=Mc(t.serverSyncTree_,e,_,o.currentWriteId,o.applyLocally);Ct(t.eventQueue_,e,x),cl(t,t.transactionQueueTree_)}}function Qc(t,e,n){return il(t.serverSyncTree_,e,n)||L.EMPTY_NODE}function cl(t,e=t.transactionQueueTree_){if(e||fl(t,e),Zn(e)){const n=Gg(t,e);I(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&lE(t,ui(e),n)}else zg(e)&&al(e,n=>{cl(t,n)})}function lE(t,e,n){const r=n.map(u=>u.currentWriteId),s=Qc(t,e,r);let i=s;const o=s.hash();for(let u=0;u<n.length;u++){const d=n[u];I(d.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),d.status=1,d.retryCount++;const f=He(e,d.path);i=i.updateChild(f,d.currentOutputSnapshotRaw)}const l=i.val(!0),a=e;t.server_.put(a.toString(),l,u=>{di(t,"transaction put response",{path:a.toString(),status:u});let d=[];if(u==="ok"){const f=[];for(let h=0;h<n.length;h++)n[h].status=2,d=d.concat(On(t.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&f.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();fl(t,ll(t.transactionQueueTree_,e)),cl(t,t.transactionQueueTree_),Ct(t.eventQueue_,e,d);for(let h=0;h<f.length;h++)Ur(f[h])}else{if(u==="datastale")for(let f=0;f<n.length;f++)n[f].status===3?n[f].status=4:n[f].status=0;else{Je("transaction at "+a.toString()+" failed: "+u);for(let f=0;f<n.length;f++)n[f].status=4,n[f].abortReason=u}dl(t,e)}},o)}function dl(t,e){const n=Vg(t,e),r=ui(n),s=Gg(t,n);return aE(t,s,r),r}function aE(t,e,n){if(e.length===0)return;const r=[];let s=[];const o=e.filter(l=>l.status===0).map(l=>l.currentWriteId);for(let l=0;l<e.length;l++){const a=e[l],u=He(n,a.path);let d=!1,f;if(I(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),a.status===4)d=!0,f=a.abortReason,s=s.concat(On(t.serverSyncTree_,a.currentWriteId,!0));else if(a.status===0)if(a.retryCount>=G1)d=!0,f="maxretry",s=s.concat(On(t.serverSyncTree_,a.currentWriteId,!0));else{const h=Qc(t,a.path,o);a.currentInputSnapshot=h;const v=e[l].update(h.val());if(v!==void 0){ci("transaction failed: Data returned ",v,a.path);let _=ye(v);typeof v=="object"&&v!=null&&Nt(v,".priority")||(_=_.updatePriority(h.getPriority()));const N=a.currentWriteId,m=ul(t),p=zc(_,h,m);a.currentOutputSnapshotRaw=_,a.currentOutputSnapshotResolved=p,a.currentWriteId=Yc(t),o.splice(o.indexOf(N),1),s=s.concat(Mc(t.serverSyncTree_,a.path,p,a.currentWriteId,a.applyLocally)),s=s.concat(On(t.serverSyncTree_,N,!0))}else d=!0,f="nodata",s=s.concat(On(t.serverSyncTree_,a.currentWriteId,!0))}Ct(t.eventQueue_,n,s),s=[],d&&(e[l].status=2,function(h){setTimeout(h,Math.floor(0))}(e[l].unwatcher),e[l].onComplete&&(f==="nodata"?r.push(()=>e[l].onComplete(null,!1,e[l].currentInputSnapshot)):r.push(()=>e[l].onComplete(new Error(f),!1,null))))}fl(t,t.transactionQueueTree_);for(let l=0;l<r.length;l++)Ur(r[l]);cl(t,t.transactionQueueTree_)}function Vg(t,e){let n,r=t.transactionQueueTree_;for(n=W(e);n!==null&&Zn(r)===void 0;)r=ll(r,n),e=ne(e),n=W(e);return r}function Gg(t,e){const n=[];return Yg(t,e,n),n.sort((r,s)=>r.order-s.order),n}function Yg(t,e,n){const r=Zn(e);if(r)for(let s=0;s<r.length;s++)n.push(r[s]);al(e,s=>{Yg(t,s,n)})}function fl(t,e){const n=Zn(e);if(n){let r=0;for(let s=0;s<n.length;s++)n[s].status!==2&&(n[r]=n[s],r++);n.length=r,Hc(e,n.length>0?n:void 0)}al(e,r=>{fl(t,r)})}function Qg(t,e){const n=ui(Vg(t,e)),r=ll(t.transactionQueueTree_,e);return M1(r,s=>{ql(t,s)}),ql(t,r),$g(r,s=>{ql(t,s)}),n}function ql(t,e){const n=Zn(e);if(n){const r=[];let s=[],i=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(I(i===o-1,"All SENT items should be at beginning of queue."),i=o,n[o].status=3,n[o].abortReason="set"):(I(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),s=s.concat(On(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));i===-1?Hc(e,void 0):n.length=i+1,Ct(t.eventQueue_,ui(e),s);for(let o=0;o<r.length;o++)Ur(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uE(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let s=n[r];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function cE(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Je(`Invalid query segment '${n}' in query '${t}'`)}return e}const Xf=function(t,e){const n=dE(t),r=n.namespace;n.domain==="firebase.com"&&Qt(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Qt("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||vx();const s=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new rg(n.host,n.secure,r,s,e,"",r!==n.subdomain),path:new ee(n.pathString)}},dE=function(t){let e="",n="",r="",s="",i="",o=!0,l="https",a=443;if(typeof t=="string"){let u=t.indexOf("//");u>=0&&(l=t.substring(0,u-1),t=t.substring(u+2));let d=t.indexOf("/");d===-1&&(d=t.length);let f=t.indexOf("?");f===-1&&(f=t.length),e=t.substring(0,Math.min(d,f)),d<f&&(s=uE(t.substring(d,f)));const h=cE(t.substring(Math.min(t.length,f)));u=e.indexOf(":"),u>=0?(o=l==="https"||l==="wss",a=parseInt(e.substring(u+1),10)):u=e.length;const v=e.slice(0,u);if(v.toLowerCase()==="localhost")n="localhost";else if(v.split(".").length<=2)n=v;else{const _=e.indexOf(".");r=e.substring(0,_).toLowerCase(),n=e.substring(_+1),i=r}"ns"in h&&(i=h.ns)}return{host:e,port:a,domain:n,subdomain:r,secure:o,scheme:l,pathString:s,namespace:i}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{constructor(e,n,r,s){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=s}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Ne(this.snapshot.exportVal())}}class hE{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kg{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return I(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pE{constructor(e,n){this._repo=e,this._path=n}cancel(){const e=new Rt;return eE(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){gr("OnDisconnect.remove",this._path);const e=new Rt;return qf(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){gr("OnDisconnect.set",this._path),gu("OnDisconnect.set",e,this._path);const n=new Rt;return qf(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}setWithPriority(e,n){gr("OnDisconnect.setWithPriority",this._path),gu("OnDisconnect.setWithPriority",e,this._path),$1("OnDisconnect.setWithPriority",n);const r=new Rt;return tE(this._repo,this._path,e,n,r.wrapCallback(()=>{})),r.promise}update(e){gr("OnDisconnect.update",this._path),z1("OnDisconnect.update",e,this._path);const n=new Rt;return nE(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(e,n,r,s){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=s}get key(){return U(this._path)?null:wc(this._path)}get ref(){return new Mt(this._repo,this._path)}get _queryIdentifier(){const e=jf(this._queryParams),n=vc(e);return n==="{}"?"default":n}get _queryObject(){return jf(this._queryParams)}isEqual(e){if(e=Nn(e),!(e instanceof Kc))return!1;const n=this._repo===e._repo,r=Ec(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return n&&r&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+ew(this._path)}}class Mt extends Kc{constructor(e,n){super(e,n,new kc,!1)}get parent(){const e=fg(this._path);return e===null?null:new Mt(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Fr{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new ee(e),r=Xs(this.ref,e);return new Fr(this._node.getChild(n),r,de)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,s)=>e(new Fr(s,Xs(this.ref,r),de)))}hasChild(e){const n=new ee(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function fe(t,e){return t=Nn(t),t._checkNotDeleted("ref"),e!==void 0?Xs(t._root,e):t._root}function Xs(t,e){return t=Nn(t),W(t._path)===null?W1("child","path",e):Hg("child","path",e),new Mt(t._repo,xe(t._path,e))}function mE(t){return t=Nn(t),new pE(t._repo,t._path)}function ht(t,e){t=Nn(t),gr("set",t._path),gu("set",e,t._path);const n=new Rt;return J1(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function qg(t){t=Nn(t);const e=new Kg(()=>{}),n=new hl(e);return X1(t._repo,t,n).then(r=>new Fr(r,new Mt(t._repo,t._path),t._queryParams.getIndex()))}class hl{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new fE("value",this,new Fr(e.snapshotNode,new Mt(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new hE(this,e,n):null}matches(e){return e instanceof hl?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function gE(t,e,n,r,s){const i=new Kg(n,void 0),o=new hl(i);return rE(t._repo,t,o),()=>sE(t._repo,t,o)}function Ot(t,e,n,r){return gE(t,"value",e)}d1(Mt);g1(Mt);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vE="FIREBASE_DATABASE_EMULATOR_HOST",vu={};let yE=!1;function _E(t,e,n,r){t.repoInfo_=new rg(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function xE(t,e,n,r,s){let i=r||t.options.databaseURL;i===void 0&&(t.options.projectId||Qt("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ae("Using default host for project ",t.options.projectId),i=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=Xf(i,s),l=o.repoInfo,a;typeof process<"u"&&vf&&(a=vf[vE]),a?(i=`http://${a}?ns=${l.namespace}`,o=Xf(i,s),l=o.repoInfo):o.repoInfo.secure;const u=new Ix(t.name,t.options,e);H1("Invalid Firebase Database URL",o),U(o.path)||Qt("Database URL must point to the root of a Firebase Database (not including a child path).");const d=EE(l,t,u,new Tx(t.name,n));return new SE(d,t)}function wE(t,e){const n=vu[e];(!n||n[t.key]!==t)&&Qt(`Database ${e}(${t.repoInfo_}) has already been deleted.`),iE(t),delete n[t.key]}function EE(t,e,n,r){let s=vu[e.name];s||(s={},vu[e.name]=s);let i=s[t.toURLString()];return i&&Qt("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new Y1(t,yE,n,r),s[t.toURLString()]=i,i}class SE{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Q1(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Mt(this._repo,J())),this._rootInternal}_delete(){return this._rootInternal!==null&&(wE(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Qt("Cannot call "+e+" on a deleted database.")}}function CE(t=ex(),e){const n=q_(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=zy("database");r&&NE(n,...r)}return n}function NE(t,e,n,r={}){t=Nn(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Qt("Cannot call useEmulator() after instance has already been initialized.");const s=t._repoInternal;let i;if(s.repoInfo_.nodeAdmin)r.mockUserToken&&Qt('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),i=new Qi(Qi.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:$y(r.mockUserToken,t.app.options.projectId);i=new Qi(o)}_E(s,e,n,i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kE(t){fx(Z_),So(new Ws("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return xE(r,s,i,n)},"PUBLIC").setMultipleInstances(!0)),Sr(yf,_f,t),Sr(yf,_f,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE{constructor(e,n){this.committed=e,this.snapshot=n}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}function IE(t,e,n){var r;if(t=Nn(t),gr("Reference.transaction",t._path),t.key===".length"||t.key===".keys")throw"Reference.transaction failed: "+t.key+" is a read-only object.";const s=(r=void 0)!==null&&r!==void 0?r:!0,i=new Rt,o=(a,u,d)=>{let f=null;a?i.reject(a):(f=new Fr(d,new Mt(t._repo,t._path),de),i.resolve(new TE(u,f)))},l=Ot(t,()=>{});return oE(t._repo,t._path,e,o,l,s),i.promise}Ht.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Ht.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};kE();const bE={apiKey:"AIzaSyA1dOqowN6zPTIrk4A-7ckTl325bQgVGyI",authDomain:"aminedotink.firebaseapp.com",databaseURL:"https://aminedotink-default-rtdb.firebaseio.com",projectId:"aminedotink",storageBucket:"aminedotink.firebasestorage.app",messagingSenderId:"154560363228",appId:"1:154560363228:web:57107df3a5716bdbc45219",measurementId:"G-6LQ52X09TG"},RE=zm(bE),he=CE(RE),z="AMINE_HASNAE_UNO_V1",Jf=async t=>{await ht(fe(he,`config/${z}/activeGame`),t)},PE=t=>Ot(fe(he,`config/${z}/activeGame`),e=>{t(e.val()||null)}),Zf=async(t,e)=>{await ht(fe(he,`config/${z}/selections/${t}`),e)},AE=t=>Ot(fe(he,`config/${z}/selections`),e=>{t(e.val())}),ME=async()=>{await ht(fe(he,`config/${z}/selections`),null)},Xl=async t=>{const e=await qg(Xs(fe(he),`games/${t}`));return e.exists()?e.val():null},OE=async(t,e)=>{await ht(fe(he,`games/${t}`),e)},jE=(t,e)=>{const n=fe(he,`games/${t}`);return Ot(n,r=>{const s=r.val();e(s)})},Xt=async(t,e)=>{await ht(fe(he,`games/${t}`),e)},Jl=async(t,e)=>{await ht(fe(he,`games/${t}_CHESS`),e)},DE=(t,e)=>Ot(fe(he,`games/${t}_CHESS`),n=>{e(n.val())}),Mi=async(t,e)=>{await ht(fe(he,`games/${t}_MORRIS`),e)},LE=(t,e)=>Ot(fe(he,`games/${t}_MORRIS`),n=>{e(n.val())}),Oi=async(t,e)=>{await ht(fe(he,`games/${t}_TTT_MOVE`),e)},FE=(t,e)=>Ot(fe(he,`games/${t}_TTT_MOVE`),n=>{e(n.val())}),Zl=async(t,e)=>{await ht(fe(he,`games/${t}_PARTSHI`),e)},zE=(t,e)=>Ot(fe(he,`games/${t}_PARTSHI`),n=>{e(n.val())}),$E=async t=>{const e=await qg(Xs(fe(he),`config/${z}/pins/${t}`));return e.exists()?e.val():null},WE=async(t,e)=>{await ht(fe(he,`config/${z}/pins/${t}`),e)},HE=t=>{const e=fe(he,`config/${z}/presence/${t}`);ht(e,!0),mE(e).set(!1)},UE=t=>{const e=fe(he,`config/${z}/presence/${t}`);ht(e,!1)},BE=t=>{const e=fe(he,`config/${z}/presence`);return Ot(e,n=>{t(n.val())})},Gn=(t,e)=>{const n=fe(he,`config/${z}/scores/${t}/${e}`);IE(n,r=>(r||0)+1)},Vr=t=>Ot(fe(he,`config/${z}/scores`),e=>{t(e.val())});var K=(t=>(t.Red="RED",t.Blue="BLUE",t.Green="GREEN",t.Yellow="YELLOW",t.Wild="WILD",t))(K||{}),q=(t=>(t.Zero="0",t.One="1",t.Two="2",t.Three="3",t.Four="4",t.Five="5",t.Six="6",t.Seven="7",t.Eight="8",t.Nine="9",t.Skip="SKIP",t.Reverse="REVERSE",t.DrawTwo="DRAW_TWO",t.Wild="WILD",t.WildDrawFour="WILD_DRAW_FOUR",t))(q||{}),nr=(t=>(t.Setup="SETUP",t.TurnStart="TURN_START",t.TurnAction="TURN_ACTION",t.Finished="FINISHED",t))(nr||{});const VE=[K.Red,K.Blue,K.Green,K.Yellow],GE=()=>{let t=[],e=0;VE.forEach(n=>{t.push({id:`c-${e++}`,color:n,value:q.Zero}),[q.One,q.Two,q.Three,q.Four,q.Five,q.Six,q.Seven,q.Eight,q.Nine,q.Skip,q.Reverse,q.DrawTwo].forEach(s=>{t.push({id:`c-${e++}`,color:n,value:s}),t.push({id:`c-${e++}`,color:n,value:s})})});for(let n=0;n<4;n++)t.push({id:`c-${e++}`,color:K.Wild,value:q.Wild}),t.push({id:`c-${e++}`,color:K.Wild,value:q.WildDrawFour});return yu(t)},yu=t=>{const e=[...t];for(let n=e.length-1;n>0;n--){const r=Math.floor(Math.random()*(n+1));[e[n],e[r]]=[e[r],e[n]]}return e},ea=(t,e,n)=>t.color===K.Wild||t.color===n||t.value===e.value;/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var YE={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QE=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),we=(t,e)=>{const n=O.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:a,...u},d)=>O.createElement("svg",{ref:d,...YE,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${QE(t)}`,l].join(" "),...u},[...e.map(([f,h])=>O.createElement(f,h)),...Array.isArray(a)?a:[a]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KE=we("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yn=we("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ta=we("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qE=we("Delete",[["path",{d:"M20 5H9l-7 7 7 7h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2Z",key:"1oy587"}],["line",{x1:"18",x2:"12",y1:"9",y2:"15",key:"1olkx5"}],["line",{x1:"12",x2:"18",y1:"9",y2:"15",key:"1n50pc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XE=we("Dices",[["rect",{width:"12",height:"12",x:"2",y:"10",rx:"2",ry:"2",key:"6agr2n"}],["path",{d:"m17.92 14 3.5-3.5a2.24 2.24 0 0 0 0-3l-5-4.92a2.24 2.24 0 0 0-3 0L10 6",key:"1o487t"}],["path",{d:"M6 18h.01",key:"uhywen"}],["path",{d:"M10 14h.01",key:"ssrbsk"}],["path",{d:"M15 6h.01",key:"cblpky"}],["path",{d:"M18 9h.01",key:"2061c0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JE=we("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZE=we("Grip",[["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"19",cy:"5",r:"1",key:"w8mnmm"}],["circle",{cx:"5",cy:"5",r:"1",key:"lttvr7"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}],["circle",{cx:"19",cy:"19",r:"1",key:"shf9b7"}],["circle",{cx:"5",cy:"19",r:"1",key:"bfqh0e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eS=we("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tS=we("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fi=we("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nS=we("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _u=we("Move",[["polyline",{points:"5 9 2 12 5 15",key:"1r5uj5"}],["polyline",{points:"9 5 12 2 15 5",key:"5v383o"}],["polyline",{points:"15 19 12 22 9 19",key:"g7qi8m"}],["polyline",{points:"19 9 22 12 19 15",key:"tpp73q"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eh=we("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qn=we("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rS=we("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sS=we("Spade",[["path",{d:"M5 9c-1.5 1.5-3 3.2-3 5.5A5.5 5.5 0 0 0 7.5 20c1.8 0 3-.5 4.5-2 1.5 1.5 2.7 2 4.5 2a5.5 5.5 0 0 0 5.5-5.5c0-2.3-1.5-4-3-5.5l-7-7-7 7Z",key:"40bo9n"}],["path",{d:"M12 18v4",key:"jadmvz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iS=we("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oS=we("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hi=we("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lS=we("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const na=we("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),ji=({card:t,onClick:e,isHidden:n,isPlayable:r,className:s,style:i})=>{if(n||!t)return c.jsxs("div",{className:`w-24 h-36 rounded-xl border-2 border-stone-700 flex items-center justify-center shadow-2xl bg-stone-800 relative overflow-hidden ${s}`,style:i,children:[c.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-stone-700 to-stone-900 opacity-50"}),c.jsx("div",{className:"w-16 h-24 rounded-full border-4 border-stone-700 rotate-12 flex items-center justify-center bg-stone-800 z-10",children:c.jsx("span",{className:"font-black text-stone-600 tracking-widest text-xl -rotate-12 select-none",children:"UNO"})})]});const o=t.color===K.Wild,l=[q.Skip,q.Reverse,q.DrawTwo].includes(t.value),a=f=>{switch(f){case K.Red:return"bg-gradient-to-br from-rose-500 to-red-700 text-white border-rose-800";case K.Blue:return"bg-gradient-to-br from-blue-500 to-blue-700 text-white border-blue-800";case K.Green:return"bg-gradient-to-br from-emerald-500 to-emerald-700 text-white border-emerald-800";case K.Yellow:return"bg-gradient-to-br from-amber-300 to-amber-500 text-black border-amber-600";case K.Wild:return"bg-[conic-gradient(at_center,_var(--tw-gradient-stops))] from-rose-500 via-amber-400 via-emerald-500 via-blue-500 to-rose-500 text-white border-stone-800";default:return"bg-stone-700"}},u=()=>{switch(t.value){case q.Skip:return c.jsx(KE,{size:32,strokeWidth:3,className:"drop-shadow-md"});case q.Reverse:return c.jsx(Qn,{size:32,strokeWidth:3,className:"drop-shadow-md"});case q.DrawTwo:return c.jsxs("div",{className:"flex items-center font-black text-4xl drop-shadow-md",children:[c.jsx(eh,{size:24,strokeWidth:4}),"2"]});case q.WildDrawFour:return c.jsxs("div",{className:"flex flex-col items-center drop-shadow-md",children:[c.jsxs("div",{className:"flex items-center font-black text-4xl relative z-10",children:[c.jsx(eh,{size:24,strokeWidth:4}),"4"]}),c.jsxs("div",{className:"flex gap-0.5 mt-1",children:[c.jsx("div",{className:"w-2 h-3 bg-rose-500 rounded-sm"}),c.jsx("div",{className:"w-2 h-3 bg-blue-500 rounded-sm"}),c.jsx("div",{className:"w-2 h-3 bg-emerald-500 rounded-sm"}),c.jsx("div",{className:"w-2 h-3 bg-amber-400 rounded-sm"})]})]});case q.Wild:return c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx(iS,{size:32,className:"mb-1 drop-shadow-md"}),c.jsx("span",{className:"font-black tracking-widest text-sm uppercase",children:"Wild"})]});default:return c.jsx("span",{className:"text-5xl font-black drop-shadow-md select-none",children:t.value})}},d=()=>t.value===q.Wild||t.value===q.WildDrawFour?"W":t.value===q.DrawTwo?"+2":t.value===q.Skip?"":t.value===q.Reverse?"":t.value;return c.jsxs("div",{onClick:r?e:void 0,style:i,className:`
        relative w-24 h-36 rounded-xl border-b-[6px] border-r-2 border-l-2 border-t-2 flex items-center justify-center shadow-lg transition-all duration-200
        ${a(t.color)}
        ${r?"cursor-pointer hover:-translate-y-6 hover:scale-110 hover:brightness-110 z-0 hover:z-50":""}
        ${!r&&!n?"opacity-100":""}
        ${s}
      `,children:[l&&!o&&c.jsx("div",{className:"absolute inset-0 opacity-10 bg-[radial-gradient(circle_at_top_right,_var(--tw-gradient-stops))] from-white to-transparent"}),c.jsx("div",{className:"absolute top-1.5 left-2 text-sm font-black opacity-90 drop-shadow-sm",children:d()}),c.jsx("div",{className:`${t.color===K.Yellow&&!o?"text-black":"text-white"}`,children:u()}),c.jsx("div",{className:"absolute bottom-1.5 right-2 text-sm font-black opacity-90 rotate-180 drop-shadow-sm",children:d()})]})},th=7,aS={id:0,name:"Amine"},uS={id:1,name:"Hasnae"},cS=["","","","","","","",""],dS=()=>{const t=O.useRef(null);return O.useEffect(()=>{const e=t.current;if(!e)return;const n=e.getContext("2d");if(!n)return;e.width=window.innerWidth,e.height=window.innerHeight;const r=[],s=["#f43f5e","#3b82f6","#10b981","#fbbf24","#a855f7","#ffffff"];for(let u=0;u<300;u++)r.push({x:Math.random()*e.width,y:Math.random()*e.height-e.height,r:Math.random()*6+4,d:Math.random()*30+10,color:s[Math.floor(Math.random()*s.length)],tilt:Math.floor(Math.random()*10)-10,tiltAngle:0,tiltAngleIncremental:Math.random()*.07+.05});let i,o=0;const l=()=>{n&&(n.clearRect(0,0,e.width,e.height),o+=.01,r.forEach((u,d)=>{u.tiltAngle+=u.tiltAngleIncremental,u.y+=(Math.cos(o+u.d)+3+u.r/2)*.5,u.x+=Math.sin(o),u.tilt=Math.sin(u.tiltAngle)*15,u.y>e.height&&(r[d]={x:Math.random()*e.width,y:-10,r:u.r,d:u.d,color:u.color,tilt:u.tilt,tiltAngle:u.tiltAngle,tiltAngleIncremental:u.tiltAngleIncremental}),n.beginPath(),n.lineWidth=u.r,n.strokeStyle=u.color,n.moveTo(u.x+u.tilt+u.r/2,u.y),n.lineTo(u.x+u.tilt,u.y+u.tilt+u.r*1.5),n.stroke()}),i=requestAnimationFrame(l))};l();const a=()=>{e.width=window.innerWidth,e.height=window.innerHeight};return window.addEventListener("resize",a),()=>{cancelAnimationFrame(i),window.removeEventListener("resize",a)}},[]),c.jsx("canvas",{ref:t,className:"absolute inset-0 pointer-events-none z-0"})};function fS({myPlayerId:t,onExit:e}){var P;const[n,r]=O.useState(null),[s,i]=O.useState(!1),[o,l]=O.useState(!1),[a,u]=O.useState(null),[d,f]=O.useState(null),[h,v]=O.useState(!1),_=O.useRef(null),x=O.useRef(null);O.useEffect(()=>{const w=Vr(b=>{f((b==null?void 0:b.UNO)||{Amine:0,Hasnae:0})});return()=>w()},[]);const N=async()=>{let w=GE();const b=w.splice(0,th),R=w.splice(0,th);let D=w.pop();for(;D.color===K.Wild;)w.unshift(D),w=yu(w),D=w.pop();const re={deck:w,discardPile:[D],players:[{...aS,hand:b,reaction:null,shout:null},{...uS,hand:R,reaction:null,shout:null}],currentPlayerIndex:0,direction:1,status:nr.TurnAction,winner:null,activeColor:D.color,log:"New Game Started!"};return await OE(z,re),re},m=async w=>{if(w==null||w.preventDefault(),(n==null?void 0:n.status)===nr.Finished||window.confirm("Are you sure you want to start a new game?"))try{await N()}catch(R){console.error("Failed to reset game:",R),alert("Could not restart game. Please check your connection.")}},p=async w=>{if(!n||t===null)return;const b={...n};b.players[t]&&(b.players[t].reaction={emoji:w,timestamp:Date.now()}),await Xt(z,b),v(!1),_.current&&clearTimeout(_.current),_.current=setTimeout(async()=>{const R=await Xl(z);R&&R.players[t]&&(R.players[t].reaction=null,Xt(z,R))},4e3)},y=async()=>{if(!n||t===null)return;const w={...n};w.players[t]&&(w.players[t].shout={text:"wa L3EEB",timestamp:Date.now()}),await Xt(z,w),x.current&&clearTimeout(x.current),x.current=setTimeout(async()=>{const b=await Xl(z);b&&b.players[t]&&(b.players[t].shout=null,Xt(z,b))},1e3)};O.useEffect(()=>{if(t!==null){Xl(z).then(b=>{b||N()});const w=jE(z,b=>{r(b)});return()=>w()}},[t]);const g=(w,b=!1,R=!1)=>{let D=w.direction;R&&(D*=-1);let re=w.currentPlayerIndex+D*(b?2:1);const ue=w.players.length;return re=(re%ue+ue)%ue,{...w,direction:D,currentPlayerIndex:re,status:nr.TurnAction}},E=(w,b,R)=>{const D=w.players[R];for(let re=0;re<b;re++){if(w.deck.length===0)if(w.discardPile.length>1){const ue=w.discardPile.pop();w.deck=yu(w.discardPile),w.discardPile=[ue]}else break;w.deck.length>0&&D.hand.push(w.deck.pop())}},C=()=>{if(!n||n.currentPlayerIndex!==t)return;let w=JSON.parse(JSON.stringify(n));const b=w.players[t].hand.length;E(w,1,t);const R=w.players[t];if(R.hand.length===b){w.log="Deck empty, cannot draw!",w=g(w),Xt(z,w);return}const D=R.hand[R.hand.length-1];w.log=`${R.name} drew a card`,w.discardPile=w.discardPile||[];const re=w.discardPile[w.discardPile.length-1];re&&ea(D,re,w.activeColor)&&(w.log=`${R.name} drew a playable card!`),w=g(w),Xt(z,w)},S=(w,b)=>{if(!n||n.currentPlayerIndex!==t)return;let R=JSON.parse(JSON.stringify(n));R.discardPile=R.discardPile||[],R.deck=R.deck||[];const D=R.players[t];if(D.hand=D.hand||[],D.hand=D.hand.filter(je=>je.id!==w.id),D.hand.length===0){const je={...R,deck:[],discardPile:[],players:R.players.map(kt=>({...kt,hand:[]})),winner:D,status:nr.Finished,log:`${D.name} won the game!`};Xt(z,je),Gn("UNO",D.name);return}R.players[t]=D,R.discardPile.push(w),R.log=`${D.name} played ${w.value}`,D.hand.length===1&&(R.log+=" - UNO!");let re=w.color===K.Wild?b||K.Red:w.color;R.activeColor=re;let ue=!1,it=0;if(w.value===q.Reverse?R.players.length===2?ue=!0:R.direction*=-1:w.value===q.Skip?ue=!0:w.value===q.DrawTwo?(it=2,ue=!0):w.value===q.WildDrawFour&&(it=4,ue=!0),it>0){let je=R.currentPlayerIndex+R.direction*1;const kt=R.players.length;je=(je%kt+kt)%kt,E(R,it,je);const t0=R.players[je];R.log+=` - ${t0.name} +${it}`}i(!1),R=g(R,ue),Xt(z,R)},T=w=>{if(!n||n.currentPlayerIndex!==t)return;const b=n.discardPile||[],R=b[b.length-1];R&&ea(w,R,n.activeColor)&&(w.color===K.Wild?(u(w),l(!0)):S(w))};if(!n)return c.jsx("div",{className:"h-full flex items-center justify-center text-stone-500",children:"Loading Game..."});const j=n.players||[],A=j[t]||null,te=(A==null?void 0:A.hand)||[],Y=j.find(w=>w.id!==t)||null,$=(Y==null?void 0:Y.hand)||[];if(n.status===nr.Finished)return c.jsxs("div",{className:"h-screen flex flex-col items-center justify-center bg-stone-900 text-stone-100 relative overflow-hidden",children:[c.jsx(dS,{}),c.jsxs("div",{className:"relative z-10 flex flex-col items-center",children:[c.jsx(hi,{size:64,className:"text-amber-400 mb-6 animate-bounce"}),c.jsxs("h1",{className:"text-5xl font-black mb-4 tracking-tight",children:[(P=n.winner)==null?void 0:P.name," Wins!"]}),c.jsxs("div",{className:"flex gap-8 mb-8 text-2xl font-bold",children:[c.jsxs("div",{className:"text-indigo-400 flex flex-col items-center",children:[c.jsx("span",{children:"AMINE"}),c.jsx("span",{className:"text-4xl",children:(d==null?void 0:d.Amine)||0})]}),c.jsxs("div",{className:"text-rose-400 flex flex-col items-center",children:[c.jsx("span",{children:"HASNAE"}),c.jsx("span",{className:"text-4xl",children:(d==null?void 0:d.Hasnae)||0})]})]}),c.jsxs("div",{className:"flex gap-4 mt-8",children:[c.jsxs("button",{onClick:m,className:"px-8 py-4 bg-stone-100 text-stone-900 rounded-xl font-bold hover:bg-white hover:scale-105 transition-all shadow-lg flex items-center gap-2",children:[c.jsx(Qn,{size:20})," New Game"]}),c.jsx("button",{onClick:e,className:"px-8 py-4 bg-stone-800 text-stone-400 rounded-xl font-bold hover:bg-stone-700 transition-all",children:"Lobby"})]})]})]});const G=n.currentPlayerIndex===t,Q=n.discardPile||[],H=Q[Q.length-1],Se=te.length>12?"-2.5rem":te.length>7?"-2rem":"-1rem";return c.jsxs("div",{className:"h-screen w-full flex flex-col bg-stone-950 text-stone-100 relative overflow-hidden",children:[j.map(w=>w.shout?c.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center pointer-events-none animate-in fade-in zoom-in duration-300",children:c.jsx("div",{className:"bg-red-600/90 text-white font-black text-4xl px-8 py-4 rounded-3xl shadow-[0_0_100px_rgba(220,38,38,0.8)] rotate-[-5deg] animate-bounce",children:w.shout.text})},w.id):null),c.jsxs("div",{className:"h-16 flex items-center justify-between px-4 sm:px-6 border-b border-stone-800 bg-stone-900 z-10",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("button",{onClick:e,className:"text-xs font-bold text-stone-600 hover:text-stone-400 flex items-center gap-1",children:[c.jsx(Yn,{size:14})," LOBBY"]}),c.jsxs("button",{onClick:m,className:"text-xs font-bold text-stone-500 hover:text-stone-300 flex items-center gap-1 border border-stone-700 px-2 py-1 rounded hover:bg-stone-800",children:[c.jsx(Qn,{size:12})," RESTART"]}),c.jsx("div",{className:"h-4 w-px bg-stone-700 mx-2"}),c.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold text-stone-500 bg-stone-950/50 px-2 py-1 rounded border border-stone-800",children:[c.jsxs("span",{className:"text-indigo-400",children:["A: ",(d==null?void 0:d.Amine)||0]}),c.jsx("span",{className:"text-stone-600",children:"|"}),c.jsxs("span",{className:"text-rose-400",children:["H: ",(d==null?void 0:d.Hasnae)||0]})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("div",{className:"relative",children:[c.jsx("span",{className:"text-xs font-bold text-stone-500 uppercase tracking-widest",children:Y==null?void 0:Y.name}),(Y==null?void 0:Y.reaction)&&c.jsx("div",{className:"absolute -left-12 -top-2 text-4xl animate-bounce drop-shadow-lg z-50",children:Y.reaction.emoji})]}),c.jsxs("div",{className:"flex -space-x-2",children:[Array.from({length:Math.min($.length,5)}).map((w,b)=>c.jsx("div",{className:"w-5 h-7 bg-stone-700 rounded-sm border border-stone-600 shadow-sm"},b)),$.length>5&&c.jsxs("span",{className:"text-xs ml-3 text-stone-500 font-bold",children:["+",$.length-5]})]})]})]}),c.jsxs("div",{className:`flex-1 flex flex-col items-center justify-center relative transition-colors duration-1000 ${G?"bg-gradient-to-b from-stone-900 to-stone-900":"bg-stone-950 opacity-90"}`,children:[c.jsx("div",{className:"mb-12 animate-in fade-in slide-in-from-top-4 duration-500 z-20",children:c.jsx("span",{className:"text-xs font-bold text-stone-400 uppercase tracking-widest bg-stone-900/50 px-6 py-2 rounded-full border border-stone-800/50 backdrop-blur-sm shadow-xl",children:n.log})}),c.jsxs("div",{className:"flex items-center gap-12 scale-110 mb-8",children:[c.jsxs("div",{onClick:C,className:`cursor-pointer group relative ${G?"":"opacity-50 pointer-events-none"}`,children:[c.jsx("div",{className:"absolute top-1 left-1 w-24 h-36 bg-stone-800 rounded-lg border-2 border-stone-700"}),c.jsx("div",{className:"absolute top-2 left-2 w-24 h-36 bg-stone-800 rounded-lg border-2 border-stone-700"}),c.jsx(ji,{isHidden:!0,className:"relative z-10 group-hover:-translate-y-2 transition-transform shadow-2xl"}),c.jsx("div",{className:"mt-4 text-center text-[10px] font-black tracking-widest text-stone-600 group-hover:text-stone-400",children:"DRAW"})]}),c.jsxs("div",{className:"relative",children:[(H==null?void 0:H.color)===K.Wild&&c.jsx("div",{className:`absolute -top-10 left-1/2 -translate-x-1/2 z-20 px-3 py-1.5 rounded-full text-[10px] font-black tracking-widest shadow-xl border animate-in fade-in zoom-in duration-300 whitespace-nowrap
                        ${n.activeColor===K.Red?"bg-rose-600 border-rose-400 text-white shadow-rose-900/50":""}
                        ${n.activeColor===K.Blue?"bg-blue-600 border-blue-400 text-white shadow-blue-900/50":""}
                        ${n.activeColor===K.Green?"bg-emerald-600 border-emerald-400 text-white shadow-emerald-900/50":""}
                        ${n.activeColor===K.Yellow?"bg-amber-400 border-amber-200 text-black shadow-amber-900/50":""}
                    `,children:n.activeColor}),Q.length>1&&c.jsx("div",{className:"absolute top-0 left-0 rotate-[-6deg] opacity-40 scale-95",children:c.jsx(ji,{card:Q[Q.length-2]})}),H?c.jsx("div",{className:"rotate-3 transition-transform hover:rotate-0 duration-300",children:c.jsx(ji,{card:H,className:"shadow-[0_20px_50px_-12px_rgba(0,0,0,0.5)]"})}):c.jsx("div",{className:"w-24 h-36 bg-stone-800/50 rounded-lg border-2 border-stone-700 border-dashed flex items-center justify-center",children:c.jsx("span",{className:"text-xs text-stone-600 font-bold",children:"EMPTY"})}),c.jsx("div",{className:"mt-4 text-center text-[10px] font-black tracking-widest text-stone-500",children:(H==null?void 0:H.color)===K.Wild?c.jsx("span",{className:`transition-colors duration-300
                            ${n.activeColor===K.Red?"text-rose-500":""}
                            ${n.activeColor===K.Blue?"text-blue-500":""}
                            ${n.activeColor===K.Green?"text-emerald-500":""}
                            ${n.activeColor===K.Yellow?"text-amber-400":""}
                        `,children:n.activeColor}):H?H.color:"-"})]})]}),c.jsx("div",{className:`px-8 py-3 rounded-full font-black text-sm tracking-[0.2em] transition-all transform duration-300 ${G?"bg-stone-100 text-stone-900 scale-110 shadow-[0_0_30px_rgba(255,255,255,0.1)]":"bg-stone-900 text-stone-600 border border-stone-800"}`,children:G?"YOUR TURN":`${Y==null?void 0:Y.name.toUpperCase()}'S TURN`})]}),c.jsxs("div",{className:`relative bg-stone-900 border-t border-stone-800 pt-6 pb-8 transition-all duration-300 ${G?"shadow-[0_-10px_40px_rgba(0,0,0,0.5)]":"bg-stone-950"}`,children:[c.jsx("div",{className:"absolute -top-6 left-1/2 -translate-x-1/2 flex items-center gap-4",children:s&&c.jsx("div",{className:"bg-rose-600 text-white text-xs font-bold px-3 py-1 rounded-full animate-bounce",children:"UNO CALLED!"})}),c.jsxs("div",{className:"flex justify-between items-end mb-4 px-6 relative z-20",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"text-xl font-bold text-stone-200",children:"Your Hand"}),c.jsxs("div",{className:"relative",children:[c.jsx("button",{onClick:()=>v(!h),className:"p-2 rounded-full bg-stone-800 hover:bg-stone-700 text-stone-400 hover:text-yellow-400 transition-colors",children:c.jsx(rS,{size:20})}),(A==null?void 0:A.reaction)&&c.jsx("div",{className:"absolute left-10 bottom-0 text-3xl animate-bounce drop-shadow-md z-50",children:A.reaction.emoji}),h&&c.jsx("div",{className:"absolute bottom-12 left-0 bg-stone-800 border border-stone-700 p-2 rounded-xl shadow-2xl grid grid-cols-4 gap-2 z-50 w-48",children:cS.map(w=>c.jsx("button",{onClick:()=>p(w),className:"text-2xl hover:bg-stone-700 p-2 rounded-lg hover:scale-125 transition-transform",children:w},w))})]}),c.jsx("button",{onClick:y,className:"p-1.5 rounded-full bg-stone-800 hover:bg-red-900/50 text-stone-400 hover:text-red-500 transition-colors",title:"wa L3EEB!",children:c.jsx(nS,{size:16})})]}),c.jsx("button",{onClick:()=>i(!s),disabled:!G,className:`px-4 py-2 rounded-lg font-bold text-xs tracking-wider transition-all border-2 ${s?"bg-rose-600 border-rose-600 text-white shadow-lg shadow-rose-900/50":G?"bg-stone-800 border-stone-700 text-stone-400 hover:border-rose-500 hover:text-rose-500":"bg-stone-800 border-stone-800 text-stone-600 opacity-50 cursor-not-allowed"}`,children:"CALL UNO"})]}),c.jsx("div",{className:`flex overflow-x-auto pb-8 px-6 no-scrollbar touch-pan-x min-h-[160px] ${G?"":"opacity-50 pointer-events-none grayscale"}`,children:c.jsx("div",{className:"flex mx-auto transition-all duration-300 items-end",style:{paddingLeft:te.length>5?"2rem":"0",paddingRight:te.length>5?"2rem":"0"},children:te.map((w,b)=>{const R=G&&H&&ea(w,H,n.activeColor);return c.jsx("div",{style:{marginLeft:b===0?0:Se,zIndex:b},className:`relative transition-all duration-200 origin-bottom flex-shrink-0 ${R?"hover:-translate-y-8 hover:z-50":"hover:-translate-y-4 hover:z-50 opacity-90"}`,children:c.jsx(ji,{card:w,isPlayable:!!R,onClick:()=>T(w),className:"shadow-2xl"})},w.id)})})})]}),o&&c.jsxs("div",{className:"absolute inset-0 bg-stone-950/90 backdrop-blur-sm z-50 flex flex-col items-center justify-center animate-in fade-in duration-200",children:[c.jsx("h2",{className:"text-3xl font-black mb-12 text-stone-200 tracking-tighter",children:"SELECT COLOR"}),c.jsxs("div",{className:"grid grid-cols-2 gap-6 p-4",children:[c.jsx("button",{onClick:()=>{S(a,K.Red),l(!1)},className:"w-32 h-32 bg-rose-500 rounded-2xl hover:scale-105 transition-transform shadow-[0_0_40px_rgba(244,63,94,0.3)] ring-4 ring-transparent hover:ring-rose-400/50 border-4 border-rose-600"}),c.jsx("button",{onClick:()=>{S(a,K.Blue),l(!1)},className:"w-32 h-32 bg-blue-500 rounded-2xl hover:scale-105 transition-transform shadow-[0_0_40px_rgba(59,130,246,0.3)] ring-4 ring-transparent hover:ring-blue-400/50 border-4 border-blue-600"}),c.jsx("button",{onClick:()=>{S(a,K.Green),l(!1)},className:"w-32 h-32 bg-emerald-500 rounded-2xl hover:scale-105 transition-transform shadow-[0_0_40px_rgba(16,185,129,0.3)] ring-4 ring-transparent hover:ring-emerald-400/50 border-4 border-emerald-600"}),c.jsx("button",{onClick:()=>{S(a,K.Yellow),l(!1)},className:"w-32 h-32 bg-amber-400 rounded-2xl hover:scale-105 transition-transform shadow-[0_0_40px_rgba(251,191,36,0.3)] ring-4 ring-transparent hover:ring-amber-200/50 border-4 border-amber-500"})]}),c.jsx("button",{onClick:()=>l(!1),className:"mt-8 text-stone-500 font-bold hover:text-white",children:"CANCEL"})]})]})}const Xg=t=>t.map(e=>e.map(n=>n?{...n}:null)),Lt=(t,e)=>t>=0&&t<8&&e>=0&&e<8,as=(t,e,n,r)=>{const s=r==="w"?-1:1;if(Lt(e-s,n-1)){const l=t[e-s][n-1];if(l&&l.type==="p"&&l.color===r)return!0}if(Lt(e-s,n+1)){const l=t[e-s][n+1];if(l&&l.type==="p"&&l.color===r)return!0}const i=[[-2,-1],[-2,1],[-1,-2],[-1,2],[1,-2],[1,2],[2,-1],[2,1]];for(const l of i){const a=e+l[0],u=n+l[1];if(Lt(a,u)){const d=t[a][u];if(d&&d.type==="n"&&d.color===r)return!0}}const o=[[-1,0],[1,0],[0,-1],[0,1],[-1,-1],[-1,1],[1,-1],[1,1]];for(let l=0;l<8;l++){const a=o[l][0],u=o[l][1];let d=1;for(;;){const f=e+a*d,h=n+u*d;if(!Lt(f,h))break;const v=t[f][h];if(v){if(v.color===r){const _=l<4;if(v.type==="q"||_&&v.type==="r"||!_&&v.type==="b"||d===1&&v.type==="k")return!0}break}d++}}return!1},hS=(t,e)=>{for(let n=0;n<8;n++)for(let r=0;r<8;r++){const s=t[n][r];if(s&&s.type==="k"&&s.color===e)return{r:n,c:r}}return null},qc=(t,e)=>{const n=hS(t,e);return n?as(t,n.r,n.c,e==="w"?"b":"w"):!1},pS=(t,e,n)=>{const r=t[e.r][e.c];if(!r)return[];const s=[],i=(l,a)=>{if(!Lt(l,a))return;const u=t[l][a];(!u||u.color!==r.color)&&s.push({r:l,c:a})},o=(l,a)=>{let u=1;for(;;){const d=e.r+l*u,f=e.c+a*u;if(!Lt(d,f))break;const h=t[d][f];if(h){h.color!==r.color&&s.push({r:d,c:f});break}s.push({r:d,c:f}),u++}};if(r.type==="p"){const l=r.color==="w"?-1:1,a=r.color==="w"?6:1;Lt(e.r+l,e.c)&&!t[e.r+l][e.c]&&(s.push({r:e.r+l,c:e.c}),e.r===a&&Lt(e.r+l*2,e.c)&&!t[e.r+l*2][e.c]&&s.push({r:e.r+l*2,c:e.c})),[[e.r+l,e.c-1],[e.r+l,e.c+1]].forEach(([u,d])=>{if(Lt(u,d)){const f=t[u][d];f&&f.color!==r.color&&s.push({r:u,c:d}),!f&&n&&n.piece.type==="p"&&Math.abs(n.from.r-n.to.r)===2&&n.to.r===e.r&&n.to.c===d&&s.push({r:u,c:d})}})}else r.type==="n"?[[-2,-1],[-2,1],[-1,-2],[-1,2],[1,-2],[1,2],[2,-1],[2,1]].forEach(([a,u])=>i(e.r+a,e.c+u)):r.type==="k"?([[-1,-1],[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,0],[1,1]].forEach(([l,a])=>{i(e.r+l,e.c+a)}),!r.hasMoved&&!qc(t,r.color)&&(t[e.r][7]&&t[e.r][7].type==="r"&&!t[e.r][7].hasMoved&&!t[e.r][5]&&!t[e.r][6]&&!as(t,e.r,5,r.color==="w"?"b":"w")&&!as(t,e.r,6,r.color==="w"?"b":"w")&&s.push({r:e.r,c:6}),t[e.r][0]&&t[e.r][0].type==="r"&&!t[e.r][0].hasMoved&&!t[e.r][1]&&!t[e.r][2]&&!t[e.r][3]&&!as(t,e.r,3,r.color==="w"?"b":"w")&&!as(t,e.r,2,r.color==="w"?"b":"w")&&s.push({r:e.r,c:2}))):(r.type==="r"?[[-1,0],[1,0],[0,-1],[0,1]]:r.type==="b"?[[-1,-1],[-1,1],[1,-1],[1,1]]:[[-1,0],[1,0],[0,-1],[0,1],[-1,-1],[-1,1],[1,-1],[1,1]]).forEach(([a,u])=>o(a,u));return s},Jg=(t,e,n)=>{const r=t[e.r][e.c];return r?pS(t,e,n).filter(i=>{const o=Xg(t),l=o[e.r][e.c];return o[e.r][e.c]=null,o[i.r][i.c]=l,l.type==="p"&&i.c!==e.c&&!t[i.r][i.c]&&(o[e.r][i.c]=null),!qc(o,r.color)}):[]},mS=(t,e,n)=>{const r=Xg(t.board),s=r[e.r][e.c],i=r[n.r][n.c];let o=`${s.color==="w"?"White":"Black"} moved`;if(s.type==="k"&&Math.abs(n.c-e.c)>1){const h=n.c>e.c,v=h?7:0,_=h?5:3,x=r[e.r][v];r[e.r][v]=null,r[e.r][_]={...x,hasMoved:!0},o="Castling"}s.type==="p"&&n.c!==e.c&&!i&&(r[e.r][n.c]=null,o="En Passant"),r[n.r][n.c]={...s,hasMoved:!0},r[e.r][e.c]=null,s.type==="p"&&(n.r===0||n.r===7)&&(r[n.r][n.c].type="q",o="Pawn Promoted");const l=t.turn||"w",a=l==="w"?"b":"w",u=qc(r,a);let d=!1;e:for(let h=0;h<8;h++)for(let v=0;v<8;v++){const _=r[h][v];if(_&&_.color===a&&Jg(r,{r:h,c:v},{from:e,to:n,piece:s}).length>0){d=!0;break e}}let f=t.winner||null;return d?u&&(o+=" (Check)"):u?(f=l,o="Checkmate!"):(f="draw",o="Stalemate!"),{board:r,turn:a,winner:f||null,lastMove:{from:e,to:n,piece:s},inCheck:u,log:o}},nh=()=>[[{type:"r",color:"b",hasMoved:!1},{type:"n",color:"b",hasMoved:!1},{type:"b",color:"b",hasMoved:!1},{type:"q",color:"b",hasMoved:!1},{type:"k",color:"b",hasMoved:!1},{type:"b",color:"b",hasMoved:!1},{type:"n",color:"b",hasMoved:!1},{type:"r",color:"b",hasMoved:!1}],[{type:"p",color:"b",hasMoved:!1},{type:"p",color:"b",hasMoved:!1},{type:"p",color:"b",hasMoved:!1},{type:"p",color:"b",hasMoved:!1},{type:"p",color:"b",hasMoved:!1},{type:"p",color:"b",hasMoved:!1},{type:"p",color:"b",hasMoved:!1},{type:"p",color:"b",hasMoved:!1}],Array(8).fill(null),Array(8).fill(null),Array(8).fill(null),Array(8).fill(null),[{type:"p",color:"w",hasMoved:!1},{type:"p",color:"w",hasMoved:!1},{type:"p",color:"w",hasMoved:!1},{type:"p",color:"w",hasMoved:!1},{type:"p",color:"w",hasMoved:!1},{type:"p",color:"w",hasMoved:!1},{type:"p",color:"w",hasMoved:!1},{type:"p",color:"w",hasMoved:!1}],[{type:"r",color:"w",hasMoved:!1},{type:"n",color:"w",hasMoved:!1},{type:"b",color:"w",hasMoved:!1},{type:"q",color:"w",hasMoved:!1},{type:"k",color:"w",hasMoved:!1},{type:"b",color:"w",hasMoved:!1},{type:"n",color:"w",hasMoved:!1},{type:"r",color:"w",hasMoved:!1}]],gS={k:"",q:"",r:"",b:"",n:"",p:""},vS=t=>{const e=[];for(let n=0;n<8;n++){const r=[],s=t&&t[n];for(let i=0;i<8;i++)r.push(s&&s[i]||null);e.push(r)}return e};function yS({myPlayerId:t,onExit:e}){const[n,r]=O.useState(null),[s,i]=O.useState(null),[o,l]=O.useState([]),[a,u]=O.useState(!1),[d,f]=O.useState(null),h=t===0?"w":"b",v=t===0?"Hasnae":"Amine",_=h==="w"?"b":"w";O.useEffect(()=>{const g=Vr(E=>{f((E==null?void 0:E.CHESS)||{Amine:0,Hasnae:0})});return()=>g()},[]),O.useEffect(()=>{const g=DE(z,E=>{if(E)r({...E,board:vS(E.board),turn:E.turn||"w",winner:E.winner||null,lastMove:E.lastMove||null,inCheck:E.inCheck||!1});else{const C={board:nh(),turn:"w",winner:null,lastMove:null,log:"Game Started",inCheck:!1};Jl(z,C)}u(!1)});return()=>g()},[]);const x=(g,E)=>{if(!n||n.winner)return;const C=n.board[g][E],S=(C==null?void 0:C.color)===h,T=o.find(j=>j.r===g&&j.c===E);if(s&&T){const j=mS(n,s,{r:g,c:E});if(Jl(z,j),j.winner&&j.winner!=="draw"){const A=j.winner==="w"?"Amine":"Hasnae";Gn("CHESS",A)}i(null),l([]);return}if(S){if((s==null?void 0:s.r)===g&&(s==null?void 0:s.c)===E)i(null),l([]);else if(n.turn===h){i({r:g,c:E});const j=Jg(n.board,{r:g,c:E},n.lastMove);l(j)}return}i(null),l([])},N=async g=>{if(g==null||g.preventDefault(),g==null||g.stopPropagation(),a)return;u(!0),i(null),l([]);const E={board:nh(),turn:"w",winner:null,lastMove:null,log:"Game Restarted",inCheck:!1};try{await Jl(z,E)}catch(C){console.error("Failed to reset game:",C),u(!1)}};if(!n)return c.jsx("div",{className:"h-full flex items-center justify-center text-stone-500 bg-stone-950",children:"Loading Chess..."});const m=t===1,p=m?[...n.board].reverse().map(g=>[...g].reverse()):n.board,y=g=>g==="w"?"bg-indigo-100 text-indigo-900 shadow-[0_0_15px_rgba(224,231,255,0.4)]":"bg-rose-950 text-rose-100 border border-rose-800 shadow-[0_0_15px_rgba(244,63,94,0.2)]";return c.jsxs("div",{className:"h-screen w-full flex flex-col bg-stone-950 text-stone-100 overflow-hidden font-sans selection:bg-transparent",children:[c.jsxs("div",{className:"h-16 flex items-center justify-between px-6 border-b border-stone-900 bg-stone-950 z-20 shadow-sm relative",children:[c.jsxs("button",{onClick:e,className:"text-xs font-bold text-stone-500 hover:text-stone-300 flex items-center gap-1 transition-colors",children:[c.jsx(Yn,{size:16})," LOBBY"]}),c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("h1",{className:"font-bold text-sm tracking-[0.3em] text-stone-400",children:"CHESS"}),n.inCheck&&!n.winner?c.jsx("span",{className:"text-[10px] text-rose-500 font-bold animate-pulse tracking-widest mt-0.5",children:"CHECK"}):c.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-bold text-stone-500 mt-0.5",children:[c.jsxs("span",{className:"text-indigo-400",children:["A: ",(d==null?void 0:d.Amine)||0]}),c.jsx("span",{className:"text-stone-600",children:"|"}),c.jsxs("span",{className:"text-rose-400",children:["H: ",(d==null?void 0:d.Hasnae)||0]})]})]}),c.jsxs("button",{onClick:N,disabled:a,className:"text-xs font-bold text-stone-500 hover:text-stone-300 flex items-center gap-2 border border-stone-800 bg-stone-900 px-3 py-1.5 rounded hover:bg-stone-800 transition-all active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed",children:[a?c.jsx(fi,{size:14,className:"animate-spin"}):c.jsx(Qn,{size:14}),c.jsx("span",{className:"hidden sm:inline",children:a?"RESETTING":"NEW GAME"})]})]}),c.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center relative",children:[n.winner?c.jsxs("div",{className:"absolute inset-0 z-30 bg-stone-950/80 backdrop-blur-sm flex flex-col items-center justify-center animate-in fade-in zoom-in duration-300",children:[c.jsx(hi,{size:64,className:"text-amber-400 mb-6 drop-shadow-[0_0_15px_rgba(251,191,36,0.5)]"}),c.jsx("h2",{className:"text-3xl font-light tracking-widest mb-2 text-white",children:"GAME OVER"}),c.jsx("div",{className:"text-5xl font-black mb-6 tracking-tighter text-stone-200",children:n.winner==="draw"?"DRAW":n.winner==="w"?"WHITE WINS":"BLACK WINS"}),c.jsxs("div",{className:"flex gap-8 mb-8 text-2xl font-bold",children:[c.jsxs("div",{className:"text-indigo-400 flex flex-col items-center",children:[c.jsx("span",{children:"AMINE"}),c.jsx("span",{className:"text-4xl",children:(d==null?void 0:d.Amine)||0})]}),c.jsxs("div",{className:"text-rose-400 flex flex-col items-center",children:[c.jsx("span",{children:"HASNAE"}),c.jsx("span",{className:"text-4xl",children:(d==null?void 0:d.Hasnae)||0})]})]}),c.jsx("button",{onClick:N,className:"bg-stone-100 hover:bg-white text-stone-950 px-10 py-4 rounded-full font-bold tracking-widest shadow-xl transition-all hover:scale-105 active:scale-95",children:a?"LOADING...":"PLAY AGAIN"})]}):null,c.jsx("div",{className:`w-full max-w-[480px] px-4 mb-4 flex justify-between items-end opacity-90 transition-opacity ${n.turn!==h?"opacity-100":"opacity-50"}`,children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-lg font-bold shadow-lg transition-colors ${y(_)}`,children:v[0]}),c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"text-sm font-bold tracking-wider text-stone-300",children:v}),c.jsx("span",{className:"text-[10px] font-mono text-stone-500 uppercase",children:n.turn!==h?"Thinking...":"Waiting"})]})]})}),c.jsx("div",{className:"relative shadow-2xl shadow-black/50 rounded-md overflow-hidden ring-1 ring-white/10 select-none",children:c.jsx("div",{className:"grid grid-cols-8 grid-rows-8 w-[90vw] h-[90vw] max-w-[480px] max-h-[480px]",children:p.map((g,E)=>g.map((C,S)=>{var D,re;const T=m?7-E:E,j=m?7-S:S,A=(T+j)%2===1,te=A?"bg-[#57534e]":"bg-[#d6d3d1]",Y=(s==null?void 0:s.r)===T&&(s==null?void 0:s.c)===j,$=((D=n.lastMove)==null?void 0:D.from.r)===T&&n.lastMove.from.c===j,G=((re=n.lastMove)==null?void 0:re.to.r)===T&&n.lastMove.to.c===j,Q=o.some(ue=>ue.r===T&&ue.c===j),H=Q&&C,Se=n.inCheck&&(C==null?void 0:C.type)==="k"&&C.color===n.turn,P=S===0,w=E===7,b=m?1+E:8-E,R=String.fromCharCode(m?104-S:97+S);return c.jsxs("div",{onClick:()=>x(T,j),className:`
                                            relative flex items-center justify-center cursor-pointer
                                            ${te}
                                            transition-colors duration-150
                                        `,children:[P&&c.jsx("span",{className:`absolute top-0.5 left-1 text-[8px] sm:text-[10px] font-bold ${A?"text-[#d6d3d1]":"text-[#57534e]"}`,children:b}),w&&c.jsx("span",{className:`absolute bottom-0 right-1 text-[8px] sm:text-[10px] font-bold ${A?"text-[#d6d3d1]":"text-[#57534e]"}`,children:R}),$&&c.jsx("div",{className:"absolute inset-0 bg-yellow-500/20 mix-blend-overlay"}),G&&c.jsx("div",{className:"absolute inset-0 bg-yellow-500/30 mix-blend-overlay"}),Y&&c.jsx("div",{className:"absolute inset-0 bg-emerald-500/30 mix-blend-multiply ring-inset ring-2 ring-emerald-500/50"}),Q&&!H&&c.jsx("div",{className:"absolute w-3 h-3 sm:w-4 sm:h-4 bg-black/10 rounded-full shadow-inner pointer-events-none"}),Q&&H&&c.jsx("div",{className:"absolute inset-0 ring-[6px] ring-inset ring-black/10 rounded-none pointer-events-none"}),Se&&c.jsx("div",{className:"absolute inset-0 bg-red-500/50 rounded-full blur-xl scale-75 animate-pulse"}),C&&c.jsx("span",{className:`
                                                    relative z-10 text-4xl sm:text-6xl select-none leading-none
                                                    transition-transform duration-200
                                                    ${Y?"scale-110 -translate-y-1":""}
                                                    ${C.color==="w"?"text-indigo-50 drop-shadow-[0_2px_3px_rgba(0,0,0,0.6)]":"text-rose-950 drop-shadow-[0_1px_0px_rgba(255,255,255,0.4)]"}
                                                `,style:{fontFamily:"Segoe UI Symbol, Apple Symbols, sans-serif"},children:gS[C.type]})]},`${T}-${j}`)}))})}),c.jsx("div",{className:`w-full max-w-[480px] px-4 mt-4 flex justify-between items-start opacity-90 transition-opacity ${n.turn===h?"opacity-100":"opacity-50"}`,children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-lg font-bold shadow-lg transition-colors ${y(h)}`,children:t===0?"A":"H"}),c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"text-sm font-bold tracking-wider text-stone-300",children:"YOU"}),c.jsx("span",{className:"text-[10px] font-mono text-emerald-500 uppercase font-bold",children:n.turn===h?"Your Turn":""})]})]})})]})]})}const _S=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]],xS={0:[1,3,4],1:[0,2,4],2:[1,5,4],3:[0,6,4],4:[0,1,2,3,5,6,7,8],5:[2,8,4],6:[3,7,4],7:[6,8,4],8:[5,7,4]},wS=t=>{for(const e of _S){const[n,r,s]=e;if(t[n]!==null&&t[n]===t[r]&&t[n]===t[s])return t[n]}return null},rh=()=>({board:Array(9).fill(null),turn:0,phase:"PLACING",piecesPlaced:{0:0,1:0},winner:null,log:"Game Started: Place your pieces"}),sh=(t,e)=>{const n=JSON.parse(JSON.stringify(t)),r=n.turn,s=r===0?1:0;if(e.type==="PLACE"){if(n.phase!=="PLACING")throw new Error("Invalid phase");if(n.board[e.idx]!==null)throw new Error("Spot taken");if(n.piecesPlaced[r]>=3)throw new Error("All pieces placed");n.board[e.idx]=r,n.piecesPlaced[r]++,n.log=`Player ${r===0?"A":"H"} placed a piece`,n.piecesPlaced[0]===3&&n.piecesPlaced[1]===3&&(n.phase="MOVING",n.log="All pieces placed. Movement phase!")}else{if(n.phase!=="MOVING")throw new Error("Invalid phase");if(n.board[e.from]!==r)throw new Error("Not your piece");if(n.board[e.to]!==null)throw new Error("Destination occupied");if(!xS[e.from].includes(e.to))throw new Error("Invalid move: not connected");n.board[e.from]=null,n.board[e.to]=r,n.log=`Player ${r===0?"A":"H"} moved`}const i=wS(n.board);return i!==null?(n.winner=i,n.log=`Player ${i===0?"Amine":"Hasnae"} Wins!`):n.turn=s,n},ra={0:"Amine",1:"Hasnae"};function ES({myPlayerId:t,onExit:e}){const[n,r]=O.useState(null),[s,i]=O.useState(null),[o,l]=O.useState(!1),[a,u]=O.useState(null);O.useEffect(()=>{const N=Vr(m=>{u((m==null?void 0:m.MORRIS)||{Amine:0,Hasnae:0})});return()=>N()},[]),O.useEffect(()=>{const N=LE(z,m=>{if(!m)Mi(z,rh());else{const p=m.board||[],y=Array(9).fill(null).map((E,C)=>p[C]??null),g={...m,board:y,piecesPlaced:m.piecesPlaced||{0:0,1:0},winner:m.winner??null,turn:m.turn??0,phase:m.phase||"PLACING",log:m.log||""};r(g)}l(!1)});return()=>N()},[]);const d=N=>{if(!(!n||n.winner!==null)&&n.turn===t)try{if(n.phase==="PLACING"){const m=sh(n,{type:"PLACE",idx:N});Mi(z,m),m.winner!==null&&Gn("MORRIS",m.winner===0?"Amine":"Hasnae")}else{const m=n.board[N];if(m===t)i(s===N?null:N);else if(m===null&&s!==null){const p=sh(n,{type:"MOVE",from:s,to:N});Mi(z,p),p.winner!==null&&Gn("MORRIS",p.winner===0?"Amine":"Hasnae"),i(null)}}}catch(m){console.log("Invalid Move:",m)}},f=async N=>{N==null||N.preventDefault(),N==null||N.stopPropagation(),!o&&(l(!0),i(null),await Mi(z,rh()))};if(!n)return c.jsx("div",{className:"h-full flex items-center justify-center text-stone-500 bg-stone-950",children:"Loading Morris..."});const h=t===0?"bg-indigo-500 shadow-indigo-500/50":"bg-rose-600 shadow-rose-600/50",v=t===0?"bg-rose-600 shadow-rose-600/50":"bg-indigo-500 shadow-indigo-500/50",_=N=>N===0?"bg-indigo-500 shadow-[0_0_15px_rgba(99,102,241,0.6)]":"bg-rose-600 shadow-[0_0_15px_rgba(225,29,72,0.6)]",x=n.turn===t;return c.jsxs("div",{className:"h-screen w-full flex flex-col bg-stone-950 text-stone-100 overflow-hidden font-sans selection:bg-transparent",children:[c.jsxs("div",{className:"h-16 flex items-center justify-between px-6 border-b border-stone-900 bg-stone-950 z-20 shadow-sm relative",children:[c.jsxs("button",{onClick:e,className:"text-xs font-bold text-stone-500 hover:text-stone-300 flex items-center gap-1 transition-colors",children:[c.jsx(Yn,{size:16})," LOBBY"]}),c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("h1",{className:"font-bold text-sm tracking-[0.3em] text-stone-400",children:"3 MEN'S MORRIS"}),c.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-bold text-stone-500 mt-0.5",children:[c.jsxs("span",{className:"text-indigo-400",children:["A: ",(a==null?void 0:a.Amine)||0]}),c.jsx("span",{className:"text-stone-600",children:"|"}),c.jsxs("span",{className:"text-rose-400",children:["H: ",(a==null?void 0:a.Hasnae)||0]})]})]}),c.jsxs("button",{onClick:f,disabled:o,className:"text-xs font-bold text-stone-500 hover:text-stone-300 flex items-center gap-2 border border-stone-800 bg-stone-900 px-3 py-1.5 rounded hover:bg-stone-800 transition-all active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed",children:[o?c.jsx(fi,{size:14,className:"animate-spin"}):c.jsx(Qn,{size:14}),c.jsx("span",{className:"hidden sm:inline",children:o?"RESETTING":"NEW GAME"})]})]}),c.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center relative p-8",children:[n.winner!==null&&c.jsxs("div",{className:"absolute inset-0 z-30 bg-stone-950/80 backdrop-blur-sm flex flex-col items-center justify-center animate-in fade-in zoom-in duration-300",children:[c.jsx(hi,{size:64,className:"text-amber-400 mb-6 drop-shadow-[0_0_15px_rgba(251,191,36,0.5)]"}),c.jsx("h2",{className:"text-3xl font-light tracking-widest mb-2 text-white",children:"GAME OVER"}),c.jsx("div",{className:"text-5xl font-black mb-6 tracking-tighter text-stone-200",children:n.winner===0?"AMINE WINS":"HASNAE WINS"}),c.jsxs("div",{className:"flex gap-8 mb-8 text-2xl font-bold",children:[c.jsxs("div",{className:"text-indigo-400 flex flex-col items-center",children:[c.jsx("span",{children:"AMINE"}),c.jsx("span",{className:"text-4xl",children:(a==null?void 0:a.Amine)||0})]}),c.jsxs("div",{className:"text-rose-400 flex flex-col items-center",children:[c.jsx("span",{children:"HASNAE"}),c.jsx("span",{className:"text-4xl",children:(a==null?void 0:a.Hasnae)||0})]})]}),c.jsx("button",{onClick:f,className:"bg-stone-100 hover:bg-white text-stone-950 px-10 py-4 rounded-full font-bold tracking-widest shadow-xl transition-all hover:scale-105 active:scale-95",children:o?"LOADING...":"PLAY AGAIN"})]}),c.jsx("div",{className:`w-full max-w-[320px] mb-8 flex justify-between items-end opacity-90 transition-opacity ${x?"opacity-50":"opacity-100"}`,children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-lg font-bold shadow-lg ${v} text-white`,children:ra[t===0?1:0][0]}),c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"text-sm font-bold tracking-wider text-stone-300",children:ra[t===0?1:0]}),c.jsx("span",{className:"text-[10px] font-mono text-stone-500 uppercase",children:x?"Waiting":"Thinking..."})]})]})}),c.jsxs("div",{className:"relative w-[80vw] h-[80vw] max-w-[320px] max-h-[320px]",children:[c.jsxs("svg",{className:"absolute inset-0 w-full h-full pointer-events-none stroke-stone-700 stroke-2 z-0",children:[c.jsx("line",{x1:"16.6%",y1:"16.6%",x2:"83.3%",y2:"16.6%"}),c.jsx("line",{x1:"16.6%",y1:"50%",x2:"83.3%",y2:"50%"}),c.jsx("line",{x1:"16.6%",y1:"83.3%",x2:"83.3%",y2:"83.3%"}),c.jsx("line",{x1:"16.6%",y1:"16.6%",x2:"16.6%",y2:"83.3%"}),c.jsx("line",{x1:"50%",y1:"16.6%",x2:"50%",y2:"83.3%"}),c.jsx("line",{x1:"83.3%",y1:"16.6%",x2:"16.6%",y2:"83.3%"}),c.jsx("line",{x1:"16.6%",y1:"16.6%",x2:"83.3%",y2:"83.3%"}),c.jsx("line",{x1:"83.3%",y1:"16.6%",x2:"16.6%",y2:"83.3%"})]}),c.jsx("div",{className:"absolute inset-0 grid grid-cols-3 grid-rows-3 z-10",children:n.board.map((N,m)=>{const p=x&&(n.phase==="PLACING"&&N===null||n.phase==="MOVING"&&(N===t||s!==null&&N===null));return c.jsx("div",{className:"flex items-center justify-center",children:c.jsx("button",{onClick:()=>d(m),className:`
                                            w-14 h-14 sm:w-16 sm:h-16 rounded-full flex items-center justify-center transition-all duration-300
                                            ${N===null?"bg-stone-800 hover:bg-stone-700 scale-50 hover:scale-75":`scale-100 ${_(N)}`}
                                            ${p?"cursor-pointer":"cursor-default"}
                                            ${s===m?"ring-4 ring-white scale-110 z-20":""}
                                            ${n.phase==="MOVING"&&s!==null&&N===null?"bg-stone-700/50 animate-pulse scale-75":""}
                                        `,children:N!==null&&c.jsx("div",{className:"w-full h-full rounded-full bg-gradient-to-br from-white/20 to-transparent"})})},m)})})]}),c.jsxs("div",{className:`w-full max-w-[320px] mt-8 flex justify-between items-start opacity-90 transition-opacity ${x?"opacity-100":"opacity-50"}`,children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-lg font-bold shadow-lg ${h} text-white`,children:ra[t][0]}),c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"text-sm font-bold tracking-wider text-stone-300",children:"YOU"}),c.jsx("span",{className:"text-[10px] font-mono text-violet-500 uppercase font-bold",children:x?n.phase==="PLACING"?"Place Piece":"Move Piece":""})]})]}),c.jsx("div",{className:"flex gap-2 text-stone-600",children:n.phase==="PLACING"?c.jsx(ZE,{size:20}):c.jsx(_u,{size:20})})]})]})]})}const SS=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]],ih=()=>{const t=Math.random()<.5?"X":"O";return{board:Array(9).fill(null),turn:t,phase:"DROP",piecesX:0,piecesO:0,winner:null,log:`Drop Phase: ${t}'s Turn`}},CS=t=>{for(const e of SS){const[n,r,s]=e;if(t[n]&&t[n]===t[r]&&t[n]===t[s])return t[n]}return null},oh=(t,e)=>{const n=JSON.parse(JSON.stringify(t)),{turn:r}=n,s=r==="X"?"O":"X";if(e.type==="DROP"){if(n.phase!=="DROP")throw new Error("Not in drop phase");if(n.board[e.idx])throw new Error("Square occupied");if((r==="X"?n.piecesX:n.piecesO)>=3)throw new Error("All pieces dropped");n.board[e.idx]=r,r==="X"?n.piecesX++:n.piecesO++,n.log=`${r} dropped piece`,n.piecesX===3&&n.piecesO===3&&(n.phase="MOVE",n.log="Move Phase Begins!")}else{if(n.phase!=="MOVE")throw new Error("Not in move phase");if(n.board[e.from]!==r)throw new Error("Not your piece");if(n.board[e.to])throw new Error("Square occupied");n.board[e.from]=null,n.board[e.to]=r,n.log=`${r} moved`}const i=CS(n.board);return i?(n.winner=i,n.log=`${i} Wins!`):(n.turn=s,n.phase==="DROP"?n.log=`Drop Phase: ${s}'s Turn`:n.phase==="MOVE"&&(n.log=`Move Phase: ${s}'s Turn`)),n},NS={0:"Amine",1:"Hasnae"};function kS({myPlayerId:t,onExit:e}){const[n,r]=O.useState(null),[s,i]=O.useState(null),[o,l]=O.useState(!1),[a,u]=O.useState(null),d=t===0?"X":"O";O.useEffect(()=>{const _=Vr(x=>{u((x==null?void 0:x.TTT_MOVE)||{Amine:0,Hasnae:0})});return()=>_()},[]),O.useEffect(()=>{const _=FE(z,x=>{if(!x)Oi(z,ih());else{const N=x.board||{},m=Array.from({length:9}).map((p,y)=>N[y]??null);r({...x,board:m})}l(!1)});return()=>_()},[]);const f=_=>{if(!(!n||n.winner)&&n.turn===d)try{if(n.phase==="DROP"){const x=oh(n,{type:"DROP",idx:_});Oi(z,x),x.winner&&Gn("TTT_MOVE",x.winner==="X"?"Amine":"Hasnae")}else{const x=n.board[_];if(x===d)i(_===s?null:_);else if(!x&&s!==null){const N=oh(n,{type:"MOVE",from:s,to:_});Oi(z,N),N.winner&&Gn("TTT_MOVE",N.winner==="X"?"Amine":"Hasnae"),i(null)}}}catch(x){console.log("Invalid move",x)}},h=async()=>{o||(l(!0),i(null),await Oi(z,ih()))};if(!n)return c.jsx("div",{className:"h-full flex items-center justify-center text-stone-500 bg-stone-950",children:"Loading Tic-Tac-Toe..."});const v=n.turn===d;return c.jsxs("div",{className:"h-screen w-full flex flex-col bg-stone-950 text-stone-100 overflow-hidden font-sans selection:bg-transparent",children:[c.jsxs("div",{className:"h-16 flex items-center justify-between px-6 border-b border-stone-900 bg-stone-950 z-20 shadow-sm relative",children:[c.jsxs("button",{onClick:e,className:"text-xs font-bold text-stone-500 hover:text-stone-300 flex items-center gap-1 transition-colors",children:[c.jsx(Yn,{size:16})," LOBBY"]}),c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("h1",{className:"font-bold text-sm tracking-[0.3em] text-stone-400",children:"TIC-TAC-MOVE"}),c.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-bold text-stone-500 mt-0.5",children:[c.jsxs("span",{className:"text-cyan-400",children:["A: ",(a==null?void 0:a.Amine)||0]}),c.jsx("span",{className:"text-stone-600",children:"|"}),c.jsxs("span",{className:"text-rose-400",children:["H: ",(a==null?void 0:a.Hasnae)||0]})]})]}),c.jsxs("button",{onClick:h,disabled:o,className:"text-xs font-bold text-stone-500 hover:text-stone-300 flex items-center gap-2 border border-stone-800 bg-stone-900 px-3 py-1.5 rounded hover:bg-stone-800 transition-all active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed",children:[o?c.jsx(fi,{size:14,className:"animate-spin"}):c.jsx(Qn,{size:14}),c.jsx("span",{className:"hidden sm:inline",children:o?"RESETTING":"NEW GAME"})]})]}),c.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center relative p-8",children:[n.winner&&c.jsxs("div",{className:"absolute inset-0 z-30 bg-stone-950/80 backdrop-blur-sm flex flex-col items-center justify-center animate-in fade-in zoom-in duration-300",children:[c.jsx(hi,{size:64,className:"text-amber-400 mb-6 drop-shadow-[0_0_15px_rgba(251,191,36,0.5)]"}),c.jsx("h2",{className:"text-3xl font-light tracking-widest mb-2 text-white",children:"GAME OVER"}),c.jsx("div",{className:"text-5xl font-black mb-6 tracking-tighter text-stone-200",children:n.winner==="X"?"AMINE WINS":"HASNAE WINS"}),c.jsxs("div",{className:"flex gap-8 mb-8 text-2xl font-bold",children:[c.jsxs("div",{className:"text-cyan-400 flex flex-col items-center",children:[c.jsx("span",{children:"AMINE"}),c.jsx("span",{className:"text-4xl",children:(a==null?void 0:a.Amine)||0})]}),c.jsxs("div",{className:"text-rose-400 flex flex-col items-center",children:[c.jsx("span",{children:"HASNAE"}),c.jsx("span",{className:"text-4xl",children:(a==null?void 0:a.Hasnae)||0})]})]}),c.jsx("button",{onClick:h,className:"bg-stone-100 hover:bg-white text-stone-950 px-10 py-4 rounded-full font-bold tracking-widest shadow-xl transition-all hover:scale-105 active:scale-95",children:o?"LOADING...":"PLAY AGAIN"})]}),c.jsx("div",{className:`w-full max-w-[320px] mb-8 flex justify-between items-end opacity-90 transition-opacity ${v?"opacity-50":"opacity-100"}`,children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center text-lg font-bold shadow-lg border-2 ${d==="X"?"border-rose-500 text-rose-500 bg-rose-950/30":"border-cyan-500 text-cyan-500 bg-cyan-950/30"}`,children:d==="X"?c.jsx(ta,{size:20,strokeWidth:3}):c.jsx(na,{size:24,strokeWidth:3})}),c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"text-sm font-bold tracking-wider text-stone-300",children:NS[t===0?1:0]}),c.jsx("span",{className:"text-[10px] font-mono text-stone-500 uppercase",children:v?"Waiting":"Thinking..."})]})]})}),c.jsx("div",{className:"grid grid-cols-3 w-[80vw] h-[80vw] max-w-[320px] max-h-[320px] gap-2 p-2 bg-stone-900 rounded-2xl relative",children:n.board.map((_,x)=>{const N=s===x,m=v&&(n.phase==="DROP"&&!_||n.phase==="MOVE"&&(_===d||!_&&s!==null));let p=!1;return n.phase==="MOVE"&&s!==null&&!_&&v&&(p=!0),c.jsxs("button",{onClick:()=>f(x),disabled:!m&&!p,className:`
                                    rounded-xl flex items-center justify-center text-4xl font-black transition-all duration-200
                                    ${_==="X"?"text-cyan-400 bg-stone-800":_==="O"?"text-rose-500 bg-stone-800":"bg-stone-800/50 hover:bg-stone-800"}
                                    ${N?"ring-4 ring-amber-400 z-10 scale-105":""}
                                    ${p?"bg-stone-700/50 ring-2 ring-stone-600 scale-95 animate-pulse cursor-pointer":""}
                                    ${!_&&v&&n.phase==="DROP"?"hover:bg-stone-800 cursor-pointer":""}
                                    ${!m&&!p?"cursor-default":""}
                                `,children:[_==="X"&&c.jsx(na,{size:48,strokeWidth:4,className:"drop-shadow-[0_0_10px_rgba(34,211,238,0.5)]"}),_==="O"&&c.jsx(ta,{size:40,strokeWidth:4,className:"drop-shadow-[0_0_10px_rgba(244,63,94,0.5)]"})]},x)})}),c.jsxs("div",{className:`w-full max-w-[320px] mt-8 flex justify-between items-start opacity-90 transition-opacity ${v?"opacity-100":"opacity-50"}`,children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center text-lg font-bold shadow-lg border-2 ${d==="X"?"border-cyan-500 text-cyan-500 bg-cyan-950/30":"border-rose-500 text-rose-500 bg-rose-950/30"}`,children:d==="X"?c.jsx(na,{size:24,strokeWidth:3}):c.jsx(ta,{size:20,strokeWidth:3})}),c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"text-sm font-bold tracking-wider text-stone-300",children:"YOU"}),c.jsx("span",{className:"text-[10px] font-mono text-cyan-500 uppercase font-bold",children:v?n.phase==="DROP"?"Drop Piece":"Move Piece":""})]})]}),c.jsx("div",{className:"flex gap-2 text-stone-600",children:n.phase==="DROP"?c.jsx(_u,{size:20,className:"opacity-50"}):c.jsx(_u,{size:20,className:"text-cyan-500"})})]})]})]})}const lh=52,Zg=0,xu=26,TS=50,ah=24,IS=[0,8,13,21,26,34,39,47],uh=(t,e,n)=>{if(t===-1)return e===6?n===0?Zg:xu:-1;if(t===999)return 999;if(t>=100){const s=t>=200?200:100,o=t-s+e;return o===6?999:o<6?s+o:t}let r;if(n===0?r=TS-t:t>=xu?r=lh-1-t+1+ah:r=ah-t,e>r){const s=e-r-1;return s<6?(n===0?100:200)+s:t}return(t+e)%lh},ch=()=>({players:{0:[0,1,2,3].map(t=>({id:t,position:-1})),1:[0,1,2,3].map(t=>({id:t,position:-1}))},turn:0,dice:null,canRoll:!0,winner:null,log:"Game Started: Roll the dice!"}),bS=(t,e)=>{const n=JSON.parse(JSON.stringify(t)),r=n.turn;if(e.type==="ROLL"){if(!n.canRoll)throw new Error("Cannot roll now");const s=Math.floor(Math.random()*6)+1;n.dice=s,n.canRoll=!1,n.log=`Rolled a ${s}`,n.players[r].some(l=>l.position===-1?s===6:uh(l.position,s,r)!==l.position)||(n.log+=" - No moves!",s!==6?(n.turn=r===0?1:0,n.dice=null,n.canRoll=!0):(n.canRoll=!0,n.log+=" (Roll 6 again)"))}else{if(n.canRoll||n.dice===null)throw new Error("Must roll first");const s=n.players[r],i=s.find(l=>l.id===e.pieceId);if(!i)throw new Error("Piece not found");let o=-999;if(i.position===-1){if(n.dice!==6)throw new Error("Need 6 to enter");o=r===0?Zg:xu}else if(o=uh(i.position,n.dice,r),o===i.position)throw new Error("Invalid move");if(o<100&&o>=0){const l=r===0?1:0,a=n.players[l],u=IS.includes(o),d=a.findIndex(f=>f.position===o);if(d!==-1&&!u)return a[d].position=-1,n.log="Captured Opponent!",n.dice=6,n.canRoll=!0,n.log+=" Roll again!",i.position=o,n}if(i.position=o,s.length>0&&s.every(l=>l.position===999))return n.winner=r,n.log=`${r===0?"Amine":"Hasnae"} Wins!`,n;n.dice===6?(n.canRoll=!0,n.log="Rolled 6. Roll again!"):(n.turn=r===0?1:0,n.dice=null,n.canRoll=!0)}return n},sa={0:"Amine",1:"Hasnae"},F=6.66,dh=[{x:6,y:13},{x:6,y:12},{x:6,y:11},{x:6,y:10},{x:6,y:9},{x:5,y:8},{x:4,y:8},{x:3,y:8},{x:2,y:8},{x:1,y:8},{x:0,y:8},{x:0,y:7},{x:0,y:6},{x:1,y:6},{x:2,y:6},{x:3,y:6},{x:4,y:6},{x:5,y:6},{x:6,y:5},{x:6,y:4},{x:6,y:3},{x:6,y:2},{x:6,y:1},{x:6,y:0},{x:7,y:0},{x:8,y:0},{x:8,y:1},{x:8,y:2},{x:8,y:3},{x:8,y:4},{x:8,y:5},{x:9,y:6},{x:10,y:6},{x:11,y:6},{x:12,y:6},{x:13,y:6},{x:14,y:6},{x:14,y:7},{x:14,y:8},{x:13,y:8},{x:12,y:8},{x:11,y:8},{x:10,y:8},{x:9,y:8},{x:8,y:9},{x:8,y:10},{x:8,y:11},{x:8,y:12},{x:8,y:13},{x:8,y:14},{x:7,y:14},{x:6,y:14}],fh=[{x:7,y:13},{x:7,y:12},{x:7,y:11},{x:7,y:10},{x:7,y:9},{x:7,y:8}],hh=[{x:7,y:1},{x:7,y:2},{x:7,y:3},{x:7,y:4},{x:7,y:5},{x:7,y:6}],RS=[0,8,13,21,26,34,39,47],PS=({value:t,rolling:e,onClick:n,disabled:r})=>{const s={1:[4],2:[0,8],3:[0,4,8],4:[0,2,6,8],5:[0,2,4,6,8],6:[0,2,3,5,6,8]};return c.jsx("button",{onClick:n,disabled:r,className:`w-24 h-24 perspective-500 mx-auto transition-transform active:scale-95 ${r?"cursor-not-allowed opacity-80":"cursor-pointer hover:scale-105"}`,children:c.jsx("div",{className:`
                relative w-full h-full bg-gradient-to-br from-stone-100 to-stone-300 rounded-3xl shadow-[0_15px_30px_rgba(0,0,0,0.6)] border-b-8 border-r-2 border-stone-400
                flex flex-wrap p-3 content-between transition-all duration-700 ease-out
                ${e?"rotate-[720deg] scale-90 blur-sm":"rotate-0 scale-100"}
                ${!r&&!e?"animate-[pulse_3s_infinite]":""}
             `,children:Array(9).fill(0).map((i,o)=>{var l;return c.jsx("div",{className:"w-1/3 h-1/3 flex items-center justify-center p-0.5",children:((l=s[e?6:t||1])==null?void 0:l.includes(o))&&c.jsx("div",{className:"w-full h-full bg-gradient-to-br from-stone-800 to-stone-900 rounded-full shadow-inner"})},o)})})})};function AS({myPlayerId:t,onExit:e}){const[n,r]=O.useState(null),[s,i]=O.useState(!1),[o,l]=O.useState(null),[a,u]=O.useState(null),[d,f]=O.useState(!1);O.useEffect(()=>{const g=Vr(E=>{l((E==null?void 0:E.PARTSHI)||{Amine:0,Hasnae:0})});return()=>g()},[]),O.useEffect(()=>{const g=zE(z,E=>{if(!E)Zl(z,ch());else{const C={...E};C.players||(C.players={0:[],1:[]}),C.winner===void 0&&(C.winner=null),r(C)}i(!1)});return()=>g()},[]),O.useEffect(()=>{if(n!=null&&n.dice){if(n.dice!==a){f(!0);const g=setTimeout(()=>{u(n.dice),f(!1)},600);return()=>clearTimeout(g)}}else a!==null&&u(null)},[n==null?void 0:n.dice]);const h=g=>{if(n){g.type==="ROLL"&&f(!0);try{const E=bS(n,g);Zl(z,E),E.winner!==null&&Gn("PARTSHI",E.winner===0?"Amine":"Hasnae")}catch(E){console.log("Action blocked:",E),g.type==="ROLL"&&f(!1)}}},v=async()=>{s||(i(!0),u(null),await Zl(z,ch()))};if(!n)return c.jsx("div",{className:"h-full flex items-center justify-center text-stone-500 bg-stone-950",children:"Loading Partshi..."});const _=n.turn===t,x=_&&n.canRoll,N=(g,E)=>{if(g.position===-1){const C=E===0?1.5:10.5,S=E===0?10.5:1.5,T=g.id%2*2,j=Math.floor(g.id/2)*2;return{x:C+T,y:S+j}}if(g.position===999)return{x:7.5,y:7.5};if(g.position>=100){const C=g.position>=200?g.position-200:g.position-100;return(E===0?fh:hh)[Math.min(C,5)]||{x:7,y:7}}return dh[g.position%52]||{x:0,y:0}},p=(()=>{const g={},E={};if(!n)return{};const C=[...(n.players[0]||[]).map(S=>({...S,pl:0})),...(n.players[1]||[]).map(S=>({...S,pl:1}))];return C.forEach(S=>{const T=S.position===-1?`base-${S.pl}-${S.id}`:S.position===999?"goal":`pos-${S.position}`;g[T]||(g[T]=[]),g[T].push(S)}),C.forEach(S=>{const T=S.position===-1?`base-${S.pl}-${S.id}`:S.position===999?"goal":`pos-${S.position}`,j=g[T],A=j.findIndex(Y=>Y.id===S.id&&Y.pl===S.pl),te=j.length;if(S.position===-1)E[`${S.pl}-${S.id}`]={x:0,y:0};else if(S.position===999){const Y=A/te*Math.PI*2;E[`${S.pl}-${S.id}`]={x:Math.cos(Y)*.5,y:Math.sin(Y)*.5}}else te>1?E[`${S.pl}-${S.id}`]={x:A*.3-te*.15,y:-(A*.3)}:E[`${S.pl}-${S.id}`]={x:0,y:0}}),E})(),y=g=>{if(!_||n.canRoll||!n.dice)return!1;try{return!(g.position===-1&&n.dice!==6)}catch{return!1}};return c.jsxs("div",{className:"h-screen w-full flex flex-col bg-stone-950 text-stone-100 overflow-hidden font-sans selection:bg-transparent",children:[c.jsxs("div",{className:"h-16 flex items-center justify-between px-6 border-b border-stone-900 bg-stone-950 z-20 shadow-sm relative",children:[c.jsxs("button",{onClick:e,className:"text-xs font-bold text-stone-500 hover:text-stone-300 flex items-center gap-1 transition-colors",children:[c.jsx(Yn,{size:16})," LOBBY"]}),c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("h1",{className:"font-bold text-sm tracking-[0.3em] text-stone-400",children:"PARTSHI PRO"}),c.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-bold text-stone-500 mt-0.5",children:[c.jsxs("span",{className:"text-indigo-400",children:["A: ",(o==null?void 0:o.Amine)||0]}),c.jsx("span",{className:"text-stone-600",children:"|"}),c.jsxs("span",{className:"text-rose-400",children:["H: ",(o==null?void 0:o.Hasnae)||0]})]})]}),c.jsxs("button",{onClick:v,disabled:s,className:"text-xs font-bold text-stone-500 hover:text-stone-300 flex items-center gap-2 border border-stone-800 bg-stone-900 px-3 py-1.5 rounded hover:bg-stone-800 transition-all active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed",children:[s?c.jsx(fi,{size:14,className:"animate-spin"}):c.jsx(Qn,{size:14}),c.jsx("span",{className:"hidden sm:inline",children:s?"RESETTING":"RESET"})]})]}),c.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center relative p-4",children:[typeof n.winner=="number"&&c.jsxs("div",{className:"absolute inset-0 z-50 bg-stone-950/90 backdrop-blur-md flex flex-col items-center justify-center animate-in fade-in zoom-in duration-500",children:[c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"absolute inset-0 bg-amber-500 blur-3xl opacity-20 animate-pulse"}),c.jsx(hi,{size:80,className:"text-amber-400 mb-6 drop-shadow-[0_0_25px_rgba(251,191,36,0.6)] relative z-10"})]}),c.jsx("h2",{className:"text-4xl font-light tracking-[0.2em] mb-4 text-white uppercase",children:"Victory"}),c.jsx("div",{className:`text-6xl font-black mb-8 tracking-tighter ${n.winner===0?"text-indigo-400":"text-rose-400"}`,children:n.winner===0?"AMINE":"HASNAE"}),c.jsx("button",{onClick:v,className:"bg-white text-stone-950 px-12 py-4 rounded-full font-bold tracking-widest shadow-2xl transition-all hover:scale-105 active:scale-95 hover:bg-stone-100",children:"PLAY AGAIN"})]}),c.jsx("div",{className:`w-full max-w-[420px] mb-2 flex justify-between items-center transition-opacity duration-300 ${_?"opacity-40 grayscale":"opacity-100"}`,children:c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center text-xl font-bold shadow-lg border-2 ${t===0?"bg-rose-900/20 border-rose-500/50 text-rose-500":"bg-indigo-900/20 border-indigo-500/50 text-indigo-500"}`,children:sa[t===0?1:0][0]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-xs font-bold text-stone-400 tracking-wider",children:"OPPONENT"}),c.jsx("div",{className:"text-sm font-bold text-stone-200",children:sa[t===0?1:0]})]})]})}),c.jsx("div",{className:"relative w-full aspect-square max-w-[420px] bg-[#1a1918] rounded-3xl shadow-[0_20px_60px_-15px_rgba(0,0,0,0.8)] overflow-hidden border-8 border-stone-800 select-none",children:c.jsxs("svg",{className:"w-full h-full",viewBox:"0 0 100 100",children:[c.jsxs("defs",{children:[c.jsx("pattern",{id:"grid",width:"6.66",height:"6.66",patternUnits:"userSpaceOnUse",children:c.jsx("path",{d:"M 6.66 0 L 0 0 0 6.66",fill:"none",stroke:"#222",strokeWidth:"0.1"})}),c.jsxs("linearGradient",{id:"metal",x1:"0",y1:"0",x2:"1",y2:"1",children:[c.jsx("stop",{offset:"0%",stopColor:"#2a2928"}),c.jsx("stop",{offset:"50%",stopColor:"#1c1b1a"}),c.jsx("stop",{offset:"100%",stopColor:"#2a2928"})]}),c.jsxs("filter",{id:"glow-blue",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[c.jsx("feGaussianBlur",{stdDeviation:"1.5",result:"coloredBlur"}),c.jsxs("feMerge",{children:[c.jsx("feMergeNode",{in:"coloredBlur"}),c.jsx("feMergeNode",{in:"SourceGraphic"})]})]}),c.jsxs("filter",{id:"glow-red",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[c.jsx("feGaussianBlur",{stdDeviation:"1.5",result:"coloredBlur"}),c.jsxs("feMerge",{children:[c.jsx("feMergeNode",{in:"coloredBlur"}),c.jsx("feMergeNode",{in:"SourceGraphic"})]})]})]}),c.jsx("rect",{width:"100%",height:"100%",fill:"url(#metal)"}),c.jsx("rect",{width:"100%",height:"100%",fill:"url(#grid)"}),c.jsx("rect",{x:"0",y:"60",width:"40",height:"40",className:"fill-indigo-950/30 stroke-indigo-900/20 stroke-1",rx:"4"}),c.jsx("rect",{x:"60",y:"0",width:"40",height:"40",className:"fill-rose-950/30 stroke-rose-900/20 stroke-1",rx:"4"}),c.jsx("text",{x:"20",y:"80",textAnchor:"middle",className:"fill-indigo-500/20 font-black text-[5px] tracking-[0.3em]",children:"AMINE"}),c.jsx("text",{x:"80",y:"20",textAnchor:"middle",className:"fill-rose-500/20 font-black text-[5px] tracking-[0.3em]",children:"HASNAE"}),dh.map((g,E)=>{const C=RS.includes(E),S=E===0,T=E===26;let j="#232221",A="#333";return S?(j="rgba(99, 102, 241, 0.15)",A="#4f46e5"):T?(j="rgba(244, 63, 94, 0.15)",A="#e11d48"):C&&(j="#2d2b29",A="#444"),c.jsxs("g",{children:[c.jsx("rect",{x:g.x*F,y:g.y*F,width:F,height:F,fill:j,stroke:A,strokeWidth:"0.3"}),C&&!S&&!T&&c.jsx("g",{transform:`translate(${g.x*F+3.33}, ${g.y*F+3.33})`,children:c.jsx(oS,{size:3.5,className:"text-stone-600/30",fill:"currentColor",stroke:"none",transform:"translate(-1.75, -1.75)"})}),S&&c.jsx("text",{x:(g.x+.5)*F,y:(g.y+.65)*F,fontSize:"2.5",fill:"#6366f1",textAnchor:"middle",fontWeight:"bold",children:"START"}),T&&c.jsx("text",{x:(g.x+.5)*F,y:(g.y+.65)*F,fontSize:"2.5",fill:"#f43f5e",textAnchor:"middle",fontWeight:"bold",children:"START"})]},`sq-${E}`)}),fh.map((g,E)=>c.jsx("path",{d:`M ${g.x*F} ${(g.y+1)*F} L ${(g.x+.5)*F} ${g.y*F} L ${(g.x+1)*F} ${(g.y+1)*F} L ${(g.x+1)*F} ${(g.y+.2)*F+F} L ${(g.x+.5)*F} ${(g.y+.2)*F} L ${g.x*F} ${(g.y+.2)*F+F} Z`,className:"fill-indigo-500/20 stroke-indigo-500/30 stroke-[0.2]"},`hp0-${E}`)),hh.map((g,E)=>c.jsx("path",{d:`M ${g.x*F} ${g.y*F} L ${(g.x+.5)*F} ${(g.y+1)*F} L ${(g.x+1)*F} ${g.y*F} L ${(g.x+1)*F} ${(g.y-.2)*F} L ${(g.x+.5)*F} ${(g.y+.8)*F} L ${g.x*F} ${(g.y-.2)*F} Z`,className:"fill-rose-500/20 stroke-rose-500/30 stroke-[0.2]"},`hp1-${E}`)),c.jsx("polygon",{points:"40,40 60,40 60,60 40,60",className:"fill-stone-900 stroke-stone-700"}),c.jsx("polygon",{points:"40,60 60,60 50,50",className:"fill-indigo-500/40"}),c.jsx("polygon",{points:"60,40 40,40 50,50",className:"fill-rose-500/40"}),c.jsx("circle",{cx:"50",cy:"50",r:"1.5",className:"fill-stone-800 stroke-stone-600"}),Object.entries(p).map(([g,E])=>{const[C,S]=g.split("-"),T=parseInt(C),j=parseInt(S),A=n.players[T].find(P=>P.id===j);if(!A)return null;const te=N(A,T),Y=y(A),$=T===0?"#6366f1":"#f43f5e",G=T===0?"#818cf8":"#fb7185",Q=T===0?"url(#glow-blue)":"url(#glow-red)",H=(te.x+.5)*F+E.x*F,Se=(te.y+.5)*F+E.y*F;return c.jsxs("g",{className:"transition-all duration-500 ease-out",style:{transformOrigin:`${H}% ${Se}%`,transitionProperty:"cx, cy"},onClick:()=>Y&&h({type:"MOVE",pieceId:A.id}),children:[Y&&c.jsx("circle",{cx:H,cy:Se,r:F*.7,fill:"none",stroke:$,strokeWidth:"0.4",className:"animate-ping opacity-60"}),c.jsx("circle",{cx:H,cy:Se,r:F*.35,fill:$,stroke:G,strokeWidth:"0.5",filter:Y?Q:"drop-shadow(0 2px 3px rgba(0,0,0,0.5))",className:`
                                            transition-all duration-300
                                            ${Y?"cursor-pointer":""}
                                        `}),c.jsx("circle",{cx:H,cy:Se,r:F*.15,fill:"rgba(255,255,255,0.2)"})]},g)})]})}),c.jsxs("div",{className:`w-full max-w-[420px] mt-6 flex justify-between items-center transition-all duration-500 ${_?"opacity-100 translate-y-0":"opacity-40 translate-y-2 grayscale"}`,children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center text-2xl font-bold shadow-lg border-2 ${t===0?"bg-indigo-600 border-indigo-400 text-white":"bg-rose-600 border-rose-400 text-white"}`,children:sa[t][0]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-xs font-bold text-stone-400 tracking-wider",children:"YOU"}),c.jsxs("div",{className:"text-sm font-bold text-white uppercase flex items-center gap-2",children:[_?x?"ROLL DICE":"MOVE PIECE":"WAITING...",_&&c.jsx("span",{className:"flex w-2 h-2 bg-green-500 rounded-full animate-pulse"})]})]})]}),c.jsxs("div",{className:"flex flex-col items-center gap-4",children:[c.jsx(PS,{value:a||1,rolling:d,onClick:()=>x&&h({type:"ROLL"}),disabled:!x}),!x&&_&&c.jsx("div",{className:"text-[10px] font-bold text-stone-500 animate-pulse tracking-widest",children:"SELECT PIECE TO MOVE"})]})]})]})]})}const MS={id:0},OS={id:1};function jS(){const[t,e]=O.useState(null),[n,r]=O.useState("SELECT"),[s,i]=O.useState(null),[o,l]=O.useState(""),[a,u]=O.useState(""),[d,f]=O.useState(null),[h,v]=O.useState({}),[_,x]=O.useState(!1),[N,m]=O.useState(null),[p,y]=O.useState({}),[g,E]=O.useState({});O.useEffect(()=>{const $=BE(G=>{v(G||{})});return()=>$()},[]),O.useEffect(()=>{if(t!==null){const $=PE(H=>{m(H)}),G=AE(H=>{y(H||{})}),Q=Vr(H=>{E(H||{})});return()=>{$(),G(),Q()}}},[t]),O.useEffect(()=>{if(N)return;const $=p.Amine,G=p.Hasnae;$&&G&&$===G&&Jf($)},[p,N]);const C=async $=>{x(!0),i($);const G=await $E($);G!=null?(f(String(G)),r("ENTER_PIN")):(f(null),r("CREATE_PIN")),l(""),u(""),x(!1)},S=async()=>{o.length===4&&(x(!0),n==="CREATE_PIN"?(await WE(s,o),T()):o===d?T():(u("Wrong PIN"),l(""),x(!1)))},T=async()=>{const $=s==="Amine"?MS:OS;HE(s),e($.id),x(!1)},j=()=>{s&&(UE(s),Zf(s,null)),e(null),i(null),r("SELECT"),l("")},A=async()=>{await Jf(null),await ME()},te=$=>{if(!s)return;const Q=p[s]===$?null:$;Zf(s,Q)},Y=()=>{const $=Q=>{o.length<4&&l(H=>H+Q)},G=()=>{l(Q=>Q.slice(0,-1)),u("")};return c.jsxs("div",{className:"flex flex-col items-center animate-fade-in w-full max-w-sm",children:[c.jsxs("button",{onClick:()=>r("SELECT"),className:"self-start mb-4 text-stone-500 hover:text-white flex items-center gap-1",children:[c.jsx(Yn,{size:20})," Back"]}),c.jsx("h2",{className:"text-2xl font-bold mb-2",children:n==="CREATE_PIN"?`Set PIN for ${s}`:`Enter PIN for ${s}`}),c.jsx("p",{className:"text-stone-500 mb-6 text-sm",children:n==="CREATE_PIN"?"Memorize this! It will be required to log in.":"Enter your 4-digit security code."}),c.jsx("div",{className:"flex gap-4 mb-8",children:[0,1,2,3].map(Q=>c.jsx("div",{className:`w-4 h-4 rounded-full transition-colors ${Q<o.length?"bg-amber-400":"bg-stone-700"}`},Q))}),a&&c.jsx("div",{className:"text-rose-500 font-bold mb-4 animate-bounce",children:a}),c.jsxs("div",{className:"grid grid-cols-3 gap-4 w-full",children:[[1,2,3,4,5,6,7,8,9].map(Q=>c.jsx("button",{onClick:()=>$(Q),className:"h-16 bg-stone-800 rounded-xl font-bold text-2xl hover:bg-stone-700 active:scale-95 transition-all shadow-lg",children:Q},Q)),c.jsx("div",{className:"h-16"}),c.jsx("button",{onClick:()=>$(0),className:"h-16 bg-stone-800 rounded-xl font-bold text-2xl hover:bg-stone-700 active:scale-95 transition-all shadow-lg",children:"0"}),c.jsx("button",{onClick:G,className:"h-16 bg-stone-800/50 text-stone-500 rounded-xl flex items-center justify-center hover:bg-stone-800 hover:text-white active:scale-95 transition-all",children:c.jsx(qE,{size:20})})]}),c.jsx("button",{onClick:S,disabled:o.length!==4||_,className:"w-full mt-8 py-4 bg-stone-100 text-stone-900 rounded-xl font-bold hover:bg-white disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:_?"Processing...":n==="CREATE_PIN"?"SET PASSWORD":"LOGIN"})]})};if(t===null)return c.jsxs("div",{className:"h-screen w-full flex flex-col items-center justify-center bg-stone-900 text-stone-100 p-6 overflow-hidden",children:[n==="SELECT"&&c.jsxs("div",{className:"mb-12 flex flex-col items-center animate-in fade-in slide-in-from-top-4 duration-700",children:[c.jsx("h1",{className:"text-5xl font-black tracking-tighter mb-2",children:"GAME HUB"}),c.jsx("p",{className:"text-stone-500 font-medium tracking-widest text-xs uppercase",children:"Secure Login"})]}),n==="SELECT"?c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6 w-full max-w-md",children:[c.jsxs("button",{onClick:()=>C("Amine"),disabled:_||h.Amine,className:`group relative overflow-hidden bg-gradient-to-br from-blue-600 to-indigo-800 p-8 rounded-2xl shadow-xl transition-all ${h.Amine?"opacity-30 grayscale cursor-not-allowed":"hover:scale-105"}`,children:[c.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition-opacity",children:c.jsx(lS,{size:48})}),c.jsxs("div",{className:"relative z-10 flex flex-col items-center",children:[c.jsx("span",{className:"text-3xl font-black mb-1",children:"AMINE"}),c.jsx("span",{className:"text-blue-200 text-sm font-bold tracking-widest",children:h.Amine?"ONLINE":"PLAYER 1"})]})]}),c.jsxs("button",{onClick:()=>C("Hasnae"),disabled:_||h.Hasnae,className:`group relative overflow-hidden bg-gradient-to-br from-rose-500 to-pink-700 p-8 rounded-2xl shadow-xl transition-all ${h.Hasnae?"opacity-30 grayscale cursor-not-allowed":"hover:scale-105"}`,children:[c.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition-opacity",children:c.jsx(eS,{size:48})}),c.jsxs("div",{className:"relative z-10 flex flex-col items-center",children:[c.jsx("span",{className:"text-3xl font-black mb-1",children:"HASNAE"}),c.jsx("span",{className:"text-rose-200 text-sm font-bold tracking-widest",children:h.Hasnae?"ONLINE":"PLAYER 2"})]})]})]}):Y()]});if(!N){const $=s==="Amine"?"Hasnae":"Amine",G=p[s],Q=p[$],H=(Se,P,w,b,R)=>{const D=G===Se,re=Q===Se,ue=D&&re,it=g[Se||""]||{Amine:0,Hasnae:0};return c.jsxs("button",{onClick:()=>te(Se),className:`
                    group relative h-72 bg-stone-900 border-2 rounded-3xl transition-all flex flex-col items-center justify-center gap-6 overflow-hidden shadow-2xl
                    ${D?`border-${w}-500 bg-stone-800 scale-105 z-10 ring-4 ring-${w}-500/20`:"border-stone-800 hover:bg-stone-800 hover:border-stone-700"}
                `,children:[c.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${R} opacity-0 ${D?"opacity-10":"group-hover:opacity-10"} transition-opacity`}),re&&c.jsx("div",{className:"absolute top-4 right-4 animate-in fade-in zoom-in duration-300",children:c.jsxs("div",{className:`
                             flex items-center gap-2 px-3 py-1.5 rounded-full shadow-lg border border-stone-700
                             ${$==="Amine"?"bg-indigo-900/90 text-indigo-100":"bg-rose-900/90 text-rose-100"}
                         `,children:[c.jsx("div",{className:`w-2 h-2 rounded-full animate-pulse ${$==="Amine"?"bg-indigo-400":"bg-rose-400"}`}),c.jsx("span",{className:"text-[10px] font-bold tracking-wider uppercase",children:$})]})}),c.jsx("div",{className:"absolute top-4 left-4 flex gap-2",children:c.jsxs("div",{className:"bg-stone-950/80 border border-stone-800 rounded-lg px-2 py-1 flex items-center gap-2 text-[10px] font-bold text-stone-400",children:[c.jsxs("span",{className:"text-indigo-400",children:["A: ",it.Amine||0]}),c.jsx("span",{className:"text-stone-700",children:"|"}),c.jsxs("span",{className:"text-rose-400",children:["H: ",it.Hasnae||0]})]})}),c.jsx("div",{className:`
                     flex gap-2 transition-transform duration-500
                     ${D?"scale-110":"group-hover:scale-110"}
                     ${Se==="UNO"?"rotate-[-5deg]":""}
                 `,children:Se==="UNO"?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"w-10 h-14 bg-rose-500 rounded-lg shadow-lg"}),c.jsx("div",{className:"w-10 h-14 bg-blue-500 rounded-lg shadow-lg"})]}):c.jsx(b,{size:48,className:D?`text-${w}-400`:"text-stone-500 group-hover:text-stone-300"})}),c.jsxs("div",{className:"relative z-10 flex flex-col items-center",children:[c.jsx("span",{className:`text-2xl font-black tracking-widest ${D?"text-white":"text-stone-400 group-hover:text-stone-200"}`,children:P}),c.jsx("div",{className:"h-6 mt-2",children:ue?c.jsxs("span",{className:`text-xs font-bold text-${w}-400 flex items-center gap-1 animate-pulse`,children:[c.jsx(fi,{size:12,className:"animate-spin"})," STARTING..."]}):D?c.jsx("span",{className:"text-[10px] font-bold text-stone-500 tracking-widest uppercase animate-pulse",children:"WAITING..."}):re?c.jsx("span",{className:"text-[10px] font-bold text-stone-500 tracking-widest uppercase",children:"OPPONENT READY"}):null})]}),D&&c.jsx("div",{className:"absolute inset-x-0 bottom-0 h-1 bg-stone-100/20",children:c.jsx("div",{className:`h-full bg-${w}-500 animate-[loading_2s_ease-in-out_infinite] w-full origin-left`})})]})};return c.jsxs("div",{className:"h-screen w-full flex flex-col items-center justify-center bg-stone-950 text-stone-100 p-6 overflow-hidden",children:[c.jsx("div",{className:"absolute top-4 left-4",children:c.jsxs("button",{onClick:j,className:"text-xs font-bold text-stone-600 hover:text-stone-400 flex items-center gap-1",children:[c.jsx(Yn,{size:14})," LOGOUT"]})}),c.jsx("h1",{className:"text-4xl font-black mb-8 tracking-tighter",children:"SELECT GAME"}),c.jsx("div",{className:"w-full max-w-5xl overflow-y-auto no-scrollbar",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 pb-4 px-4",children:[H("UNO","UNO","amber",null,"from-rose-500/10 to-blue-500/10"),H("CHESS","CHESS","emerald",sS,"from-emerald-700/10 to-white/5"),H("MORRIS","3 MORRIS","violet",JE,"from-violet-700/10 to-fuchsia-500/5"),H("TTT_MOVE","TTT MOVE","cyan",tS,"from-cyan-700/10 to-teal-500/5"),H("PARTSHI","PARTSHI","orange",XE,"from-orange-700/10 to-amber-500/5")]})}),c.jsxs("div",{className:"mt-8 text-center text-stone-500 text-sm max-w-xs h-10 flex items-center justify-center",children:[G&&!Q&&c.jsxs("span",{className:"animate-pulse",children:["Waiting for ",$," to join..."]}),!G&&Q&&c.jsxs("span",{className:"text-stone-400 font-bold",children:[$," is waiting for you in ",Q,"!"]}),G&&Q&&G!==Q&&c.jsx("span",{className:"text-amber-500 font-bold",children:"You selected different games!"})]})]})}return N==="UNO"?c.jsx(fS,{myPlayerId:t,onExit:A}):N==="CHESS"?c.jsx(yS,{myPlayerId:t,onExit:A}):N==="MORRIS"?c.jsx(ES,{myPlayerId:t,onExit:A}):N==="TTT_MOVE"?c.jsx(kS,{myPlayerId:t,onExit:A}):N==="PARTSHI"?c.jsx(AS,{myPlayerId:t,onExit:A}):c.jsx("div",{children:"Loading..."})}const e0=document.getElementById("root");if(!e0)throw new Error("Could not find root element to mount to");const DS=km(e0);DS.render(c.jsx(y0.StrictMode,{children:c.jsx(jS,{})}));
